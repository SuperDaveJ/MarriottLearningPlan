/*              
 * ChartNew.min.js  
 * Vancoppenolle Francois - January 2014
 * francois.vancoppenolle@favomo.be               
 * GitHub community : https://github.com/FVANCOP/ChartNew.js
 */
function lineStyleFn(a){return"object"==typeof chartJSLineStyle[a]?chartJSLineStyle[a]:chartJSLineStyle.solid}function roundToWithThousands(a,e,t){var i=1*unFormat(a,e);if("number"==typeof i&&"none"!=t){var l;if(0>=t)l=-t,i=+(Math.round(i+"e+"+l)+"e-"+l);else{l=t;var n="1e+"+l;i=+Math.round(i/n)*n}}return i=fmtChartJS(a,i,"none")}function unFormat(a,e){if("."==a.decimalSeparator&&""==a.thousandSeparator||"string"!=typeof e)return e;var t=""+e;if(""!=a.thousandSeparator)for(;t.indexOf(a.thousandSeparator)>=0;)t=""+t.replace(a.thousandSeparator,"");return"."!=a.decimalSeparator&&(t=""+t.replace(a.decimalSeparator,".")),1*t}function fmtChartJSPerso(a,e,t){switch(t){case"SampleJS_Format":"number"==typeof e?return_value="My Format : "+e.toString()+" $":return_value=e+"XX";break;case"Change_Month":"string"==typeof e?return_value=e.toString()+" 2014":return_value=e.toString()+"YY";break;default:return_value=e}return return_value}function fmtChartJS(a,e,t){var i;if("notformatted"==t)i=e;else if("none"==t&&"number"==typeof e){if("none"!=a.roundNumber){var l;if(a.roundNumber<=0)l=-a.roundNumber,e=+(Math.round(e+"e+"+l)+"e-"+l);else{l=a.roundNumber;var n="1e+"+l;e=+Math.round(e/n)*n}}if("."!=a.decimalSeparator||""!=a.thousandSeparator){if(i=e.toString().replace(/\./g,a.decimalSeparator),""!=a.thousandSeparator){var o=i,s="",r=o.indexOf(a.decimalSeparator);r>=0&&(s=o.substring(r+1,o.length),s=s.split("").reverse().join(""),o=o.substring(0,r)),o=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a.thousandSeparator),s=s.split("").reverse().join(""),i=o,""!=s&&(i=i+a.decimalSeparator+s)}}else i=e}else i="none"!=t&&"notformatted"!=t?fmtChartJSPerso(a,e,t):e;return i}function addParameters2Function(data,fctName,fctList){var mathFunctions={mean:{data:data.data,datasetNr:data.v11},varianz:{data:data.data,datasetNr:data.v11},stddev:{data:data.data,datasetNr:data.v11},cv:{data:data.data,datasetNr:data.v11},median:{data:data.data,datasetNr:data.v11}};if(dif=!1,"Dif"==fctName.substr(-3)&&(fctName=fctName.substr(0,fctName.length-3),dif=!0),"function"==typeof eval(fctName)){var parameter=eval(fctList+"."+fctName);return dif?data.v3-window[fctName](parameter):window[fctName](parameter)}return null}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}function tmplbis(a,e,t){return newstr=a,newstr.substr(0,t.templatesOpenTag.length)==t.templatesOpenTag&&(newstr="<%="+newstr.substr(t.templatesOpenTag.length,newstr.length-t.templatesOpenTag.length)),newstr.substr(newstr.length-t.templatesCloseTag.length,t.templatesCloseTag.length)==t.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-t.templatesCloseTag.length)+"%>"),tmplter(newstr,e)}function tmplter(a,e){for(var t=["mean","varianz","stddev","cv","median"],i=new RegExp("<%=((?:(?:.*?)\\W)??)((?:"+t.join("|")+")(?:Dif)?)\\(([0-9]*?)\\)(.*?)%>","g");i.test(a);)a=a.replace(i,function(a,t,i,l,n){var o;o=l?l:2;var s=addParameters2Function(e,i,"mathFunctions");return isNumber(s)?"<%="+t+Math.round(Math.pow(10,o)*s)/Math.pow(10,o)+n+"%>":"<%= %>"});var l=/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(a)?cachebis[a]=cachebis[a]||tmplter(document.getElementById(a).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\n]/g,"\\n").replace(/[\t]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?l(e):l}function createCursorDiv(){if(0==cursorDivCreated){var a=document.createElement("divCursor");a.id="divCursor",a.style.position="absolute",document.body.appendChild(a),cursorDivCreated=!0}}function addResponsiveChart(a,e,t,i){initChartResize();var l=resizeGraph(e,i);"undefined"!=typeof e.prevWidth?(resizeCtx(e,l.newWidth,l.newHeight,i),e.prevWidth=l.newWidth):i.responsiveScaleContent&&i.responsiveWindowInitialWidth&&(e.initialWidth=l.newWidth),e.prevWidth=l.newWidth,e.prevHeight=l.newHeight,jsGraphResize[jsGraphResize.length]=[a,e.tpchart,e,t,i]}function initChartResize(){0==initChartJsResize&&(window.addEventListener?window.addEventListener("resize",chartJsResize):window.attachEvent("resize",chartJsResize))}function getMaximumWidth(a){return null!=a.parentNode&&void 0!=a.parentNode&&(container=a.parentNode),container.clientWidth}function getMaximumHeight(a){return null!=a.parentNode&&void 0!=a.parentNode&&(container=a.parentNode),container.clientHeight}function resizeCtx(a,e,t,i){"undefined"==typeof a.DefaultchartTextScale&&(a.DefaultchartTextScale=i.chartTextScale),"undefined"==typeof a.DefaultchartLineScale&&(a.DefaultchartLineScale=i.chartLineScale),"undefined"==typeof a.DefaultchartSpaceScale&&(a.DefaultchartSpaceScale=i.chartSpaceScale),a.canvas.height=t,a.canvas.width=e,"undefined"!=typeof a.chartTextScale&&i.responsiveScaleContent&&(a.chartTextScale=a.DefaultchartTextScale*(e/a.initialWidth),a.chartLineScale=a.DefaultchartLineScale*(e/a.initialWidth),a.chartSpaceScale=a.DefaultchartSpaceScale*(e/a.initialWidth))}function resizeGraph(a,e){"undefined"==typeof e.maintainAspectRatio&&(e.maintainAspectRatio=!0),"undefined"==typeof e.responsiveMinWidth&&(e.responsiveMinWidth=0),"undefined"==typeof e.responsiveMinHeight&&(e.responsiveMinHeight=0),"undefined"==typeof e.responsiveMaxWidth&&(e.responsiveMaxWidth=9999999),"undefined"==typeof e.responsiveMaxHeight&&(e.responsiveMaxHeight=9999999);var t=a.canvas;"undefined"==typeof a.aspectRatio&&(a.aspectRatio=t.width/t.height);var i=getMaximumWidth(t),l=e.maintainAspectRatio?i/a.aspectRatio:getMaximumHeight(t);return i=Math.min(e.responsiveMaxWidth,Math.max(e.responsiveMinWidth,i)),l=Math.min(e.responsiveMaxHeight,Math.max(e.responsiveMinHeight,l)),{newWidth:parseInt(i),newHeight:parseInt(l)}}function chartJsResize(){for(var a=0;a<jsGraphResize.length;a++)0==jsGraphResize[a][2].firstPass||(9==jsGraphResize[a][2].firstPass?(jsGraphResize[a][2].firstPass=2,redrawGraph(jsGraphResize[a][2],jsGraphResize[a][3],jsGraphResize[a][4])):jsGraphResize[a][2].firstPass<10&&(jsGraphResize[a][2].firstPass+=10))}function testRedraw(a,e,t){return a.firstPass>10?(a.firstPass=2,redrawGraph(a,e,t),!0):!1}function updateChart(a,e,t,i,l){if(9==a.firstPass){if(window.devicePixelRatio&&1!=t.responsive&&(a.canvas.width=a.canvas.width/window.devicePixelRatio,a.canvas.height=a.canvas.height/window.devicePixelRatio),a.runanimationcompletefunction=l,i?a.firstPass=1:a.firstPass=2,t.responsive)for(var n=0;n<jsGraphResize.length;n++)jsGraphResize[n][2].ChartNewId==a.ChartNewId&&(jsGraphResize[n][3]=e,jsGraphResize[n][4]=t);redrawGraph(a,e,t)}}function redrawGraph(ctx,data,config){var myGraph=new Chart(ctx);eval("myGraph."+ctx.tpchart+"(data,config);")}function checkBrowser(){return this.ver=navigator.appVersion,this.dom=document.getElementById?1:0,this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0,this.ie4=document.all&&!this.dom?1:0,this.ns5=this.dom&&parseInt(this.ver)>=5?1:0,this.ns4=document.layers&&!this.dom?1:0,this.bw=this.ie5||this.ie4||this.ns4||this.ns5,this}function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop",bw.ns4&&document.captureEvents(Event.MOUSEMOVE)}function makeCursorObj(obj,nest){return createCursorDiv(),nest=nest?"document."+nest+".":"",this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0,this.moveIt=b_moveIt,cursorInit(),this}function b_moveIt(a,e){this.x=a,this.y=e,this.css.left=this.x+"px",this.css.top=this.y+"px"}function isIE(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?parseInt(a.split("msie")[1]):!1}function mergeChartConfig(a,e){var t={};for(var i in a)t[i]=a[i];for(var l in e)t[l]=e[l];return t}function sleep(a){var e=new Date;for(e.setTime(e.getTime()+a);(new Date).getTime()<e.getTime(););}function saveCanvas(a,e,t){cvSave=a.getImageData(0,0,a.canvas.width,a.canvas.height);var i={savePng:!1,annotateDisplay:!1,animation:!1,dynamicDisplay:!1},l=mergeChartConfig(t,i);l.clearRect=!1,redrawGraph(a,e,l);var n;if("NewWindow"==t.savePngOutput&&(n=a.canvas.toDataURL(),a.putImageData(cvSave,0,0),window.open(n,"_blank")),"CurrentWindow"==t.savePngOutput&&(n=a.canvas.toDataURL(),a.putImageData(cvSave,0,0),window.location.href=n),"Save"==t.savePngOutput){n=a.canvas.toDataURL();var o=document.createElement("a");o.href=n,o.download=t.savePngName+".png",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}function dynamicFunction(a,e,t){if(isIE()<9&&0!=isIE())return!0;if(e.dynamicDisplay&&0==t.firstPass){if(""==t.canvas.id){var i=new Date,l=i.getTime();t.canvas.id="Canvas_"+l}if("undefined"==typeof dynamicDisplay[t.canvas.id]&&(dynamicDisplayList[dynamicDisplayList.length]=t.canvas.id,dynamicDisplay[t.canvas.id]=[t,a,e],window.onscroll=scrollFunction),!isScrolledIntoView(t.canvas,e))return!1}return!0}function isScrolledIntoView(a,e){var t,i,l=0,n=0;for("undefined"==typeof a.recomputedHeight&&(window.devicePixelRatio?(a.recomputedHeight=a.height/window.devicePixelRatio,a.recomputedWidth=a.width/window.devicePixelRatio):(a.recomputedHeight=a.height,a.recomputedWidth=a.width)),t=a.recomputedWidth,i=a.recomputedHeight,elem=a;elem;)l+=elem.offsetLeft+elem.clientLeft,n+=elem.offsetTop+elem.clientTop,elem=elem.offsetParent;return l+t*e.dynamicDisplayXPartOfChart>=window.pageXOffset&&l+t*e.dynamicDisplayXPartOfChart<=window.pageXOffset+window.innerWidth&&n+i*e.dynamicDisplayYPartOfChart>=window.pageYOffset&&n+i*e.dynamicDisplayYPartOfChart<=window.pageYOffset+window.innerHeight?!0:!1}function scrollFunction(){for(var a=0;a<dynamicDisplayList.length;a++)0==dynamicDisplay[dynamicDisplayList[a]][0].firstPass&&redrawGraph(dynamicDisplay[dynamicDisplayList[a]][0],dynamicDisplay[dynamicDisplayList[a]][1],dynamicDisplay[dynamicDisplayList[a]][2])}function clearAnnotate(a){jsGraphAnnotate[a]=[],jsTextMousePos[a]=[]}function getMousePos(a,e){var t=a.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function isHighLighted(a,e,t,i,l,n,o){var s;if(0==e.tpdata){if("object"==typeof t.special)for(s=t.special.length-1;s>=0;s--)if("highLight"==t.special[s].typespecial&&t.special[s].posi==l&&t.special[s].posj==n)return!0}else if("object"==typeof t[0].special)for(s=t[0].special.length-1;s>=0;s--)if("highLight"==t[0].special[s].typespecial&&t[0].special[s].posi==l)return!0;return!1}function isNotHighLighted(a,e,t,i,l,n,o){return!isHighLighted(a,e,t,i,l,n,o)}function deleteHighLight(a,e){var t;if(0==a.tpdata){if("object"==typeof e.special)for(t=e.special.length-1;t>=0;t--)"highLight"==e.special[t].typespecial&&e.special.splice(t,1)}else if("object"==typeof e[0].special)for(t=e[0].special.length-1;t>=0;t--)"highLight"==e[0].special[t].typespecial&&e[0].special.splice(t,1)}function highLightAction(action,ctx,data,config,v1,v2){if(9==ctx.firstPass){var currentlyDisplayed=[-1,-1],redisplay=!1,i,j;if(0==ctx.tpdata){if("object"==typeof data.special)for(i=0;i<data.special.length&&-1==currentlyDisplayed[0];i++)"highLight"==data.special[i].typespecial&&(currentlyDisplayed=[data.special[i].posi,data.special[i].posj])}else if("object"==typeof data[0].special)for(i=0;i<data[0].special.length&&-1==currentlyDisplayed[0];i++)"highLight"==data[0].special[i].typespecial&&(currentlyDisplayed=[data[0].special[i].posi,-1]);var deleteOld=!1,addNew=!1,property,output;if("HIDE"==action&&-1!=currentlyDisplayed[0]?deleteOld=!0:0==ctx.tpdata&&"HIDE"!=action&&"group"==config.highLightFullLine&&currentlyDisplayed[1]!=v2?(-1!=currentlyDisplayed[0]&&(deleteOld=!0),addNew=!0):0!=ctx.tpdata||"HIDE"==action||0!=config.highLightFullLine||currentlyDisplayed[0]==v1&&currentlyDisplayed[1]==v2?0==ctx.tpdata&&"HIDE"!=action&&1==config.highLightFullLine&&currentlyDisplayed[0]!=v1?(-1!=currentlyDisplayed[0]&&(deleteOld=!0),addNew=!0):1==ctx.tpdata&&"HIDE"!=action&&currentlyDisplayed[0]!=v1&&(-1!=currentlyDisplayed[0]&&(deleteOld=!0),addNew=!0):(-1!=currentlyDisplayed[0]&&(deleteOld=!0),addNew=!0),deleteOld)if(redisplay=!0,0==ctx.tpdata)for(i=data.special.length-1;i>=0;i--)"highLight"==data.special[i].typespecial&&data.special.splice(i,1);else for(i=data[0].special.length-1;i>=0;i--)"highLight"==data[0].special[i].typespecial&&data[0].special.splice(i,1);if(addNew)if(redisplay=!0,0==ctx.tpdata){if("undefined"==typeof data.special&&(data.special=[]),"group"==config.highLightFullLine){for(j=0;j<data.datasets.length;j++)if(0!=data.datasets[j].mouseDetection){output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];eval("data.special[data.special.length]={"+output+"};"),data.special[data.special.length-1].posi=j,data.special[data.special.length-1].posj=v2,data.special[data.special.length-1].typespecial="highLight"}}else if(1==config.highLightFullLine){if(0!=data.datasets[v1].mouseDetection)for(j=0;j<data.datasets[v1].data.length;j++){output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];eval("data.special[data.special.length]={"+output+"};"),data.special[data.special.length-1].posi=v1,data.special[data.special.length-1].posj=j,data.special[data.special.length-1].typespecial="highLight"}}else if(0!=data.datasets[v1].mouseDetection){output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];eval("data.special[data.special.length]={"+output+"};"),data.special[data.special.length-1].posi=v1,data.special[data.special.length-1].posj=v2,data.special[data.special.length-1].typespecial="highLight"}}else{"undefined"==typeof data[0].special&&(data[0].special=[]),output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];eval("data[0].special[data[0].special.length]={"+output+"};"),data[0].special[data[0].special.length-1].posi=v1,data[0].special[data[0].special.length-1].posj=v2,data[0].special[data[0].special.length-1].typespecial="highLight"}1==redisplay&&updateChart(ctx,data,config,!1,config.highLightRerunEndFunction)}}function doMouseAction(config,ctx,event,data,action,funct){if(9==ctx.firstPass){var onData=!1,topY,bottomY,leftX,rightX,textMsr;if("annotate"==action){var annotateDIV=document.getElementById("divCursor"),show=!1;annotateDIV.className=config.annotateClassName?config.annotateClassName:"",annotateDIV.style.border=config.annotateClassName?"":config.annotateBorder,annotateDIV.style.padding=config.annotateClassName?"":config.annotatePadding,annotateDIV.style.borderRadius=config.annotateClassName?"":config.annotateBorderRadius,annotateDIV.style.backgroundColor=config.annotateClassName?"":config.annotateBackgroundColor,annotateDIV.style.color=config.annotateClassName?"":config.annotateFontColor,annotateDIV.style.fontFamily=config.annotateClassName?"":config.annotateFontFamily,annotateDIV.style.fontSize=config.annotateClassName?"":Math.ceil(ctx.chartTextScale*config.annotateFontSize).toString()+"pt",annotateDIV.style.fontStyle=config.annotateClassName?"":config.annotateFontStyle,annotateDIV.style.zIndex=999,ctx.save(),ctx.font=annotateDIV.style.fontStyle+" "+annotateDIV.style.fontSize+" "+annotateDIV.style.fontFamily;var rect=ctx.canvas.getBoundingClientRect()}"annotate"==action&&(show=!1,annotateDIV.style.display=show?"":"none"),"highLight"==action&&(show=!1);for(var canvas_pos=getMousePos(ctx.canvas,event),i=0;i<jsGraphAnnotate[ctx.ChartNewId].length&&!show;i++){if("ARC"==jsGraphAnnotate[ctx.ChartNewId][i][0]){if(myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]],distance=Math.sqrt((canvas_pos.x-myStatData.midPosX)*(canvas_pos.x-myStatData.midPosX)+(canvas_pos.y-myStatData.midPosY)*(canvas_pos.y-myStatData.midPosY)),distance>myStatData.int_radius&&distance<myStatData.radiusOffset&&(angle=(Math.acos((canvas_pos.x-myStatData.midPosX)/distance)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),canvas_pos.y<myStatData.midPosY&&(angle=-angle),angle=((angle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.startAngle=((myStatData.startAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle=((myStatData.endAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle<myStatData.startAngle&&(myStatData.endAngle+=2*Math.PI),(angle>myStatData.startAngle&&angle<myStatData.endAngle||angle>myStatData.startAngle-2*Math.PI&&angle<myStatData.endAngle-2*Math.PI||angle>myStatData.startAngle+2*Math.PI&&angle<myStatData.endAngle+2*Math.PI)&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,onData=!0,"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]?(dispString=tmplbis(setOptionValue(!0,1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],void 0,config.annotateLabel,"annotateLabel",jsGraphAnnotate[ctx.ChartNewId][i][1],-1,{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString,1*annotateDIV.style.fontSize.replace("pt","")),ctx.restore(),annotateDIV.innerHTML=dispString,show=!0):"highLight"==action?(show=!0,highLightAction("ARC",ctx,data,config,jsGraphAnnotate[ctx.ChartNewId][i][1],-1)):"function"==typeof funct&&funct(event,ctx,config,data,myStatData),"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4])))if(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),config.annotateRelocate===!0){var relocateX,relocateY;relocateX=0,relocateY=0,x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-fromLeft&&(relocateX=-textMsr.textWidth),y+fromTop+textMsr.textHeight>1*window.innerHeight-1*rect.top+fromTop&&(relocateY-=textMsr.textHeight+2*fromTop),oCursor.moveIt(Math.max(8-rect.left,x+fromLeft+relocateX),Math.max(8-rect.top,y+fromTop+relocateY))}else oCursor.moveIt(x+fromLeft,y+fromTop)}else if("RECT"==jsGraphAnnotate[ctx.ChartNewId][i][0]){if(myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]][jsGraphAnnotate[ctx.ChartNewId][i][2]],topY=Math.max(myStatData.yPosBottom,myStatData.yPosTop),bottomY=Math.min(myStatData.yPosBottom,myStatData.yPosTop),topY-bottomY<config.annotateBarMinimumDetectionHeight&&(topY=(topY+bottomY+config.annotateBarMinimumDetectionHeight)/2,bottomY=topY-config.annotateBarMinimumDetectionHeight),leftX=Math.min(myStatData.xPosLeft,myStatData.xPosRight),rightX=Math.max(myStatData.xPosLeft,myStatData.xPosRight),rightX-leftX<config.annotateBarMinimumDetectionHeight&&(rightX=(rightX+leftX+config.annotateBarMinimumDetectionHeight)/2,leftX=rightX-config.annotateBarMinimumDetectionHeight),canvas_pos.x>leftX&&canvas_pos.x<rightX&&canvas_pos.y<topY&&canvas_pos.y>bottomY&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,onData=!0,"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]?(dispString=tmplbis(setOptionValue(!0,1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],void 0,config.annotateLabel,"annotateLabel",jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2],{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString,1*annotateDIV.style.fontSize.replace("pt","")),ctx.restore(),annotateDIV.innerHTML=dispString,show=!0):"highLight"==action?(show=!0,highLightAction("RECT",ctx,data,config,jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2])):"function"==typeof funct&&funct(event,ctx,config,data,myStatData),"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]))if(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),config.annotateRelocate===!0){var relocateX,relocateY;relocateX=0,relocateY=0,x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-fromLeft&&(relocateX=-textMsr.textWidth),y+fromTop+textMsr.textHeight>1*window.innerHeight-1*rect.top+fromTop&&(relocateY-=textMsr.textHeight+2*fromTop),oCursor.moveIt(Math.max(8-rect.left,x+fromLeft+relocateX),Math.max(8-rect.top,y+fromTop+relocateY))}else oCursor.moveIt(x+fromLeft,y+fromTop)}else if("POINT"==jsGraphAnnotate[ctx.ChartNewId][i][0]){myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]][jsGraphAnnotate[ctx.ChartNewId][i][2]];var distance;if(config.detectAnnotateOnFullLine)if(canvas_pos.x<Math.min(myStatData.annotateStartPosX,myStatData.annotateEndPosX)-Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)||canvas_pos.x>Math.max(myStatData.annotateStartPosX,myStatData.annotateEndPosX)+Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)||canvas_pos.y<Math.min(myStatData.annotateStartPosY,myStatData.annotateEndPosY)-Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)||canvas_pos.y>Math.max(myStatData.annotateStartPosY,myStatData.annotateEndPosY)+Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius))distance=Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)+1;else if("undefined"==typeof myStatData.D1A)distance=Math.abs(canvas_pos.x-myStatData.posX);else if("undefined"==typeof myStatData.D2A)distance=Math.abs(canvas_pos.y-myStatData.posY);else{var D2B=-myStatData.D2A*canvas_pos.x+canvas_pos.y,g=-(myStatData.D1B-D2B)/(myStatData.D1A-myStatData.D2A),h=myStatData.D2A*g+D2B;distance=Math.sqrt((canvas_pos.x-g)*(canvas_pos.x-g)+(canvas_pos.y-h)*(canvas_pos.y-h))}else distance=Math.sqrt((canvas_pos.x-myStatData.posX)*(canvas_pos.x-myStatData.posX)+(canvas_pos.y-myStatData.posY)*(canvas_pos.y-myStatData.posY));if(distance<Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,onData=!0,"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]?(dispString=tmplbis(setOptionValue(!0,1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],void 0,config.annotateLabel,"annotateLabel",jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2],{otherVal:!0}),myStatData,config),textMsr=ctx.measureTextMultiLine(dispString,1*annotateDIV.style.fontSize.replace("pt","")),ctx.restore(),annotateDIV.innerHTML=dispString,show=!0):"highLight"==action?(show=!0,highLightAction("POINT",ctx,data,config,jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2])):"function"==typeof funct&&funct(event,ctx,config,data,myStatData),"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]))if(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),config.annotateRelocate===!0){var relocateX,relocateY;relocateX=0,relocateY=0,x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-fromLeft&&(relocateX=-textMsr.textWidth),y+fromTop+textMsr.textHeight>1*window.innerHeight-1*rect.top+fromTop&&(relocateY-=textMsr.textHeight+2*fromTop),oCursor.moveIt(Math.max(8-rect.left,x+fromLeft+relocateX),Math.max(8-rect.top,y+fromTop+relocateY))}else oCursor.moveIt(x+fromLeft,y+fromTop)}"annotate"==action&&jsGraphAnnotate[ctx.ChartNewId][i][4]&&(annotateDIV.style.display=show?"":"none",show&&annotatePrevShow!=i&&(annotatePrevShow>=0&&"function"==typeof config.annotateFunctionOut&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][0]?config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][3],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][1],-1,null):config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][3],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][1],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][2],null)),annotatePrevShow=i,"function"==typeof config.annotateFunctionIn&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][i][0]?config.annotateFunctionIn("INANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],jsGraphAnnotate[ctx.ChartNewId][i][1],-1,null):config.annotateFunctionIn("INANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][i][3],jsGraphAnnotate[ctx.ChartNewId][i][1],jsGraphAnnotate[ctx.ChartNewId][i][2],null))))}0==show&&"annotate"==action&&annotatePrevShow>=0&&("function"==typeof config.annotateFunctionOut&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][0]?config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][3],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][1],-1,null):config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][3],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][1],jsGraphAnnotate[ctx.ChartNewId][annotatePrevShow][2],null)),annotatePrevShow=-1),0==show&&"highLight"==action&&highLightAction("HIDE",ctx,data,config,null,null);var inRect;if("annotate"!=action&&"highLight"!=action){if(config.detectMouseOnText)for(var i=0;i<jsTextMousePos[ctx.ChartNewId].length;i++){if(inRect=!0,Math.abs(jsTextMousePos[ctx.ChartNewId][i][3].p1-jsTextMousePos[ctx.ChartNewId][i][3].p2)<config.zeroValue)canvas_pos.x<Math.min(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p2)&&(inRect=!1),canvas_pos.x>Math.max(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p2)&&(inRect=!1),canvas_pos.y<Math.min(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p3)&&(inRect=!1),canvas_pos.y>Math.max(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p3)&&(inRect=!1);else if(Math.abs(jsTextMousePos[ctx.ChartNewId][i][2].p1-jsTextMousePos[ctx.ChartNewId][i][2].p2)<config.zeroValue)canvas_pos.x<Math.min(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p3)&&(inRect=!1),canvas_pos.x>Math.max(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p3)&&(inRect=!1),canvas_pos.y<Math.min(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p2)&&(inRect=!1),canvas_pos.y>Math.max(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p2)&&(inRect=!1);else{var P12=Math.tan(jsTextMousePos[ctx.ChartNewId][i][4]),D12=jsTextMousePos[ctx.ChartNewId][i][3].p1-P12*jsTextMousePos[ctx.ChartNewId][i][2].p1,D34=jsTextMousePos[ctx.ChartNewId][i][3].p3-P12*jsTextMousePos[ctx.ChartNewId][i][2].p3,P13=-1/P12,D13=jsTextMousePos[ctx.ChartNewId][i][3].p1-P13*jsTextMousePos[ctx.ChartNewId][i][2].p1,D24=jsTextMousePos[ctx.ChartNewId][i][3].p4-P13*jsTextMousePos[ctx.ChartNewId][i][2].p4,y1=P12*canvas_pos.x+D12,y2=P12*canvas_pos.x+D34,y3=P13*canvas_pos.x+D13,y4=P13*canvas_pos.x+D24;canvas_pos.y<Math.min(y1,y2)&&(inRect=!1),canvas_pos.y>Math.max(y1,y2)&&(inRect=!1),canvas_pos.y<Math.min(y3,y4)&&(inRect=!1),canvas_pos.y>Math.max(y3,y4)&&(inRect=!1)}inRect&&(onData=!0,funct(event,ctx,config,data,{type:"CLICKONTEXT",values:jsTextMousePos[ctx.ChartNewId][i]}))}0==onData&&funct(event,ctx,config,data,null)}}}function animationCorrection(a,e,t,i,l,n){var o=a,s=0;if(0>l)if(i<1*t.animationStartWithData-1)o=1;else switch(t.animationByDataset){case"ByArc":o=a;break;case!0:o=a;break;case!1:default:o=a}else{var r=Math.max(1,t.animationStartWithDataset),c=Math.max(1,t.animationStartWithData);if(i<1*t.animationStartWithDataset-1)o=1;else if(l<1*t.animationStartWithData-1)o=1;else{var h=0;if(t.animationLeftToRight)for(var d=0;d<e.datasets.length;d++)h=Math.max(h,e.datasets[d].data.length);switch(t.animationByDataset){case!0:switch(t.animationLeftToRight){case!0:var p=(i-(r-1))*(h-(c-1))+(l-(c-1));h=(h-(c-1))*(e.datasets.length-(r-1)),p/h>a?(o=0,n&&l+1==c&&(o=1)):(p+1)/h>a?(o=(a-p/h)*h,n&&(s=o,o=1)):o=1;break;case!1:default:o=a<(i-(r-1))/(e.datasets.length-(r-1))?.001:a<(i-(r-1)+1)/(e.datasets.length-(r-1))?(e.datasets.length-(r-1))*(a-(i-(r-1))/(e.datasets.length-(r-1))):1}break;case!1:default:switch(t.animationLeftToRight){case!0:var p=l-(c-1);h-=c-1,p/h>a?o=0:(p+1)/h>a?(o=(a-p/h)*h,n&&(s=o,o=1)):o=1;break;case!1:default:o=a}}}}return{mainVal:o,subVal:s,animVal:o+s}}function showLabels(a,e,t,i){var l=setOptionValue(!0,1,"SHOWLABEL",a,e,void 0,void 0,t.showXLabels,"showXLabels",i,-1,void 0,{labelValue:fmtChartJS(t,e.labels[i],t.fmtXLabel),unformatedLabelValue:e.labels[i]});return"number"==typeof l&&(l=i>=t.firstLabelToShow-1&&(i+t.firstLabelToShow-1)%parseInt(l)==0?!0:!1),l}function showYLabels(a,e,t,i,l){var n=setOptionValue(!0,1,"SHOWYLABEL",a,e,void 0,void 0,t.showYLabels,"showYLabels",-1,i,void 0,{labelValue:l});return"number"==typeof n&&(n=i>=t.firstYLabelToShow-1&&(i+t.firstYLabelToShow-1)%parseInt(n)==0?!0:!1),n}function drawLegend(a,e,t,i,l){var n;1==t.legendBorders&&(i.save(),i.setLineDash(lineStyleFn(t.legendBordersStyle)),i.beginPath(),i.lineWidth=Math.ceil(i.chartLineScale*t.legendBordersWidth),i.strokeStyle=t.legendBordersColors,i.moveTo(a.xLegendBorderPos,a.yLegendBorderPos),i.lineTo(a.xLegendBorderPos,a.yLegendBorderPos+a.legendBorderHeight),i.lineTo(a.xLegendBorderPos+a.legendBorderWidth,a.yLegendBorderPos+a.legendBorderHeight),i.lineTo(a.xLegendBorderPos+a.legendBorderWidth,a.yLegendBorderPos),i.lineTo(a.xLegendBorderPos,a.yLegendBorderPos),i.stroke(),i.closePath(),i.setLineDash([]),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=t.legendFillColor,i.fill(),i.restore()),nbcols=a.nbLegendCols-1,ypos=a.yFirstLegendTextPos-(Math.ceil(i.chartTextScale*t.legendFontSize)+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenTextVertical)),xpos=0,a.drawLegendOnData?fromi=e.datasets.length:fromi=e.length;for(var o=fromi-1;o>=0;o--)if(orderi=o,a.reverseLegend&&(a.drawLegendOnData?orderi=e.datasets.length-o-1:orderi=e.length-o-1),a.drawLegendOnData?tpof=typeof e.datasets[orderi].title:tpof=typeof e[orderi].title,"string"==tpof&&(n=a.drawLegendOnData?fmtChartJS(t,e.datasets[orderi].title,t.fmtLegend).trim():fmtChartJS(t,e[orderi].title,t.fmtLegend).trim(),""!=n)){nbcols++,nbcols==a.nbLegendCols?(nbcols=0,xpos=a.xFirstLegendTextPos,ypos+=Math.ceil(i.chartTextScale*t.legendFontSize)+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenTextVertical)):xpos+=a.widestLegend+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenTextHorizontal),i.save(),i.beginPath();var s=a.legendBox;if(("Bar"==i.tpchart||"StackedBar"==i.tpchart)&&("Line"!=e.datasets[orderi].type||t.datasetFill&&1!=setOptionValue(!1,1,"LINKTYPE",i,e,statData,e.datasets[orderi].linkType,t.linkType,"linkType",orderi,-1,{nullvalue:null})||(s=!1)),s)a.drawLegendOnData?i.lineWidth=Math.ceil(i.chartLineScale*setOptionValue(!1,1,"LINEWIDTH",i,e,void 0,e.datasets[orderi].datasetStrokeWidth,t.datasetStrokeWidth,"datasetStrokeWidth",orderi,-1,{nullvalue:null})):i.lineWidth=Math.ceil(i.chartLineScale*t.datasetStrokeWidth),i.beginPath(),a.drawLegendOnData?(i.strokeStyle=setOptionValue(!1,1,"LEGENDSTROKECOLOR",i,e,void 0,e.datasets[orderi].strokeColor,t.defaultFillColor,"strokeColor",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)}),i.setLineDash(lineStyleFn(setOptionValue(!1,1,"LEGENDLINEDASH",i,e,void 0,e.datasets[orderi].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)})))):(i.strokeStyle=setOptionValue(!1,1,"LEGENDSTROKECOLOR",i,e,void 0,e[orderi].strokeColor,t.defaultFillColor,"strokeColor",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)}),i.setLineDash(lineStyleFn(setOptionValue(!1,1,"LEGENDSEGMENTTROKESTYLE",i,e,void 0,e[orderi].segmentStrokeStyle,t.segmentStrokeStyle,"segmentStrokeStyle",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),
yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)})))),i.moveTo(xpos,ypos),i.lineTo(xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),ypos),i.lineTo(xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),ypos-Math.ceil(i.chartTextScale*t.legendFontSize)),i.lineTo(xpos,ypos-Math.ceil(i.chartTextScale*t.legendFontSize)),i.lineTo(xpos,ypos),i.stroke(),i.closePath(),a.drawLegendOnData?i.fillStyle=setOptionValue(!1,1,"LEGENDFILLCOLOR",i,e,void 0,e.datasets[orderi].fillColor,t.defaultFillColor,"fillColor",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)}):i.fillStyle=setOptionValue(!1,1,"LEGENDFILLCOLOR",i,e,void 0,e[orderi].color,t.defaultFillColor,"color",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)}),i.fill();else{if(i.lineWidth=t.legendColorIndicatorStrokeWidth?t.legendColorIndicatorStrokeWidth:Math.ceil(i.chartLineScale*setOptionValue(!1,1,"LINEWIDTH",i,e,void 0,e.datasets[orderi].datasetStrokeWidth,t.datasetStrokeWidth,"datasetStrokeWidth",orderi,-1,{nullvalue:null})),t.legendColorIndicatorStrokeWidth&&t.legendColorIndicatorStrokeWidth>Math.ceil(i.chartTextScale*t.legendFontSize)&&(i.lineWidth=Math.ceil(i.chartTextScale*t.legendFontSize)),a.drawLegendOnData?(i.strokeStyle=setOptionValue(!1,1,"LEGENDSTROKECOLOR",i,e,void 0,e.datasets[orderi].strokeColor,t.defaultFillColor,"strokeColor",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)}),i.setLineDash(lineStyleFn(setOptionValue(!1,1,"LEGENDLINEDASH",i,e,void 0,e.datasets[orderi].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)})))):(i.strokeStyle=setOptionValue(!1,1,"LEGENDSTROKECOLOR",i,e,void 0,e[orderi].strokeColor,t.defaultFillColor,"strokeColor",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)}),i.setLineDash(lineStyleFn(setOptionValue(!1,1,"LEGENDSEGMENTTROKESTYLE",i,e,void 0,e[orderi].segmentStrokeStyle,t.segmentStrokeStyle,"segmentStrokeStyle",orderi,-1,{animationValue:1,xPosLeft:xpos,yPosBottom:ypos,xPosRight:xpos+Math.ceil(i.chartTextScale*t.legendBlockSize),yPosTop:ypos-Math.ceil(i.chartTextScale*t.legendFontSize)})))),i.moveTo(xpos+2,ypos-Math.ceil(i.chartTextScale*t.legendFontSize)/2),i.lineTo(xpos+2+Math.ceil(i.chartTextScale*t.legendBlockSize),ypos-Math.ceil(i.chartTextScale*t.legendFontSize)/2),i.stroke(),i.fill(),t.pointDot){i.beginPath(),i.fillStyle=setOptionValue(!1,1,"LEGENDMARKERFILLCOLOR",i,e,void 0,e.datasets[orderi].pointColor,t.defaultStrokeColor,"pointColor",orderi,-1,{nullvalue:!0}),i.strokeStyle=setOptionValue(!1,1,"LEGENDMARKERSTROKESTYLE",i,e,void 0,e.datasets[orderi].pointStrokeColor,t.defaultStrokeColor,"pointStrokeColor",orderi,-1,{nullvalue:!0}),i.lineWidth=setOptionValue(!1,i.chartLineScale,"LEGENDMARKERLINEWIDTH",i,e,void 0,e.datasets[orderi].pointDotStrokeWidth,t.pointDotStrokeWidth,"pointDotStrokeWidth",orderi,-1,{nullvalue:!0});var r=setOptionValue(!1,1,"LEGENDMARKERSHAPE",i,e,void 0,e.datasets[orderi].markerShape,t.markerShape,"markerShape",orderi,-1,{nullvalue:!0}),c=setOptionValue(!1,i.chartSpaceScale,"LEGENDMARKERRADIUS",i,e,void 0,e.datasets[orderi].pointDotRadius,t.pointDotRadius,"pointDotRadius",orderi,-1,{nullvalue:!0}),h=setOptionValue(!1,1,"LEGENDMARKERSTROKESTYLE",i,e,void 0,e.datasets[orderi].pointDotStrokeStyle,t.pointDotStrokeStyle,"pointDotStrokeStyle",orderi,-1,{nullvalue:!0});drawMarker(i,xpos+2+Math.ceil(i.chartTextScale*t.legendBlockSize)/2,ypos-Math.ceil(i.chartTextScale*t.legendFontSize)/2,r,c,h)}i.fill()}i.restore(),i.save(),i.beginPath(),i.font=t.legendFontStyle+" "+Math.ceil(i.chartTextScale*t.legendFontSize).toString()+"px "+t.legendFontFamily,i.fillStyle=setOptionValue(!1,1,"LEGENDFONTCOLOR",i,e,void 0,void 0,t.legendFontColor,"legendFontColor",orderi,-1,{nullvalue:!0}),i.textAlign="left",i.textBaseline="bottom",i.translate(xpos+Math.ceil(i.chartTextScale*t.legendBlockSize)+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenBoxAndText),ypos),i.fillTextMultiLine(n,0,0,i.textBaseline,Math.ceil(i.chartTextScale*t.legendFontSize),!0,t.detectMouseOnText,i,"LEGEND_TEXTMOUSE",0,xpos+Math.ceil(i.chartTextScale*t.legendBlockSize)+Math.ceil(i.chartSpaceScale*t.legendSpaceBetweenBoxAndText),ypos,orderi,-1),i.restore()}}function drawMarker(a,e,t,i,l,n){switch(a.setLineDash(lineStyleFn(n)),i){case"square":a.rect(e-l,t-l,2*l,2*l),a.stroke(),a.fill(),a.setLineDash([]);break;case"triangle":pointA_x=0,pointA_y=2/3*l,a.moveTo(e,t-pointA_y),a.lineTo(e+pointA_y*Math.sin(4/3),t+pointA_y*Math.cos(4/3)),a.lineTo(e-pointA_y*Math.sin(4/3),t+pointA_y*Math.cos(4/3)),a.lineTo(e,t-pointA_y),a.stroke(),a.fill(),a.setLineDash([]);break;case"diamond":a.moveTo(e,t+l),a.lineTo(e+l,t),a.lineTo(e,t-l),a.lineTo(e-l,t),a.lineTo(e,t+l),a.stroke(),a.fill(),a.setLineDash([]);break;case"plus":a.moveTo(e,t-l),a.lineTo(e,t+l),a.moveTo(e-l,t),a.lineTo(e+l,t),a.stroke(),a.setLineDash([]);break;case"cross":a.moveTo(e-l,t-l),a.lineTo(e+l,t+l),a.moveTo(e-l,t+l),a.lineTo(e+l,t-l),a.stroke(),a.setLineDash([]);break;case"circle":default:a.arc(e,t,l,0,2*Math.PI*1,!0),a.stroke(),a.fill(),a.setLineDash([])}}function initPassVariableData_part1(a,e,t){var i,l,n,o,s,r,c,h,d,p,u,S,g,f,x,A,m;switch(t.tpdata){case 1:n=[];var M,P,T,v=((e.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);v<=e.zeroValue&&(v=2*Math.PI),P=((-e.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),T=((e.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),startAngle=P,c=0,notemptyval=0;var D=-1,L=-1,y=-1;for(o=-Number.MAX_VALUE,s=Number.MAX_VALUE,i=0;i<a.length;i++)"PolarArea"!=t.tpchart&&1*a[i].value<0||"undefined"!=typeof a[i].value&&(-1==D&&(D=i),o=Math.max(o,1*a[i].value),s=Math.min(s,1*a[i].value),notemptyval++,c+=1*a[i].value,L=i);r=0;var V=-1;for(i=0;i<a.length;i++)p="string"==typeof a[i].title?a[i].title.trim():"","undefined"!=typeof a[i].value&&("PolarArea"==t.tpchart||1*a[i].value>=0)?(M="PolarArea"==t.tpchart?notemptyval>0?v/notemptyval:0:1*a[i].value/c*v,M>=2*Math.PI&&(M=2*Math.PI-.001),r+=1*a[i].value,n[i]={config:e,v1:fmtChartJS(e,p,e.fmtV1),v2:fmtChartJS(e,1*a[i].value,e.fmtV2),v3:fmtChartJS(e,r,e.fmtV3),v4:fmtChartJS(e,c,e.fmtV4),v5:fmtChartJS(e,M,e.fmtV5),v6:roundToWithThousands(e,fmtChartJS(e,100*a[i].value/c,e.fmtV6),e.roundPct),v7:0,v8:0,v9:0,v10:0,v11:fmtChartJS(e,P-M,e.fmtV11),v12:fmtChartJS(e,P,e.fmtV12),v13:fmtChartJS(e,i,e.fmtV13),lgtxt:p,datavalue:1*a[i].value,cumvalue:r,totvalue:c,segmentAngle:M,firstAngle:startAngle,pctvalue:100*a[i].value/c,startAngle:P,realStartAngle:T,endAngle:P+M,maxvalue:o,minvalue:s,i:i,firstNotMissing:D,lastNotMissing:L,prevNotMissing:y,prevMissing:V,nextNotMissing:-1,radiusOffset:0,midPosX:0,midPosY:0,int_radius:0,ext_radius:0,data:a},P+=M,T-=M,-1!=y&&(n[y].nextNotMissing=i),y=i):(n[i]={v1:p,maxvalue:o,minvalue:s,i:i,firstNotMissing:D,lastNotMissing:L,prevNotMissing:y},V=i);break;case 0:default:var b;for(n=[],o=[],o[0]=[],o[1]=[],s=[],s[0]=[],s[1]=[],r=[],r[0]=[],r[1]=[],c=[],c[0]=[],c[1]=[],h=[],h[0]=[],h[1]=[],d=[],d[0]=[],d[1]=[],S=[],g=[],f=[],x=[],A=[],S[0]=[],S[1]=[],m=0,i=0;i<a.datasets.length;i++){if("undefined"!=typeof a.datasets[i].xPos&&"Line"==tpdraw(t,a.datasets[i]))for(l=a.datasets[i].data.length;l<a.datasets[i].xPos.length;l++)a.datasets[i].data.push(void 0);else for(l=a.datasets[i].data.length;l<a.labels.length;l++)a.datasets[i].data.push(void 0);for(b=2==a.datasets[i].axis?0:1,n[i]=[],h[0][i]=-Number.MAX_VALUE,h[1][i]=-Number.MAX_VALUE,d[0][i]=Number.MAX_VALUE,d[1][i]=Number.MAX_VALUE,g[i]=-1,f[i]=-1,l=0;l<a.datasets[i].data.length;l++)"undefined"==typeof x[l]&&(x[l]=-1,A[l]=-1,c[0][l]=0,o[0][l]=-Number.MAX_VALUE,s[0][l]=Number.MAX_VALUE,c[1][l]=0,o[1][l]=-Number.MAX_VALUE,s[1][l]=Number.MAX_VALUE),"undefined"!=typeof a.datasets[i].data[l]&&(m+=1*a.datasets[i].data[l],-1==g[i]&&(g[i]=l),f[i]=l,-1==x[l]&&(x[l]=i),A[l]=i,c[b][l]+=1*a.datasets[i].data[l],o[b][l]=Math.max(o[b][l],1*a.datasets[i].data[l]),s[b][l]=Math.min(s[b][l],1*a.datasets[i].data[l]),h[b][i]=Math.max(h[b][i],1*a.datasets[i].data[l]),d[b][i]=Math.min(d[b][i],1*a.datasets[i].data[l]))}for(i=0;i<a.datasets.length;i++){b=2==a.datasets[i].axis?0:1,p="string"==typeof a.datasets[i].title?a.datasets[i].title.trim():"";var G=-1,O=-1;for(l=0;l<a.datasets[i].data.length;l++)if("undefined"==typeof r[0][l]&&(r[0][l]=0,S[0][l]=-1,r[1][l]=0,S[1][l]=-1),u="","undefined"!=typeof a.datasets[i].xPos&&"undefined"!=typeof a.datasets[i].xPos[l]&&(u=a.datasets[i].xPos[l]),""==u&&"undefined"!=typeof a.labels[l]&&(u=a.labels[l]),"string"==typeof u&&(u=u.trim()),"undefined"!=typeof a.datasets[i].data[l]){switch(r[b][l]+=1*a.datasets[i].data[l],tpdraw(t,a.datasets[i])){case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":n[i][l]={config:e,v1:fmtChartJS(e,p,e.fmtV1),v2:fmtChartJS(e,u,e.fmtV2),v3:fmtChartJS(e,1*a.datasets[i].data[l],e.fmtV3),v4:fmtChartJS(e,r[b][l],e.fmtV4),v5:fmtChartJS(e,c[b][l],e.fmtV5),v6:roundToWithThousands(e,fmtChartJS(e,100*a.datasets[i].data[l]/c[b][l],e.fmtV6),e.roundPct),v6T:roundToWithThousands(e,fmtChartJS(e,100*a.datasets[i].data[l]/m,e.fmtV6T),e.roundPct),v11:fmtChartJS(e,i,e.fmtV11),v12:fmtChartJS(e,l,e.fmtV12),lgtxt:p,lgtxt2:u,datavalue:1*a.datasets[i].data[l],cumvalue:r[b][l],totvalue:c[b][l],pctvalue:100*a.datasets[i].data[l]/c[b][l],pctvalueT:100*a.datasets[i].data[l]/m,maxvalue:o[b][l],minvalue:s[b][l],lmaxvalue:h[b][i],lminvalue:d[b][i],grandtotal:m,firstNotMissing:x[l],lastNotMissing:A[l],prevNotMissing:G,prevMissing:O,nextNotMissing:-1,j:l,i:i,data:a},1*a.datasets[i].data[l]!=0||"HorizontalStackedBar"!=tpdraw(t,a.datasets[i])&&"StackedBar"!=tpdraw(t,a.datasets[i])||(n[i][l].v3="");break;case"Line":case"Radar":n[i][l]={config:e,v1:fmtChartJS(e,p,e.fmtV1),v2:fmtChartJS(e,u,e.fmtV2),v3:fmtChartJS(e,1*a.datasets[i].data[l],e.fmtV3),v5:fmtChartJS(e,1*a.datasets[i].data[l],e.fmtV5),v6:fmtChartJS(e,o[b][l],e.fmtV6),v7:fmtChartJS(e,c[b][l],e.fmtV7),v8:roundToWithThousands(e,fmtChartJS(e,100*a.datasets[i].data[l]/c[b][l],e.fmtV8),e.roundPct),v8T:roundToWithThousands(e,fmtChartJS(e,100*a.datasets[i].data[l]/m,e.fmtV8T),e.roundPct),v11:fmtChartJS(e,i,e.fmtV11),v12:fmtChartJS(e,l,e.fmtV12),lgtxt:p,lgtxt2:u,datavalue:1*a.datasets[i].data[l],diffnext:1*a.datasets[i].data[l],pctvalue:100*a.datasets[i].data[l]/c[b][l],pctvalueT:100*a.datasets[i].data[l]/m,totvalue:c[b][l],cumvalue:r[b][l],maxvalue:o[b][l],minvalue:s[b][l],lmaxvalue:h[b][i],lminvalue:d[b][i],grandtotal:m,firstNotMissing:g[i],lastNotMissing:f[i],prevNotMissing:G,prevMissing:O,nextNotMissing:-1,j:l,i:i,data:a},S[b][l]>=0?(n[i][l].v4=fmtChartJS(e,-1!=S[b][l]?1*a.datasets[i].data[l]-n[S[b][l]][l].datavalue:1*a.datasets[i].data[l],e.fmtV4),n[i][l].diffprev=-1!=S[b][l]?1*a.datasets[i].data[l]-n[S[b][l]][l].datavalue:1*a.datasets[i].data[l],n[S[b][l]][l].diffnext=a.datasets[S[b][l]].data[l]-a.datasets[i].data[l],n[S[b][l]][l].v5=n[S[b][l]][l].diffnext):n[i][l].v4=1*a.datasets[i].data[l],S[b][l]=i}if("undefined"!=typeof a.datasets[i].data[l]){if(-1!=G)for(k=G;k<l;k++)n[i][k].nextNotMissing=l;G=l}}else switch(O=l,tpdraw(t,a.datasets[i])){case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":n[i][l]={v1:p,lmaxvalue:h[b][i],lminvalue:d[b][i],firstNotMissing:x[l],lastNotMissing:A[l],prevNotMissing:G,prevMissing:O,grandtotal:m};break;case"Line":case"Radar":n[i][l]={v1:p,lmaxvalue:h[b][i],lminvalue:d[b][i],firstNotMissing:g[i],lastNotMissing:f[i],prevNotMissing:G,prevMissing:O,grandtotal:m}}}}return n}function initPassVariableData_part2(a,e,t,i,l){function n(a,e,i,l,o,s){if("object"==typeof i.datasets[a].xPos&&"undefined"!=typeof i.datasets[a].xPos[Math.floor(e+t.zeroValue)]){var r=o*s,c="undefined"!=typeof i.xBegin?i.xBegin:1*i.labels[0],h="undefined"!=typeof i.xEnd?i.xEnd:1*i.labels[i.labels.length-1];if(c>=h&&(h=c+100),1*i.datasets[a].xPos[Math.floor(e+t.zeroValue)]>=c&&i.datasets[a].xPos[Math.floor(e+t.zeroValue)]<=h){var d=l+r*((1*i.datasets[a].xPos[Math.floor(e+t.zeroValue)]-c)/(h-c)),p=d;return Math.abs(e-Math.floor(e+t.zeroValue))>t.zeroValue&&(p=n(a,Math.ceil(e-t.zeroValue),i)),d+(e-Math.floor(e+t.zeroValue))*(p-d)}}return l+o*e}function o(a,e,t,i){if(a)return r(c(e)*i-c(t.graphMin)*i,void 0,0);var l=t.steps*t.stepValue,n=e-t.graphMin,o=r(n/l,1,0);return i*t.steps*o}function s(a,e,t){var i=e.steps*e.stepValue,l=a-e.graphMin,n=r(l/i,1,0);return t*e.steps*n}function r(a,e,t){return isNumber(e)&&a>e?e:isNumber(t)&&t>a?t:a}function c(a){return Math.log(a)/Math.LN10}var h,d,p=0;switch(i.tpdata){case 1:for(h=0;h<e.length;h++)a[h].v7=fmtChartJS(t,l.midPosX,t.fmtV7),a[h].v8=fmtChartJS(t,l.midPosY,t.fmtV8),a[h].v9=fmtChartJS(t,l.int_radius,t.fmtV9),a[h].v10=fmtChartJS(t,l.ext_radius,t.fmtV10),"PolarArea"==i.tpchart?(a[h].radiusOffset=o(t.logarithmic,1*e[h].value,l.calculatedScale,l.scaleHop),a[h].v10=fmtChartJS(t,a[h].radiusOffset,t.fmtV10)):(a[h].v10=fmtChartJS(t,l.ext_radius,t.fmtV10),a[h].radiusOffset=l.ext_radius),a[h].outerVal=l.outerVal,a[h].midPosX=l.midPosX,a[h].midPosY=l.midPosY,a[h].calculatedScale=l.calculatedScale,a[h].scaleHop=l.scaleHop,a[h].int_radius=l.int_radius,a[h].ext_radius=l.ext_radius;break;case 0:default:var u=new Array(e.datasets.length),S=new Array(e.datasets.length);for(h=0;h<e.datasets.length;h++)switch(tpdraw(i,e.datasets[h])){case"Line":for(d=0;d<e.datasets[h].data.length;d++)a[h][d].xAxisPosY=l.xAxisPosY,a[h][d].yAxisPosX=l.yAxisPosX,a[h][d].valueHop=l.valueHop,a[h][d].nbValueHop=l.nbValueHop,2==e.datasets[h].axis?(a[h][d].scaleHop=l.scaleHop2,a[h][d].zeroY=l.zeroY2,a[h][d].calculatedScale=l.calculatedScale2,a[h][d].logarithmic=l.logarithmic2):(a[h][d].scaleHop=l.scaleHop,a[h][d].zeroY=l.zeroY,a[h][d].calculatedScale=l.calculatedScale,a[h][d].logarithmic=l.logarithmic),a[h][d].xPos=n(h,d,e,l.yAxisPosX,l.valueHop,l.nbValueHop),a[h][d].yAxisPos=l.xAxisPosY-a[h][d].zeroY,("Bar"==i.tpchart||"StackedBar"==i.tpchart)&&(a[h][d].xPos+=l.valueHop/2,a[h][d].yAxisPosX+=l.valueHop/2),0==d?(a[h][d].lmaxvalue_offset=o(a[h][d].logarithmic,a[h][d].lmaxvalue,a[h][d].calculatedScale,a[h][d].scaleHop)-a[h][d].zeroY,a[h][d].lminvalue_offset=o(a[h][d].logarithmic,a[h][d].lminvalue,a[h][d].calculatedScale,a[h][d].scaleHop)-a[h][d].zeroY):(a[h][d].lmaxvalue_offset=a[h][0].lmaxvalue_offset,a[h][d].lminvalue_offset=a[h][0].lminvalue_offset),"undefined"!=typeof e.datasets[h].data[d]&&(a[h][d].yPosOffset=o(a[h][d].logarithmic,e.datasets[h].data[d],a[h][d].calculatedScale,a[h][d].scaleHop)-a[h][d].zeroY,a[h][d].posY=a[h][d].yAxisPos-a[h][d].yPosOffset),"object"==typeof e.datasets[h].origin&&"undefined"!=typeof e.datasets[h].origin[d]&&(a[h][d].yPosOffsetOrigin=o(a[h][d].logarithmic,e.datasets[h].origin[d],a[h][d].calculatedScale,a[h][d].scaleHop)-a[h][d].zeroY,a[h][d].posYOrigin=a[h][d].yAxisPos-a[h][d].yPosOffsetOrigin),a[h][d].posX=a[h][d].xPos,a[h][d].v9=a[h][d].xPos,a[h][d].v10=a[h][d].posY,a[h][d].annotateStartPosX=a[h][d].xPos,a[h][d].annotateEndPosX=a[h][d].xPos,a[h][d].annotateStartPosY=l.xAxisPosY,a[h][d].annotateEndPosY=l.xAxisPosY-l.msr.availableHeight,a[h][d].D1A=void 0,a[h][d].D1B=void 0;break;case"Radar":var g=2*Math.PI/e.datasets[0].data.length;for(d=0;d<e.datasets[h].data.length;d++)a[h][d].midPosX=l.midPosX,a[h][d].midPosY=l.midPosY,a[h][d].int_radius=0,a[h][d].ext_radius=l.maxSize,a[h][d].radiusOffset=l.maxSize,a[h][d].calculatedScale=l.calculatedScale,a[h][d].scaleHop=l.scaleHop,a[h][d].calculated_offset=o(t.logarithmic,e.datasets[h].data[d],l.calculatedScale,l.scaleHop),a[h][d].offsetX=Math.cos(t.startAngle*Math.PI/180-d*g)*a[h][d].calculated_offset,a[h][d].offsetY=Math.sin(t.startAngle*Math.PI/180-d*g)*a[h][d].calculated_offset,a[h][d].v9=a[h][d].midPosX+a[h][d].offsetX,a[h][d].v10=a[h][d].midPosY-a[h][d].offsetY,a[h][d].posX=a[h][d].midPosX+a[h][d].offsetX,a[h][d].posY=a[h][d].midPosY-a[h][d].offsetY,0==d?a[h][d].calculated_offset_max=o(t.logarithmic,a[h][d].lmaxvalue,l.calculatedScale,l.scaleHop):a[h][d].calculated_offset_max=a[0][d].calculated_offset_max,a[h][d].annotateStartPosX=l.midPosX,a[h][d].annotateEndPosX=l.midPosX+Math.cos(t.startAngle*Math.PI/180-d*g)*l.maxSize,a[h][d].annotateStartPosY=l.midPosY,a[h][d].annotateEndPosY=l.midPosY-Math.sin(t.startAngle*Math.PI/180-d*g)*l.maxSize,Math.abs(a[h][d].annotateStartPosX-a[h][d].annotateEndPosX)<t.zeroValue?(a[h][d].D1A=void 0,a[h][d].D1B=void 0,a[h][d].D2A=0):(a[h][d].D1A=(a[h][d].annotateStartPosY-a[h][d].annotateEndPosY)/(a[h][d].annotateStartPosX-a[h][d].annotateEndPosX),a[h][d].D1B=-a[h][d].D1A*a[h][d].annotateStartPosX+a[h][d].annotateStartPosY,Math.abs(a[h][d].D1A)>=t.zeroValue?a[h][d].D2A=-(1/a[h][d].D1A):a[h][d].D2A=void 0);break;case"Bar":for(d=0;d<e.datasets[h].data.length;d++)a[h][d].xAxisPosY=l.xAxisPosY,a[h][d].yAxisPosX=l.yAxisPosX,a[h][d].valueHop=l.valueHop,a[h][d].barWidth=l.barWidth,a[h][d].additionalSpaceBetweenBars=l.additionalSpaceBetweenBars,a[h][d].nbValueHop=l.nbValueHop,a[h][d].calculatedScale=l.calculatedScale,a[h][d].scaleHop=l.scaleHop,a[h][d].xPosLeft=l.yAxisPosX+Math.ceil(i.chartSpaceScale*t.barValueSpacing)+l.valueHop*d+l.additionalSpaceBetweenBars+l.barWidth*p+Math.ceil(i.chartSpaceScale*t.barDatasetSpacing)*p+Math.ceil(i.chartLineScale*t.barStrokeWidth)*p,a[h][d].xPosRight=a[h][d].xPosLeft+l.barWidth,a[h][d].yPosBottom=l.xAxisPosY-l.zeroY,a[h][d].barHeight=o(t.logarithmic,1*e.datasets[h].data[d],l.calculatedScale,l.scaleHop)-l.zeroY,2==e.datasets[h].axis?(a[h][d].yPosBottom=l.xAxisPosY-l.zeroY2,a[h][d].barHeight=o(t.logarithmic2,1*e.datasets[h].data[d],l.calculatedScale2,l.scaleHop2)-l.zeroY2):(a[h][d].yPosBottom=l.xAxisPosY-l.zeroY,a[h][d].barHeight=o(t.logarithmic,1*e.datasets[h].data[d],l.calculatedScale,l.scaleHop)-l.zeroY),a[h][d].yPosTop=a[h][d].yPosBottom-a[h][d].barHeight+Math.ceil(i.chartLineScale*t.barStrokeWidth)/2,a[h][d].v7=a[h][d].xPosLeft,a[h][d].v8=a[h][d].yPosBottom,a[h][d].v9=a[h][d].xPosRight,a[h][d].v10=a[h][d].yPosTop;p++;break;case"StackedBar":for(d=0;d<e.datasets[h].data.length;d++)a[h][d].xAxisPosY=l.xAxisPosY,a[h][d].yAxisPosX=l.yAxisPosX,a[h][d].valueHop=l.valueHop,a[h][d].barWidth=l.barWidth,a[h][d].additionalSpaceBetweenBars=l.additionalSpaceBetweenBars,a[h][d].nbValueHop=l.nbValueHop,a[h][d].calculatedScale=l.calculatedScale,a[h][d].scaleHop=l.scaleHop,"undefined"==typeof u[d]&&(u[d]=0,S[d]=0,zeroY=o(t.logarithmic,0,l.calculatedScale,l.scaleHop)),"undefined"!=typeof e.datasets[h].data[d]&&(a[h][d].xPosLeft=l.yAxisPosX+Math.ceil(i.chartSpaceScale*t.barValueSpacing)+l.valueHop*d+l.additionalSpaceBetweenBars,1*e.datasets[h].data[d]<0?(a[h][d].botval=S[d],a[h][d].topval=S[d]+1*e.datasets[h].data[d],S[d]=S[d]+1*e.datasets[h].data[d]):(a[h][d].botval=u[d],a[h][d].topval=u[d]+1*e.datasets[h].data[d],u[d]=u[d]+1*e.datasets[h].data[d]),a[h][d].xPosRight=a[h][d].xPosLeft+l.barWidth,a[h][d].botOffset=o(t.logarithmic,a[h][d].botval,l.calculatedScale,l.scaleHop),a[h][d].topOffset=o(t.logarithmic,a[h][d].topval,l.calculatedScale,l.scaleHop),a[h][d].yPosBottom=l.xAxisPosY-a[h][d].botOffset,a[h][d].yPosTop=l.xAxisPosY-a[h][d].topOffset,Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)>0&&(1*e.datasets[h].data[d]<0?(a[h][d].yPosBottom+=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar),S[d]==1*e.datasets[h].data[d]&&(a[h][d].yPosBottom-=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)/2),a[h][d].yPosTop<a[h][d].yPosBottom&&(a[h][d].yPosBottom=a[h][d].yPosTop)):1*e.datasets[h].data[d]>0&&(a[h][d].yPosBottom-=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar),u[d]==1*e.datasets[h].data[d]&&(a[h][d].yPosBottom+=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)/2),a[h][d].yPosTop>a[h][d].yPosBottom&&(a[h][d].yPosBottom=a[h][d].yPosTop))),a[h][d].v7=a[h][d].xPosLeft,a[h][d].v8=a[h][d].yPosBottom,a[h][d].v9=a[h][d].xPosRight,a[h][d].v10=a[h][d].yPosTop);break;case"HorizontalBar":for(d=0;d<e.datasets[h].data.length;d++)a[h][d].xAxisPosY=l.xAxisPosY,a[h][d].yAxisPosX=l.yAxisPosX,a[h][d].valueHop=l.valueHop,a[h][d].barWidth=l.barWidth,a[h][d].additionalSpaceBetweenBars=l.additionalSpaceBetweenBars,a[h][d].nbValueHop=l.nbValueHop,a[h][d].calculatedScale=l.calculatedScale,a[h][d].scaleHop=l.scaleHop,a[h][d].xPosLeft=l.yAxisPosX+l.zeroY,a[h][d].yPosTop=l.xAxisPosY+Math.ceil(i.chartSpaceScale*t.barValueSpacing)-l.scaleHop*(d+1)+l.additionalSpaceBetweenBars+l.barWidth*h+Math.ceil(i.chartSpaceScale*t.barDatasetSpacing)*h+Math.ceil(i.chartLineScale*t.barStrokeWidth)*h,a[h][d].yPosBottom=a[h][d].yPosTop+l.barWidth,a[h][d].barWidth=o(t.logarithmic,1*e.datasets[h].data[d],l.calculatedScale,l.valueHop)-l.zeroY,a[h][d].xPosRight=a[h][d].xPosLeft+a[h][d].barWidth,a[h][d].v7=a[h][d].xPosLeft,a[h][d].v8=a[h][d].yPosBottom,a[h][d].v9=a[h][d].xPosRight,a[h][d].v10=a[h][d].yPosTop;break;case"HorizontalStackedBar":for(d=0;d<e.datasets[h].data.length;d++)a[h][d].xAxisPosY=l.xAxisPosY,a[h][d].yAxisPosX=l.yAxisPosX,a[h][d].valueHop=l.valueHop,a[h][d].barWidth=l.barWidth,a[h][d].additionalSpaceBetweenBars=l.additionalSpaceBetweenBars,a[h][d].nbValueHop=l.nbValueHop,a[h][d].calculatedScale=l.calculatedScale,a[h][d].scaleHop=l.scaleHop,0==h&&(u[d]=0,S[d]=0),"undefined"!=typeof e.datasets[h].data[d]&&(a[h][d].xPosLeft=l.yAxisPosX+Math.ceil(i.chartSpaceScale*t.barValueSpacing)+l.valueHop*d,1*e.datasets[h].data[d]<0?(a[h][d].leftval=S[d],a[h][d].rightval=S[d]+1*e.datasets[h].data[d],S[d]=S[d]+1*e.datasets[h].data[d]):(a[h][d].leftval=u[d],a[h][d].rightval=u[d]+1*e.datasets[h].data[d],u[d]=u[d]+1*e.datasets[h].data[d]),a[h][d].rightOffset=s(a[h][d].rightval,l.calculatedScale,l.valueHop),a[h][d].leftOffset=s(a[h][d].leftval,l.calculatedScale,l.valueHop),a[h][d].xPosRight=l.yAxisPosX+a[h][d].rightOffset,a[h][d].xPosLeft=l.yAxisPosX+a[h][d].leftOffset,a[h][d].yPosTop=l.xAxisPosY+Math.ceil(i.chartSpaceScale*t.barValueSpacing)-l.scaleHop*(d+1)+l.additionalSpaceBetweenBars,a[h][d].yPosBottom=a[h][d].yPosTop+l.barWidth,Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)>0&&(1*e.datasets[h].data[d]<0?(a[h][d].xPosLeft-=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar),S[d]==1*e.datasets[h].data[d]&&(a[h][d].xPosLeft+=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)/2),a[h][d].xPosLeft<a[h][d].xPosRight&&(a[h][d].xPosLeft=a[h][d].xPosRight)):1*e.datasets[h].data[d]>0&&(a[h][d].xPosLeft+=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar),u[d]==1*e.datasets[h].data[d]&&(a[h][d].xPosLeft-=Math.ceil(i.chartSpaceScale*t.spaceBetweenBar)/2),a[h][d].xPosLeft>a[h][d].xPosRight&&(a[h][d].xPosLeft=a[h][d].xPosRight))),a[h][d].v7=a[h][d].xPosLeft,a[h][d].v8=a[h][d].yPosBottom,a[h][d].v9=a[h][d].xPosRight,a[h][d].v10=a[h][d].yPosTop)}}}function isBooleanOptionTrue(a,e){var t;if("undefined"==typeof optionvar){if("function"==typeof e)return!0;if("object"==typeof e){for(t=0;t<e.length;t++)if(e[t])return!0;return!1}return e}if("function"==typeof optionvar)return!0;if("object"==typeof optionvar){for(t=0;t<optionvar.length;t++)if(optionvar[t])return!0;return!1}return optionvar}function setOptionValue(a,e,t,i,l,n,o,s,r,c,h,d){var p;if(1==a)if(0==i.tpdata){if("object"==typeof l.special)for(var u=l.special.length-1;u>=0;u--)if("undefined"!=typeof l.special[u].posi&&"undefined"!=typeof l.special[u].posj&&l.special[u].posi==c&&l.special[u].posj==h&&-1!=c&&-1!=h&&"undefined"!=typeof l.special[u][r])return l.special[u][r]}else if("object"==typeof l[0].special)for(var u=0;u<l[0].special.length;u++)if("undefined"!=typeof l[0].special[u].posi&&l[0].special[u].posi==c&&-1!=c&&"undefined"!=typeof l[0].special[u][r])return l[0].special[u][r];return"undefined"==typeof o?"function"==typeof s?s(t,i,l,n,c,h,d):(p="object"==typeof s?s[Math.min(s.length-1,Math.max(0,c))]:s,1!=e&&(p=Math.ceil(p*e)),p):(p="function"==typeof o?o(t,i,l,n,c,h,d):"object"==typeof o?-1==h?o[Math.min(o.length-1,Math.max(0,c))]:o[Math.min(o.length-1,Math.max(0,h))]:o,1!=e&&(p=Math.ceil(p*e)),p)}function tpdraw(a,e){switch(a.tpchart){case"Bar":case"StackedBar":"Line"==e.type?tp="Line":tp=a.tpchart;break;default:tp=a.tpchart}return tp}function setTextBordersAndBackground(a,e,t,i,l,n,o,s,r,c,h,d,p){var u,S;if("string"!=typeof e){var g=e.toString();u=t*(g.split("\n").length||1),S=a.measureText(g).width}else u=t*(e.split("\n").length||1),S=a.measureText(e).width;var f,x,A;"center"==a.textAlign?(f=-S/2,x=S/2):"left"==a.textAlign?(f=0,x=S):"right"==a.textAlign&&(f=-S,x=0),"top"==a.textBaseline?(A=0,ybottom=u):"center"==a.textBaseline||"middle"==a.textBaseline?(A=-u/2,ybottom=u/2):"bottom"==a.textBaseline&&(A=-u,ybottom=0),a.save(),a.beginPath(),a.translate(i,l),"none"!=d&&(a.save(),a.fillStyle=d,a.fillRect(f-r,ybottom+c,x-f+2*r,A-ybottom-2*c),a.stroke(),a.restore(),a.fillStyle="black"),n&&(a.save(),a.lineWidth=s,a.strokeStyle=o,a.fillStyle=o,a.setLineDash(lineStyleFn(h)),a.rect(f-s/2-r,A-s/2-c,x-f+s+2*r,ybottom-A+s+2*c),a.stroke(),a.setLineDash([]),a.restore()),a.restore()}function calculatePieDrawingSize(a,e,t,i,l){var n=((t.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),o=((t.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);o<=t.zeroValue&&(o=2*Math.PI);var s=(n-o+4*Math.PI)%(2*Math.PI),r=s+o,c=Math.floor((s+t.zeroValue)/(Math.PI/2)%4),h=Math.floor((r-t.zeroValue)/(Math.PI/2)%4),d=[0,0,0,0];if(h>=c)for(var p=c;h>=p;p++)d[p]=1;else{for(var p=c;4>p;p++)d[p]=1;for(var p=0;h>=p;p++)d[p]=1}0==d[0]&&0==d[1]?(midPieY=e.topNotUsableSize+5,doughnutRadius=e.availableHeight-5):0==d[2]&&0==d[3]?(midPieY=e.topNotUsableSize+e.availableHeight,doughnutRadius=e.availableHeight-5):(midPieY=e.topNotUsableSize+e.availableHeight/2,doughnutRadius=e.availableHeight/2-5);var u;if(0==d[0]&&0==d[3]?(midPieX=e.leftNotUsableSize+e.availableWidth-5,doughnutRadius=Math.min(doughnutRadius,e.availableWidth-5),u=e.availableWidth-5):0==d[1]&&0==d[2]?(midPieX=e.leftNotUsableSize+5,doughnutRadius=Math.min(doughnutRadius,e.availableWidth-5),u=e.availableWidth-5):(midPieX=e.leftNotUsableSize+e.availableWidth/2,doughnutRadius=Math.min(doughnutRadius,e.availableWidth/2-5),u=e.availableWidth/2-5),isBooleanOptionTrue(void 0,t.inGraphDataShow)&&3==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",a,i,l,void 0,t.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",0,-1,{nullValue:!0})&&"off-center"==setOptionValue(!0,1,"INGRAPHDATAALIGN",a,i,l,void 0,t.inGraphDataAlign,"inGraphDataAlign",0,-1,{nullValue:!0})&&0==setOptionValue(!0,1,"INGRAPHDATAROTATE",a,i,l,void 0,t.inGraphDataRotate,"inGraphDataRotate",0,-1,{nullValue:!0})){doughnutRadius=doughnutRadius-setOptionValue(!0,a.chartTextScale,"INGRAPHDATAFONTSIZE",a,i,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",0,-1,{nullValue:!0})-setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",a,i,l,void 0,t.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",0,-1,{nullValue:!0})-5;for(var S,p=0;p<i.length;p++)if("undefined"!=typeof i[p].value&&1*i[p].value>=0){a.font=setOptionValue(!0,1,"INGRAPHDATAFONTSTYLE",a,i,l,void 0,t.inGraphDataFontStyle,"inGraphDataFontStyle",p,-1,{nullValue:!0})+" "+setOptionValue(!0,a.chartTextScale,"INGRAPHDATAFONTSIZE",a,i,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",p,-1,{nullValue:!0})+"px "+setOptionValue(!0,1,"INGRAPHDATAFONTFAMILY",a,i,l,void 0,t.inGraphDataFontFamily,"inGraphDataFontFamily",p,-1,{nullValue:!0}),1==setOptionValue(!0,1,"INGRAPHDATAANGLEPOSITION",a,i,l,void 0,t.inGraphDataAnglePosition,"inGraphDataAnglePosition",p,-1,{nullValue:!0})?S=n+setOptionValue(!0,1,"INGRAPHDATAPADDINANGLE",a,i,l,void 0,t.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",p,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue(!0,1,"INGRAPHDATAANGLEPOSITION",a,i,l,void 0,t.inGraphDataAnglePosition,"inGraphDataAnglePosition",p,-1,{nullValue:!0})?S=n-l[p].segmentAngle/2+setOptionValue(!0,1,"INGRAPHDATAPADDINANGLE",a,i,l,void 0,t.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",p,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue(!0,1,"INGRAPHDATAANGLEPOSITION",a,i,l,void 0,t.inGraphDataAnglePosition,"inGraphDataAnglePosition",p,-1,{nullValue:!0})&&(S=n-l[p].segmentAngle+setOptionValue(!0,1,"INGRAPHDATAPADDINANGLE",a,i,l,void 0,t.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",p,-1,{nullValue:!0})*(Math.PI/180)),n-=l[p].segmentAngle;var g=tmplbis(setOptionValue(!0,1,"INGRAPHDATATMPL",a,i,l,void 0,t.inGraphDataTmpl,"inGraphDataTmpl",p,-1,{nullValue:!0}),l[p],t),f=a.measureText(g).width,x=Math.abs((u-f)/Math.cos(S))-setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",a,i,l,void 0,t.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",p,-1,{nullValue:!0})-5;x<doughnutRadius&&(doughnutRadius=x)}}return doughnutRadius*=t.radiusScale,{radius:doughnutRadius,midPieX:midPieX,midPieY:midPieY}}var chartJSLineStyle=[];chartJSLineStyle.solid=[],chartJSLineStyle.dotted=[1,4],chartJSLineStyle.shortDash=[2,1],chartJSLineStyle.dashed=[4,2],chartJSLineStyle.dashSpace=[4,6],chartJSLineStyle.longDashDot=[7,2,1,2],chartJSLineStyle.longDashShortDash=[10,4,4,4],chartJSLineStyle.gradient=[1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,9,9,8,8,7,7,6,6,5,5,4,4,3,3,2,2,1],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var e=Object(this),t=e.length>>>0;if(0===t)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&i!=1/0&&i!=-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=t)return-1;for(var l=i>=0?i:Math.max(t-Math.abs(i),0);t>l;l++)if(l in e&&e[l]===a)return l;return-1});var charJSPersonalDefaultOptions={},charJSPersonalDefaultOptionsLine={},charJSPersonalDefaultOptionsRadar={},charJSPersonalDefaultOptionsPolarArea={},charJSPersonalDefaultOptionsPie={},charJSPersonalDefaultOptionsDoughnut={},charJSPersonalDefaultOptionsBar={},charJSPersonalDefaultOptionsStackedBar={},charJSPersonalDefaultOptionsHorizontalBar={},charJSPersonalDefaultOptionsHorizontalStackedBar={},cachebis={};"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.fillTextMultiLine=function(a,e,t,i,l,n,o,s,r,c,h,d,p,u){var S=(""+a).split("\n");"middle"==i?n&&(t-=(S.length-1)/2*l):"bottom"==i&&n&&(t-=(S.length-1)*l);for(var g=t-l,f=0;f<S.length;f++)this.fillText(S[f],e,t),t+=l;if(o){var x=s.measureTextMultiLine(a,l),A=[],g=[];A.p1=h+e,g.p1=d+t-l;var m=Math.PI/2+c;"left"==s.textAlign&&"top"==i?(A.p1+=l*Math.cos(m),g.p1+=l*Math.sin(m)):"left"==s.textAlign&&"middle"==i?(A.p1+=l/2*Math.cos(m),g.p1+=l/2*Math.sin(m)):"left"==s.textAlign&&"bottom"==i||("center"==s.textAlign&&"top"==i?(A.p1+=l*Math.cos(m)-x.textWidth/2*Math.cos(c),g.p1+=l*Math.sin(m)-x.textWidth/2*Math.sin(c)):"center"==s.textAlign&&"middle"==i?(A.p1+=l/2*Math.cos(m)-x.textWidth/2*Math.cos(c),g.p1+=l/2*Math.sin(m)-x.textWidth/2*Math.sin(c)):"center"==s.textAlign&&"bottom"==i?(A.p1-=x.textWidth/2*Math.cos(c),g.p1-=x.textWidth/2*Math.sin(c)):"right"==s.textAlign&&"top"==i?(A.p1+=l*Math.cos(m)-x.textWidth*Math.cos(c),g.p1+=l*Math.sin(m)-x.textWidth*Math.sin(c)):"right"==s.textAlign&&"middle"==i?(A.p1+=l/2*Math.cos(m)-x.textWidth*Math.cos(c),g.p1+=l/2*Math.sin(m)-x.textWidth*Math.sin(c)):"right"==s.textAlign&&"bottom"==i&&(A.p1-=x.textWidth*Math.cos(c),g.p1-=x.textWidth*Math.sin(c))),A.p2=A.p1+x.textWidth*Math.cos(c),g.p2=g.p1+x.textWidth*Math.sin(c),A.p3=A.p1-l*Math.cos(m),g.p3=g.p1-l*Math.sin(m),A.p4=A.p3+x.textWidth*Math.cos(c),g.p4=g.p3+x.textWidth*Math.sin(c),jsTextMousePos[s.ChartNewId][jsTextMousePos[s.ChartNewId].length]=[r,a,A,g,c,x.textWidth,x.textHeight,p,u]}},CanvasRenderingContext2D.prototype.measureTextMultiLine=function(a,e){for(var t,i=0,l=(""+a).replace(/<BR>/gi,"\n").split("\n"),n=l.length*e,o=0;o<l.length;o++)t=this.measureText(l[o]).width,
t>i&&(i=t);return{textWidth:i,textHeight:1.5*n}},"function"!=typeof CanvasRenderingContext2D.prototype.setLineDash&&(CanvasRenderingContext2D.prototype.setLineDash=function(a){return 0})),cursorDivCreated=!1,initChartJsResize=!1;var jsGraphResize=new Array,container;bw=new checkBrowser,fromLeft=10,fromTop=10,"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var dynamicDisplay=new Array,dynamicDisplayList=new Array,jsGraphAnnotate=new Array,jsTextMousePos=new Array,annotatePrevShow=-1;window.Chart=function(context){function init_and_start(a,e,t){var i;if("undefined"==typeof a.initialWidth&&(a.initialWidth=a.canvas.width),"undefined"==typeof a.chartTextScale&&(a.chartTextScale=t.chartTextScale),"undefined"==typeof a.chartLineScale&&(a.chartLineScale=t.chartLineScale),"undefined"==typeof a.chartSpaceScale&&(a.chartSpaceScale=t.chartSpaceScale),"undefined"==typeof a.firstPass&&(a.firstPass=0,t.responsive&&!t.multiGraph))return addResponsiveChart(a.ChartNewId,a,e,t),newSize=resizeGraph(a,t),resizeCtx(a,newSize.newWidth,newSize.newHeight,t),a.prevWidth=newSize.newWidth,a.prevHeight=newSize.newHeight,redrawGraph(a,e,t),!1;if(t.responsive&&!t.multiGraph&&(newSize=resizeGraph(a,t),resizeCtx(a,newSize.newWidth,newSize.newHeight,t),a.prevWidth=newSize.newWidth,a.prevHeight=newSize.newHeight),"undefined"==typeof a.ChartNewId){a.runanimationcompletefunction=!0;var l=new Date,n=l.getTime();a.ChartNewId=a.tpchart+"_"+n,a._eventListeners={}}if(!dynamicFunction(e,t,a))return!1;switch(t.multiGraph||0==a.firstPass||clearAnnotate(a.ChartNewId),"undefined"==typeof jsGraphAnnotate[a.ChartNewId]&&(jsGraphAnnotate[a.ChartNewId]=new Array,jsTextMousePos[a.ChartNewId]=new Array),a.tpdata){case 1:for(i=0;i<e.length;i++)"undefined"==typeof e[i].title&&"undefined"!=typeof e[i].label&&(e[i].title=e[i].label);break;case 0:default:for(i=0;i<e.datasets.length;i++)"undefined"==typeof e.datasets[i].title&&"undefined"!=typeof e.datasets[i].label&&(e.datasets[i].title=e.datasets[i].label)}return(0==t.contextMenu||"function"==typeof t.mouseDownRight)&&(a.canvas.oncontextmenu=function(a){a.preventDefault()}),1!=a.defmouse&&defMouse(a,e,t),a.defmouse=!0,setRect(a,t),0==a.firstPass&&(t.animation?a.firstPass=1:a.firstPass=2),!0}function reverseData(a){a.labels=a.labels.reverse();for(var e=0;e<a.datasets.length;e++)for(var t in a.datasets[e])Array.isArray(a.datasets[e][t])&&(a.datasets[e][t]=a.datasets[e][t].reverse());return a}function calculateOffset(a,e,t,i){if(a)return CapValue(log10(e)*i-log10(t.graphMin)*i,void 0,0);var l=t.steps*t.stepValue,n=e-t.graphMin,o=CapValue(n/l,1,0);return i*t.steps*o}function animationLoop(a,e,t,i,l,n,o,s,r,c,h,d,p,u){function S(){var S=a.animation?CapValue(M(P),null,0):1;1*f>=1*CapValue(a.animationSteps,Number.MAX_VALUE,1)||0==a.animation||i.firstPass%10!=1?S=1:S>=1&&(S=.9999),!a.animation||isIE()<9&&0!=isIE()||!a.clearRect||i.clearRect(l,n,o,s),dispCrossImage(i,a,r,c,h,d,!1,p,S,f),dispCrossText(i,a,r,c,h,d,!1,p,S,f),"function"==typeof a.beforeDrawFunction&&a.beforeDrawFunction("BEFOREDRAWFUNCTION",i,p,u,-1,-1,{animationValue:S,cntiter:f,config:a,borderX:h,borderY:d,midPosX:r,midPosY:c}),a.scaleOverlay?(t(S),"function"==typeof a.endDrawDataFunction&&a.endDrawDataFunction("ENDDATAFUNCTION",i,p,u,-1,-1,{animationValue:S,cntiter:f,config:a,borderX:h,borderY:d,midPosX:r,midPosY:c}),e(),"function"==typeof a.endDrawScaleFunction&&a.endDrawScaleFunction("ENDSCALEFUNCTION",i,p,u,-1,-1,{animationValue:S,cntiter:f,config:a,borderX:h,borderY:d,midPosX:r,midPosY:c})):(e(),"function"==typeof a.endDrawScaleFunction&&a.endDrawScaleFunction("ENDSCALEFUNCTION",i,p,u,-1,-1,{animationValue:S,cntiter:f,config:a,borderX:h,borderY:d,midPosX:r,midPosY:c}),t(S),"function"==typeof a.endDrawDataFunction&&a.endDrawDataFunction("ENDDATAFUNCTION",i,p,u,-1,-1,{animationValue:S,cntiter:f,config:a,borderX:h,borderY:d,midPosX:r,midPosY:c})),dispCrossImage(i,a,r,c,h,d,!0,p,S,f),dispCrossText(i,a,r,c,h,d,!0,p,S,f)}function g(){f+=A,P+=A*m,f==a.animationSteps||0==a.animation||i.firstPass%10!=1?P=1:P>=1&&(P=.999),S(),-1==A&&T>=f?("function"==typeof a.onAnimationComplete&&1==i.runanimationcompletefunction&&a.onAnimationComplete(i,a,p,0,x+1),A=1,a.animationForceSetTimeOut?requestAnimFrameSetTimeOut(g):requestAnimFrame(g)):P<a.animationStopValue?a.animationForceSetTimeOut?requestAnimFrameSetTimeOut(g):requestAnimFrame(g):(x<a.animationCount||0==a.animationCount)&&i.firstPass%10==1?(x++,a.animationBackward&&1==A?(P-=m,A=-1):(A=1,f=T-1,P=v-m),window.setTimeout(g,1e3*a.animationPauseTime)):(testRedraw(i,p,a)||"function"==typeof a.onAnimationComplete&&1==i.runanimationcompletefunction&&(a.onAnimationComplete(i,a,p,1,x+1),i.runanimationcompletefunction=!1),i.firstPass=9)}var f=0,x=1,A=1;(a.animationStartValue<0||a.animationStartValue>1)&&(a.animation.StartValue=0),(a.animationStopValue<0||a.animationStopValue>1)&&(a.animation.StopValue=1),a.animationStopValue<a.animationStartValue&&(a.animationStopValue=a.animationStartValue),isIE()<9&&0!=isIE()&&(a.animation=!1);var m=a.animation?1/CapValue(a.animationSteps,Number.MAX_VALUE,1):1,M=animationOptions[a.animationEasing],P=a.animation?0:1;if(a.animation&&a.animationStartValue>0&&a.animationStartValue<=1)for(;P<a.animationStartValue;)f++,P+=m;var T=f,v=P;"function"!=typeof e&&(e=function(){}),a.clearRect?a.animationForceSetTimeOut?requestAnimFrameSetTimeOut(g):requestAnimFrame(g):g()}function calculateScale(a,e,t,i,l,n,o){var s,r,c,h,d,p,u,S,g;if(2==a?(S=e.logarithmic2,g=e.yAxisMinimumInterval2):(S=e.logarithmic,g=e.yAxisMinimumInterval),S){n==l&&(l+=1),0==n&&(n=.01);var f=calculateOrderOfMagnitude(n),x=calculateOrderOfMagnitude(l)+1;s=Math.pow(10,f),r=Math.pow(10,x),u=x-f}else if(p=l-n,u=calculateOrderOfMagnitude(p),s=Math.abs(n)>e.zeroValue?Math.floor(n/(1*Math.pow(10,u)))*Math.pow(10,u):0,r=Math.abs(l)>e.zeroValue?Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u):0,"number"==typeof g&&r>=0){for(s-=s%g;s>n;)s-=g;for(r%g>e.zeroValue&&r%g<g-e.zeroValue&&(r=roundScale(e,(1+Math.floor(r/g))*g));l>r;)r+=g}if(c=r-s,h=Math.pow(10,u),d=Math.round(c/h),S)d=u;else{for(var A=!1;!A&&(i>d||d>t);)i>d?("number"==typeof g&&g>h/2&&(A=!0,h=g,d=Math.ceil(c/h)),A||(h/=2,d=Math.round(c/h))):(h*=2,d=Math.round(c/h));if("number"==typeof g&&(g>h&&(h=g,d=Math.ceil(c/h)),h%g>e.zeroValue&&h%g<g-e.zeroValue&&(2*h%g<e.zeroValue||2*h%g>g-e.zeroValue?(h=2*h,d=Math.ceil(c/h)):(h=roundScale(e,(1+Math.floor(h/g))*g),d=Math.ceil(c/h)))),1==e.graphMaximized||"bottom"==e.graphMaximized||"undefined"!=typeof e.graphMin)for(;n>s+h&&d>=3;)s+=h,d--;if(1==e.graphMaximized||"top"==e.graphMaximized||"undefined"!=typeof e.graphMax)for(;s+(d-1)*h>=l&&d>=3;)d--}var m=[];return populateLabels(1,e,o,m,d,s,r,h),{steps:d,stepValue:h,graphMin:s,labels:m,maxValue:l}}function roundScale(a,e){var t=0,i=""+a.yAxisMinimumInterval;return i.indexOf(".")>0&&(t=i.substr(i.indexOf(".")).length),Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function calculateOrderOfMagnitude(a){return 0==a?0:Math.floor(Math.log(a)/Math.LN10)}function populateLabels(a,e,t,i,l,n,o,s){var r;if(2==a?(r=e.logarithmic2,fmtYLabel=e.fmtYLabel2):(r=e.logarithmic,fmtYLabel=e.fmtYLabel),t){var c;if(r){var h=n;for(c=0;l+1>c;c++)i.push(tmpl(t,{value:fmtChartJS(e,1*h.toFixed(getDecimalPlaces(h)),fmtYLabel)},e)),h*=10}else for(c=0;l+1>c;c++)i.push(tmpl(t,{value:fmtChartJS(e,1*(n+s*c).toFixed(getDecimalPlaces(s)),fmtYLabel)},e))}}function Max(a){return Math.max.apply(Math,a)}function Min(a){return Math.min.apply(Math,a)}function Default(a,e){return a?a:e}function CapValue(a,e,t){return isNumber(e)&&a>e?e:isNumber(t)&&t>a?t:a}function getDecimalPlaces(a){var e=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}function mergeChartConfig(a,e){var t={};for(var i in a)t[i]=a[i];for(var l in e)t[l]=e[l];return t}function tmpl(a,e,t){return newstr=a,newstr.substr(0,t.templatesOpenTag.length)==t.templatesOpenTag&&(newstr="<%="+newstr.substr(t.templatesOpenTag.length,newstr.length-t.templatesOpenTag.length)),newstr.substr(newstr.length-t.templatesCloseTag.length,t.templatesCloseTag.length)==t.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-t.templatesCloseTag.length)+"%>"),tmplpart2(newstr,e)}function tmplpart2(a,e){var t=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[a]=cache[a]||tmplpart2(document.getElementById(a).innerHTML);return e?t(e):t}function dispCrossText(a,e,t,i,l,n,o,s,r,c){var h,d,p,u,S,g;for(h=0;h<e.crossText.length;h++)if(""!=e.crossText[h]&&e.crossTextOverlay[Min([h,e.crossTextOverlay.length-1])]==o&&(1==c&&"first"==e.crossTextIter[Min([h,e.crossTextIter.length-1])]||e.crossTextIter[Min([h,e.crossTextIter.length-1])]==c||"all"==e.crossTextIter[Min([h,e.crossTextIter.length-1])]||1==r&&"last"==e.crossTextIter[Min([h,e.crossTextIter.length-1])])){switch(a.save(),a.beginPath(),a.font=e.crossTextFontStyle[Min([h,e.crossTextFontStyle.length-1])]+" "+Math.ceil(a.chartTextScale*e.crossTextFontSize[Min([h,e.crossTextFontSize.length-1])]).toString()+"px "+e.crossTextFontFamily[Min([h,e.crossTextFontFamily.length-1])],a.fillStyle=e.crossTextFontColor[Min([h,e.crossTextFontColor.length-1])],S=e.crossTextAlign[Min([h,e.crossTextAlign.length-1])],g=e.crossTextBaseline[Min([h,e.crossTextBaseline.length-1])],p=1*Math.ceil(a.chartSpaceScale*e.crossTextPosX[Min([h,e.crossTextPosX.length-1])]),u=1*Math.ceil(a.chartSpaceScale*e.crossTextPosY[Min([h,e.crossTextPosY.length-1])]),1*e.crossTextRelativePosX[Min([h,e.crossTextRelativePosX.length-1])]){case 0:"default"==S&&(S="left");break;case 1:p+=l,"default"==S&&(S="right");break;case 2:p+=t,"default"==S&&(S="center");break;case-2:p+=context.canvas.width/2,"default"==S&&(S="center");break;case 3:p+=p+2*t-l,"default"==S&&(S="left");break;case 4:p+=context.canvas.width,"default"==S&&(S="right");break;default:p+=t,"default"==S&&(S="center")}switch(1*e.crossTextRelativePosY[Min([h,e.crossTextRelativePosY.length-1])]){case 0:"default"==g&&(g="top");break;case 3:u+=n,"default"==g&&(g="top");break;case 2:u+=i,"default"==g&&(g="middle");break;case-2:u+=context.canvas.height/2,"default"==g&&(g="middle");break;case 1:u+=u+2*i-n,"default"==g&&(g="bottom");break;case 4:u+=context.canvas.height,"default"==g&&(g="bottom");break;default:u+=i,"default"==g&&(g="middle")}a.textAlign=S,a.textBaseline=g,a.translate(1*p,1*u);var f=Math.PI*e.crossTextAngle[Min([h,e.crossTextAngle.length-1])]/180;a.rotate(f),"%"==e.crossText[h].substring(0,1)?"function"==typeof e.crossTextFunction&&(d=e.crossTextFunction(h,e.crossText[h],a,e,t,i,l,n,o,s,r)):d=e.crossText[h],setTextBordersAndBackground(a,d,Math.ceil(a.chartTextScale*e.crossTextFontSize[Min([h,e.crossTextFontSize.length-1])]),0,0,e.crossTextBorders[Min([h,e.crossTextBorders.length-1])],e.crossTextBordersColor[Min([h,e.crossTextBordersColor.length-1])],Math.ceil(a.chartLineScale*e.crossTextBordersWidth[Min([h,e.crossTextBordersWidth.length-1])]),Math.ceil(a.chartSpaceScale*e.crossTextBordersXSpace[Min([h,e.crossTextBordersXSpace.length-1])]),Math.ceil(a.chartSpaceScale*e.crossTextBordersYSpace[Min([h,e.crossTextBordersYSpace.length-1])]),e.crossTextBordersStyle[Min([h,e.crossTextBordersStyle.length-1])],e.crossTextBackgroundColor[Min([h,e.crossTextBackgroundColor.length-1])],"CROSSTEXT"),1==r&&"all"==e.crossTextIter[Min([h,e.crossTextIter.length-1])]||"last"!=e.crossTextIter[Min([h,e.crossTextIter.length-1])]?a.fillTextMultiLine(d,0,0,a.textBaseline,Math.ceil(a.chartTextScale*e.crossTextFontSize[Min([h,e.crossTextFontSize.length-1])]),!0,e.detectMouseOnText,a,"CROSSTEXT_TEXTMOUSE",f,1*p,1*u,h,-1):a.fillTextMultiLine(d,0,0,a.textBaseline,Math.ceil(a.chartTextScale*e.crossTextFontSize[Min([h,e.crossTextFontSize.length-1])]),!0,!1,a,"CROSSTEXT_TEXTMOUSE",f,1*p,1*u,h,-1),a.restore()}}function dispCrossImage(a,e,t,i,l,n,o,s,r,c){var h,d,p,u,S;for(h=0;h<e.crossImage.length;h++)if("undefined"!=typeof e.crossImage[h]&&e.crossImageOverlay[Min([h,e.crossImageOverlay.length-1])]==o&&(-1==c&&"background"==e.crossImageIter[Min([h,e.crossImageIter.length-1])]||1==c&&"first"==e.crossImageIter[Min([h,e.crossImageIter.length-1])]||e.crossImageIter[Min([h,e.crossImageIter.length-1])]==c||-1!=c&&"all"==e.crossImageIter[Min([h,e.crossImageIter.length-1])]||1==r&&"last"==e.crossImageIter[Min([h,e.crossImageIter.length-1])])){switch(a.save(),a.beginPath(),u=e.crossImageAlign[Min([h,e.crossImageAlign.length-1])],S=e.crossImageBaseline[Min([h,e.crossImageBaseline.length-1])],d=1*Math.ceil(a.chartSpaceScale*e.crossImagePosX[Min([h,e.crossImagePosX.length-1])]),p=1*Math.ceil(a.chartSpaceScale*e.crossImagePosY[Min([h,e.crossImagePosY.length-1])]),1*e.crossImageRelativePosX[Min([h,e.crossImageRelativePosX.length-1])]){case 0:"default"==u&&(u="left");break;case 1:d+=l,"default"==u&&(u="right");break;case 2:d+=t,"default"==u&&(u="center");break;case-2:d+=context.canvas.width/2,"default"==u&&(u="center");break;case 3:d+=d+2*t-l,"default"==u&&(u="left");break;case 4:d+=context.canvas.width,"default"==u&&(u="right");break;default:d+=t,"default"==u&&(u="center")}switch(1*e.crossImageRelativePosY[Min([h,e.crossImageRelativePosY.length-1])]){case 0:"default"==S&&(S="top");break;case 3:p+=n,"default"==S&&(S="top");break;case 2:p+=i,"default"==S&&(S="middle");break;case-2:p+=context.canvas.height/2,"default"==S&&(S="middle");break;case 1:p+=p+2*i-n,"default"==S&&(S="bottom");break;case 4:p+=context.canvas.height,"default"==S&&(S="bottom");break;default:p+=i,"default"==S&&(S="middle")}var g=e.crossImage[h].width;switch(u){case"left":break;case"right":d-=g;break;case"center":d-=g/2}var f=e.crossImage[h].height;switch(S){case"top":break;case"bottom":p-=f;break;case"middle":p-=f/2}a.translate(1*d,1*p),a.rotate(Math.PI*e.crossImageAngle[Min([h,e.crossImageAngle.length-1])]/180),a.drawImage(e.crossImage[h],0,0),a.restore()}}function setMeasures(a,e,t,i,l,n,o,s,r,c,h,d,p){var u=i,S=l;window.devicePixelRatio&&0==e.responsive&&(u/=window.devicePixelRatio,S/=window.devicePixelRatio),"none"!=e.canvasBackgroundColor&&(t.canvas.style.background=e.canvasBackgroundColor);var g=0,f=0,x=0,A=0,m=0,M=0,P=0,T=0,v=0,D=0,L=0,y=0,V=0,b=0,G=0,O=0,I=0,B=0,R=0,N=0,w=0,C=0,H=0,F=0,k=1,E=1,z=0,W=1,Y=0,X=1,U=0,_=0,j=0,J=0,K=0,Z=0;t.widthAtSetMeasures=S,t.heightAtSetMeasures=u,e.canvasBorders&&(g=Math.ceil(t.chartLineScale*e.canvasBordersWidth));var q,Q;if(c){for(t.font=e.scaleFontStyle+" "+Math.ceil(t.chartTextScale*e.scaleFontSize).toString()+"px "+e.scaleFontFamily,Q=0;Q<a.labels.length;Q++)showLabels(t,a,e,Q)===!0&&(q=t.measureTextMultiLine(fmtChartJS(e,a.labels[Q],e.fmtXLabel),Math.ceil(t.chartTextScale*e.scaleFontSize)),k=q.textWidth>k?q.textWidth:k,E=q.textHeight>E?q.textHeight:E);k<Math.ceil(t.chartTextScale*e.xScaleLabelsMinimumWidth)&&(k=Math.ceil(t.chartTextScale*e.xScaleLabelsMinimumWidth))}if(c){if(z=1,null!=n&&"nihil"!=n)for(t.font=e.scaleFontStyle+" "+Math.ceil(t.chartTextScale*e.scaleFontSize).toString()+"px "+e.scaleFontFamily,Q=n.length-1;Q>=0;Q--)"string"==typeof n[Q]&&showYLabels(t,a,e,Q,n[Q])&&""!=n[Q].trim()&&(q=t.measureTextMultiLine(fmtChartJS(e,n[Q],e.fmtYLabel),Math.ceil(t.chartTextScale*e.scaleFontSize)),z=q.textWidth>z?q.textWidth:z,W=q.textHeight>W?q.textHeight:W);if(z<Math.ceil(t.chartTextScale*e.yScaleLabelsMinimumWidth)&&(z=Math.ceil(t.chartTextScale*e.yScaleLabelsMinimumWidth)),Y=1,null!=o&&e.yAxisRight)for(t.font=e.scaleFontStyle+" "+Math.ceil(t.chartTextScale*e.scaleFontSize).toString()+"px "+e.scaleFontFamily,Q=o.length-1;Q>=0;Q--)"string"==typeof o[Q]&&""!=o[Q].trim()&&(q=t.measureTextMultiLine(fmtChartJS(e,o[Q],e.fmtYLabel2),Math.ceil(t.chartTextScale*e.scaleFontSize)),Y=q.textWidth>Y?q.textWidth:Y,X=q.textHeight>X?q.textHeight:X);else Y=z;Y<Math.ceil(t.chartTextScale*e.yScaleLabelsMinimumWidth)&&(Y=Math.ceil(t.chartTextScale*e.yScaleLabelsMinimumWidth))}if(U=g+Math.ceil(t.chartSpaceScale*e.spaceLeft),_=g+Math.ceil(t.chartSpaceScale*e.spaceRight),c&&("undefined"!=typeof e.yAxisLabel&&(""!=e.yAxisLabel.trim()&&(N=Math.ceil(t.chartTextScale*e.yAxisFontSize)*(e.yAxisLabel.split("\n").length||1)+Math.ceil(t.chartSpaceScale*e.yAxisLabelSpaceLeft)+Math.ceil(t.chartSpaceScale*e.yAxisLabelSpaceRight),w=g+Math.ceil(t.chartSpaceScale*e.spaceLeft)+Math.ceil(t.chartSpaceScale*e.yAxisLabelSpaceLeft)+Math.ceil(t.chartTextScale*e.yAxisFontSize),C=S-g-Math.ceil(t.chartSpaceScale*e.spaceRight)-Math.ceil(t.chartSpaceScale*e.yAxisLabelSpaceLeft)-Math.ceil(t.chartTextScale*e.yAxisFontSize)),("none"!=e.yAxisLabelBackgroundColor||e.yAxisLabelBorders)&&(N+=2*Math.ceil(t.chartSpaceScale*e.yAxisLabelBordersYSpace),w+=Math.ceil(t.chartSpaceScale*e.yAxisLabelBordersYSpace),C-=Math.ceil(t.chartSpaceScale*e.yAxisLabelBordersYSpace)),e.graphTitleBorders&&(N+=2*Math.ceil(t.chartLineScale*e.yAxisLabelBordersWidth),w+=Math.ceil(t.chartLineScale*e.yAxisLabelBordersWidth),C-=Math.ceil(t.chartLineScale*e.yAxisLabelBordersWidth))),e.yAxisLeft&&(U=0==r?g+Math.ceil(t.chartSpaceScale*e.spaceLeft)+N+z+Math.ceil(t.chartSpaceScale*e.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight):g+Math.ceil(t.chartSpaceScale*e.spaceLeft)+N+k+Math.ceil(t.chartSpaceScale*e.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight)),e.yAxisRight&&(_=0==r?g+Math.ceil(t.chartSpaceScale*e.spaceRight)+N+Y+Math.ceil(t.chartSpaceScale*e.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight):g+Math.ceil(t.chartSpaceScale*e.spaceRight)+N+k+Math.ceil(t.chartSpaceScale*e.yAxisSpaceLeft)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight))),availableWidth=S-U-_,""!=e.graphTitle.trim()&&(x=Math.ceil(t.chartTextScale*e.graphTitleFontSize)*(e.graphTitle.split("\n").length||1)+Math.ceil(t.chartSpaceScale*e.graphTitleSpaceBefore)+Math.ceil(t.chartSpaceScale*e.graphTitleSpaceAfter),A=g+Math.ceil(t.chartSpaceScale*e.spaceTop)+x-Math.ceil(t.chartSpaceScale*e.graphTitleSpaceAfter),("none"!=e.graphTitleBackgroundColor||e.graphTitleBorders)&&(x+=2*Math.ceil(t.chartSpaceScale*e.graphTitleBordersYSpace),A+=Math.ceil(t.chartSpaceScale*e.graphTitleBordersYSpace)),e.graphTitleBorders&&(x+=2*Math.ceil(t.chartLineScale*e.graphTitleBordersWidth),A+=Math.ceil(t.chartLineScale*e.graphTitleBordersWidth))),""!=e.graphSubTitle.trim()&&(m=Math.ceil(t.chartTextScale*e.graphSubTitleFontSize)*(e.graphSubTitle.split("\n").length||1)+Math.ceil(t.chartSpaceScale*e.graphSubTitleSpaceBefore)+Math.ceil(t.chartSpaceScale*e.graphSubTitleSpaceAfter),M=g+Math.ceil(t.chartSpaceScale*e.spaceTop)+x+m-Math.ceil(t.chartSpaceScale*e.graphSubTitleSpaceAfter),("none"!=e.graphSubTitleBackgroundColor||e.graphSubTitleBorders)&&(m+=2*Math.ceil(t.chartSpaceScale*e.graphSubTitleBordersYSpace),M+=Math.ceil(t.chartSpaceScale*e.graphSubTitleBordersYSpace)),e.graphSubTitleBorders&&(m+=2*Math.ceil(t.chartLineScale*e.graphSubTitleBordersWidth),M+=Math.ceil(t.chartLineScale*e.graphSubTitleBordersWidth))),c&&(""!=e.yAxisUnit.trim()&&(v=Math.ceil(t.chartTextScale*e.yAxisUnitFontSize)*(e.yAxisUnit.split("\n").length||1)+Math.ceil(t.chartSpaceScale*e.yAxisUnitSpaceBefore)+Math.ceil(t.chartSpaceScale*e.yAxisUnitSpaceAfter),D=g+Math.ceil(t.chartSpaceScale*e.spaceTop)+x+m+v-Math.ceil(t.chartSpaceScale*e.yAxisUnitSpaceAfter)),("none"!=e.yAxisUnitBackgroundColor||e.yAxisUnitBorders)&&(v+=2*Math.ceil(t.chartSpaceScale*e.yAxisUnitBordersYSpace),D+=Math.ceil(t.chartSpaceScale*e.yAxisUnitBordersYSpace)),e.yAxisUnitBorders&&(v+=2*Math.ceil(t.chartLineScale*e.yAxisUnitBordersWidth),D+=Math.ceil(t.chartLineScale*e.yAxisUnitBordersWidth))),topNotUsableSize=g+Math.ceil(t.chartSpaceScale*e.spaceTop)+x+m+v+Math.ceil(t.chartTextScale*e.graphSpaceBefore),"undefined"!=typeof e.footNote&&""!=e.footNote.trim()&&(P=Math.ceil(t.chartTextScale*e.footNoteFontSize)*(e.footNote.split("\n").length||1)+Math.ceil(t.chartSpaceScale*e.footNoteSpaceBefore)+Math.ceil(t.chartSpaceScale*e.footNoteSpaceAfter),T=u-Math.ceil(t.chartSpaceScale*e.spaceBottom)-g-Math.ceil(t.chartSpaceScale*e.footNoteSpaceAfter),("none"!=e.footNoteBackgroundColor||e.footNoteBorders)&&(P+=2*Math.ceil(t.chartSpaceScale*e.footNoteBordersYSpace),T-=Math.ceil(t.chartSpaceScale*e.footNoteBordersYSpace)),e.footNoteBorders&&(P+=2*Math.ceil(t.chartLineScale*e.footNoteBordersWidth),T-=Math.ceil(t.chartLineScale*e.footNoteBordersWidth))),c&&"undefined"!=typeof e.xAxisLabel&&""!=e.xAxisLabel.trim()&&(H=Math.ceil(t.chartTextScale*e.xAxisFontSize)*(e.xAxisLabel.split("\n").length||1)+Math.ceil(t.chartSpaceScale*e.xAxisLabelSpaceBefore)+Math.ceil(t.chartSpaceScale*e.xAxisLabelSpaceAfter),f=u-g-Math.ceil(t.chartSpaceScale*e.spaceBottom)-P-Math.ceil(t.chartSpaceScale*e.xAxisLabelSpaceAfter),("none"!=e.xAxisLabelBackgroundColor||e.footNoteBorders)&&(H+=2*Math.ceil(t.chartSpaceScale*e.xAxisLabelBordersYSpace),f-=Math.ceil(t.chartSpaceScale*e.xAxisLabelBordersYSpace)),e.footNoteBorders&&(H+=2*Math.ceil(t.chartLineScale*e.xAxisLabelBordersWidth),f-=Math.ceil(t.chartLineScale*e.xAxisLabelBordersWidth))),bottomNotUsableHeightWithoutXLabels=g+Math.ceil(t.chartSpaceScale*e.spaceBottom)+P+H+Math.ceil(t.chartTextScale*e.graphSpaceAfter),"undefined"!=typeof e.legend&&1==e.legend){t.font=e.legendFontStyle+" "+Math.ceil(t.chartTextScale*e.legendFontSize).toString()+"px "+e.legendFontFamily;var $;if(h)for(Q=a.datasets.length-1;Q>=0;Q--)"string"==typeof a.datasets[Q].title&&""!=a.datasets[Q].title.trim()&&(y++,$=t.measureText(fmtChartJS(e,a.datasets[Q].title,e.fmtLegend)).width,L=$>L?$:L);else for(Q=a.length-1;Q>=0;Q--)"string"==typeof a[Q].title&&""!=a[Q].title.trim()&&(y++,$=t.measureText(fmtChartJS(e,a[Q].title,e.fmtLegend)).width,L=$>L?$:L);if(y>1||1==y&&e.showSingleLegend){L+=Math.ceil(t.chartTextScale*e.legendBlockSize)+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenBoxAndText),1==e.legendPosY||2==e.legendPosY||3==e.legendPosY?availableLegendWidth=availableWidth-Math.ceil(t.chartSpaceScale*Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText))-Math.ceil(t.chartSpaceScale*e.legendSpaceRightText):availableLegendWidth=S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight)-2*g-Math.ceil(t.chartSpaceScale*Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText))-Math.ceil(t.chartSpaceScale*e.legendSpaceRightText),1==e.legendBorders&&(availableLegendWidth-=2*Math.ceil(t.chartLineScale*e.legendBordersWidth)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceLeft)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceRight)),maxLegendOnLine=Min([Math.floor((availableLegendWidth+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))/(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))),e.maxLegendCols]),V=Math.ceil(y/maxLegendOnLine),b=Math.ceil(y/V);var aa=V*(Math.ceil(t.chartTextScale*e.legendFontSize)+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextVertical))-Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextVertical)+Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)+Math.ceil(t.chartSpaceScale*e.legendSpaceAfterText);switch(e.legendPosY){case 0:O=Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight)-b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))/2,G=aa,1==e.legendBorders?(R=topNotUsableSize+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)+Math.ceil(t.chartLineScale*e.legendBordersWidth)/2,I=R+Math.ceil(t.chartLineScale*e.legendBordersWidth)/2+Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)+Math.ceil(t.chartTextScale*e.legendFontSize),G+=2*Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),B=Math.floor(O-Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2),Z=Math.ceil(G-Math.ceil(t.chartLineScale*e.legendBordersWidth))-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),K=Math.ceil(b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)))-Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)+Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendSpaceRightText)+Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)):I=topNotUsableSize+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)+Math.ceil(t.chartLineScale*e.legendBordersWidth)/2,v>0&&(D+=G,1==e.legendBorders&&(R-=v),I-=v),topNotUsableSize+=G;break;case 1:G=aa,O=Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight)-b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))/2,I=topNotUsableSize+Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)+Math.ceil(t.chartTextScale*e.legendFontSize),1==e.legendBorders&&(I+=Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)+Math.ceil(t.chartLineScale*e.legendBordersWidth),R=I-Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)-Math.ceil(t.chartTextScale*e.legendFontSize)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2,G+=2*Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),B=Math.floor(O-Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2),Z=Math.ceil(G-Math.ceil(t.chartLineScale*e.legendBordersWidth))-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),K=Math.ceil(b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)))-Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)+Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendSpaceRightText)+Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText));break;case 2:G=aa,O=Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight)-b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))/2,I=topNotUsableSize+(u-topNotUsableSize-bottomNotUsableHeightWithoutXLabels-G)/2+Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)+Math.ceil(t.chartTextScale*e.legendFontSize),1==e.legendBorders&&(I+=Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),R=I-Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)-Math.ceil(t.chartTextScale*e.legendFontSize)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2,G+=2*Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),B=Math.floor(O-Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2),Z=Math.ceil(G-Math.ceil(t.chartLineScale*e.legendBordersWidth))-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),K=Math.ceil(b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)))-Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)+Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendSpaceRightText)+Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText));break;case-2:G=aa,O=Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight)-b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))/2,I=(u-G)/2+Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)+Math.ceil(t.chartTextScale*e.legendFontSize),1==e.legendBorders&&(I+=Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),R=I-Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)-Math.ceil(t.chartTextScale*e.legendFontSize)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2,G+=2*Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),B=Math.floor(O-Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2),Z=Math.ceil(G-Math.ceil(t.chartLineScale*e.legendBordersWidth))-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),K=Math.ceil(b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)))-Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)+Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendSpaceRightText)+Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText));break;case 3:G=aa,O=Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight)-b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))/2,availableHeight=u-topNotUsableSize-bottomNotUsableHeightWithoutXLabels,I=topNotUsableSize+availableHeight-G+Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)+Math.ceil(t.chartTextScale*e.legendFontSize),1==e.legendBorders&&(I-=Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter)+Math.ceil(t.chartLineScale*e.legendBordersWidth),R=I-Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)-Math.ceil(t.chartTextScale*e.legendFontSize)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2,G+=2*Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),B=Math.floor(O-Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2),Z=Math.ceil(G-Math.ceil(t.chartLineScale*e.legendBordersWidth))-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),K=Math.ceil(b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)))-Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)+Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendSpaceRightText)+Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText));break;default:G=aa,I=u-g-Math.ceil(t.chartSpaceScale*e.spaceBottom)-P-G+Math.ceil(t.chartSpaceScale*e.legendSpaceBeforeText)+Math.ceil(t.chartTextScale*e.legendFontSize),O=Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight)-b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))/2,1==e.legendBorders&&(G+=2*Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),I-=Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),R=Math.floor(u-g-Math.ceil(t.chartSpaceScale*e.spaceBottom)-P-G+Math.ceil(t.chartLineScale*e.legendBordersWidth)/2+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)),B=Math.floor(O-Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2),Z=Math.ceil(G-Math.ceil(t.chartLineScale*e.legendBordersWidth))-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceBefore)-Math.ceil(t.chartSpaceScale*e.legendBordersSpaceAfter),K=Math.ceil(b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)))-Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)+Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendSpaceRightText)+Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)),
f-=G,bottomNotUsableHeightWithoutXLabels+=G}var ea=Math.ceil(t.chartSpaceScale*e.legendSpaceRightText)+b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))-Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)+Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText);switch(1==e.legendBorders&&(ea+=2*Math.ceil(t.chartLineScale*e.legendBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceLeft)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceRight)),e.legendPosX){case 0:case 1:O=Math.ceil(t.chartSpaceScale*e.spaceLeft)+e.canvasBorders*Math.ceil(t.chartLineScale*e.canvasBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText),1==e.legendBorders&&(O+=Math.ceil(t.chartLineScale*e.legendBordersWidth)/2+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceLeft),B=Math.ceil(t.chartSpaceScale*e.spaceLeft)+e.canvasBorders*Math.ceil(t.chartLineScale*e.canvasBordersWidth)+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceLeft)),0==e.legendPosX&&(e.legendPosY>=1&&e.legendPosY<=3||-2==e.legendPosY)&&(U+=ea,w+=ea);break;case 2:O=U+(S-_-U)/2-(Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)-Math.ceil(t.chartSpaceScale*e.legendSpaceRightText))-(b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))-Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))/2,1==e.legendBorders&&(O-=Math.ceil(t.chartLineScale*e.legendBordersWidth)/2+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceRight),B=O-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2-Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText));break;case 3:case 4:O=S-_-Math.ceil(t.chartSpaceScale*e.legendSpaceRightText)-b*(L+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal))+Math.ceil(t.chartSpaceScale*e.legendSpaceBetweenTextHorizontal)/2,1==e.legendBorders&&(O-=Math.ceil(t.chartLineScale*e.legendBordersWidth)/2+Math.ceil(t.chartSpaceScale*e.legendBordersSpaceRight),B=O-Math.ceil(t.chartLineScale*e.legendBordersWidth)/2-Math.ceil(t.chartSpaceScale*e.legendSpaceLeftText)),4==e.legendPosX&&(e.legendPosY>=1&&e.legendPosY<=3||-2==e.legendPosY)&&(_+=ea,C-=ea)}1==e.legendBorders&&(R+=Math.ceil(t.chartSpaceScale*e.legendYPadding),B+=Math.ceil(t.chartSpaceScale*e.legendXPadding)),I+=Math.ceil(t.chartSpaceScale*e.legendYPadding),O+=Math.ceil(t.chartSpaceScale*e.legendXPadding)}}if(xLabelWidth=0,bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels,c&&(e.xAxisBottom||e.xAxisTop)){var ta,ia;0==r?(ta=k,ia=E,nblab=a.labels.length):(ta=z,ia=W,nblab=n.length),"smart"==e.rotateLabels?(j=0,(availableWidth+Math.ceil(t.chartTextScale*e.xAxisSpaceBetweenLabels))/nblab<ta+Math.ceil(t.chartTextScale*e.xAxisSpaceBetweenLabels)&&(j=45,availableWidth/nblab<Math.abs(Math.cos(j*Math.PI/180)*ta)&&(j=90))):(j=e.rotateLabels,0>j&&(j=0),j>180&&(j=180)),j>90&&(j+=180),F=Math.abs(Math.sin(j*Math.PI/180)*ta)+Math.abs(Math.sin((j+90)*Math.PI/180)*ia)+Math.ceil(t.chartSpaceScale*e.xAxisSpaceBefore)+Math.ceil(t.chartSpaceScale*e.xAxisSpaceAfter),J=u-g-Math.ceil(t.chartSpaceScale*e.spaceBottom)-P-H-(F-Math.ceil(t.chartSpaceScale*e.xAxisSpaceBefore))-Math.ceil(t.chartTextScale*e.graphSpaceAfter),xLabelWidth=Math.abs(Math.cos(j*Math.PI/180)*ta)+Math.abs(Math.cos((j+90)*Math.PI/180)*ia),U=Max([U,g+Math.ceil(t.chartSpaceScale*e.spaceLeft)+xLabelWidth/2]),_=Max([_,g+Math.ceil(t.chartSpaceScale*e.spaceRight)+xLabelWidth/2]),availableWidth=S-U-_,e.legend&&e.xAxisBottom&&4==e.legendPosY&&(J-=G),bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels+F}else availableWidth=S-U-_;if(availableHeight=u-topNotUsableSize-bottomNotUsableHeightWithXLabels,dispCrossImage(t,e,S/2,u/2,S/2,u/2,!1,a,-1,-1),"function"==typeof e.initFunction&&e.initFunction("INITFUNCTION",t,a,null,-1,-1,{animationValue:0,cntiter:0,config:e,borderX:0,borderY:0,midPosX:0,midPosY:0}),"nihil"!=n){g>0&&(t.save(),t.beginPath(),t.lineWidth=2*g,t.setLineDash(lineStyleFn(e.canvasBordersStyle)),t.strokeStyle=e.canvasBordersColor,t.moveTo(0,0),t.lineTo(0,u),t.lineTo(S,u),t.lineTo(S,0),t.lineTo(0,0),t.stroke(),t.setLineDash([]),t.restore()),x>0&&(t.save(),t.beginPath(),t.font=e.graphTitleFontStyle+" "+Math.ceil(t.chartTextScale*e.graphTitleFontSize).toString()+"px "+e.graphTitleFontFamily,t.fillStyle=e.graphTitleFontColor,t.textAlign="center",t.textBaseline="bottom",setTextBordersAndBackground(t,e.graphTitle,Math.ceil(t.chartTextScale*e.graphTitleFontSize),Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight))/2,A,e.graphTitleBorders,e.graphTitleBordersColor,Math.ceil(t.chartLineScale*e.graphTitleBordersWidth),Math.ceil(t.chartSpaceScale*e.graphTitleBordersXSpace),Math.ceil(t.chartSpaceScale*e.graphTitleBordersYSpace),e.graphTitleBordersStyle,e.graphTitleBackgroundColor,"GRAPHTITLE"),t.translate(Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight))/2,A),t.fillTextMultiLine(e.graphTitle,0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.graphTitleFontSize),!0,e.detectMouseOnText,t,"TITLE_TEXTMOUSE",0,Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight))/2,A,-1,-1),t.stroke(),t.restore()),m>0&&(t.save(),t.beginPath(),t.font=e.graphSubTitleFontStyle+" "+Math.ceil(t.chartTextScale*e.graphSubTitleFontSize).toString()+"px "+e.graphSubTitleFontFamily,t.fillStyle=e.graphSubTitleFontColor,t.textAlign="center",t.textBaseline="bottom",setTextBordersAndBackground(t,e.graphSubTitle,Math.ceil(t.chartTextScale*e.graphSubTitleFontSize),Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight))/2,M,e.graphSubTitleBorders,e.graphSubTitleBordersColor,Math.ceil(t.chartLineScale*e.graphSubTitleBordersWidth),Math.ceil(t.chartSpaceScale*e.graphSubTitleBordersXSpace),Math.ceil(t.chartSpaceScale*e.graphSubTitleBordersYSpace),e.graphSubTitleBordersStyle,e.graphSubTitleBackgroundColor,"GRAPHSUBTITLE"),t.translate(Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight))/2,M),t.fillTextMultiLine(e.graphSubTitle,0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.graphSubTitleFontSize),!0,e.detectMouseOnText,t,"SUBTITLE_TEXTMOUSE",0,Math.ceil(t.chartSpaceScale*e.spaceLeft)+(S-Math.ceil(t.chartSpaceScale*e.spaceLeft)-Math.ceil(t.chartSpaceScale*e.spaceRight))/2,M,-1,-1),t.stroke(),t.restore()),v>0&&(e.yAxisLeft&&(t.save(),t.beginPath(),t.font=e.yAxisUnitFontStyle+" "+Math.ceil(t.chartTextScale*e.yAxisUnitFontSize).toString()+"px "+e.yAxisUnitFontFamily,t.fillStyle=e.yAxisUnitFontColor,t.textAlign="center",t.textBaseline="bottom",setTextBordersAndBackground(t,e.yAxisUnit,Math.ceil(t.chartTextScale*e.yAxisUnitFontSize),U,D,e.yAxisUnitBorders,e.yAxisUnitBordersColor,Math.ceil(t.chartLineScale*e.yAxisUnitBordersWidth),Math.ceil(t.chartSpaceScale*e.yAxisUnitBordersXSpace),Math.ceil(t.chartSpaceScale*e.yAxisUnitBordersYSpace),e.yAxisUnitBordersStyle,e.yAxisUnitBackgroundColor,"YAXISUNIT"),t.translate(U,D),t.fillTextMultiLine(e.yAxisUnit,0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.yAxisUnitFontSize),!0,e.detectMouseOnText,t,"YLEFTAXISUNIT_TEXTMOUSE",0,U,D,-1,-1),t.stroke(),t.restore()),e.yAxisRight&&(""==e.yAxisUnit2&&(e.yAxisUnit2=e.yAxisUnit),t.save(),t.beginPath(),t.font=e.yAxisUnitFontStyle+" "+Math.ceil(t.chartTextScale*e.yAxisUnitFontSize).toString()+"px "+e.yAxisUnitFontFamily,t.fillStyle=e.yAxisUnitFontColor,t.textAlign="center",t.textBaseline="bottom",setTextBordersAndBackground(t,e.yAxisUnit2,Math.ceil(t.chartTextScale*e.yAxisUnitFontSize),S-_,D,e.yAxisUnitBorders,e.yAxisUnitBordersColor,Math.ceil(t.chartLineScale*e.yAxisUnitBordersWidth),Math.ceil(t.chartSpaceScale*e.yAxisUnitBordersXSpace),Math.ceil(t.chartSpaceScale*e.yAxisUnitBordersYSpace),e.yAxisUnitBordersStyle,e.yAxisUnitBackgroundColor,"YAXISUNIT"),t.translate(S-_,D),t.fillTextMultiLine(e.yAxisUnit2,0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.yAxisUnitFontSize),!0,e.detectMouseOnText,t,"YRIGHTAXISUNIT_TEXTMOUSE",0,S-_,D,-1,-1),t.stroke(),t.restore())),N>0&&(e.yAxisLeft&&(t.save(),t.beginPath(),t.font=e.yAxisFontStyle+" "+Math.ceil(t.chartTextScale*e.yAxisFontSize).toString()+"px "+e.yAxisFontFamily,t.fillStyle=e.yAxisFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(w,topNotUsableSize+availableHeight/2),t.rotate(-(90*(Math.PI/180))),setTextBordersAndBackground(t,e.yAxisLabel,Math.ceil(t.chartTextScale*e.yAxisFontSize),0,0,e.yAxisLabelBorders,e.yAxisLabelBordersColor,Math.ceil(t.chartLineScale*e.yAxisLabelBordersWidth),Math.ceil(t.chartSpaceScale*e.yAxisLabelBordersXSpace),Math.ceil(t.chartSpaceScale*e.yAxisLabelBordersYSpace),e.yAxisLabelBordersStyle,e.yAxisLabelBackgroundColor,"YAXISLABELLEFT"),t.fillTextMultiLine(e.yAxisLabel,0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.yAxisFontSize),!1,e.detectMouseOnText,t,"YLEFTAXISLABEL_TEXTMOUSE",-(90*(Math.PI/180)),w,topNotUsableSize+availableHeight/2,-1,-1),t.stroke(),t.restore()),e.yAxisRight&&(""==e.yAxisLabel2&&(e.yAxisLabel2=e.yAxisLabel),t.save(),t.beginPath(),t.font=e.yAxisFontStyle+" "+Math.ceil(t.chartTextScale*e.yAxisFontSize).toString()+"px "+e.yAxisFontFamily,t.fillStyle=e.yAxisFontColor,t.textAlign="center",t.textBaseline="bottom",t.translate(C,topNotUsableSize+availableHeight/2),t.rotate(+(90*(Math.PI/180))),setTextBordersAndBackground(t,e.yAxisLabel2,Math.ceil(t.chartTextScale*e.yAxisFontSize),0,0,e.yAxisLabelBorders,e.yAxisLabelBordersColor,Math.ceil(t.chartLineScale*e.yAxisLabelBordersWidth),Math.ceil(t.chartSpaceScale*e.yAxisLabelBordersXSpace),Math.ceil(t.chartSpaceScale*e.yAxisLabelBordersYSpace),e.yAxisLabelBordersStyle,e.yAxisLabelBackgroundColor,"YAXISLABELLEFT"),t.fillTextMultiLine(e.yAxisLabel2,0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.yAxisFontSize),!1,e.detectMouseOnText,t,"YRIGHTAXISLABEL_TEXTMOUSE",+(90*(Math.PI/180)),C,topNotUsableSize+availableHeight/2,-1,-1),t.stroke(),t.restore())),H>0&&e.xAxisBottom&&(t.save(),t.beginPath(),t.font=e.xAxisFontStyle+" "+Math.ceil(t.chartTextScale*e.xAxisFontSize).toString()+"px "+e.xAxisFontFamily,t.fillStyle=e.xAxisFontColor,t.textAlign="center",t.textBaseline="bottom",setTextBordersAndBackground(t,e.xAxisLabel,Math.ceil(t.chartTextScale*e.xAxisFontSize),U+availableWidth/2,f,e.xAxisLabelBorders,e.xAxisLabelBordersColor,Math.ceil(t.chartLineScale*e.xAxisLabelBordersWidth),Math.ceil(t.chartSpaceScale*e.xAxisLabelBordersXSpace),Math.ceil(t.chartSpaceScale*e.xAxisLabelBordersYSpace),e.xAxisLabelBordersStyle,e.xAxisLabelBackgroundColor,"XAXISLABEL"),t.translate(U+availableWidth/2,f),t.fillTextMultiLine(e.xAxisLabel,0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.xAxisFontSize),!0,e.detectMouseOnText,t,"XAXISLABEL_TEXTMOUSE",0,U+availableWidth/2,f,-1,-1),t.stroke(),t.restore());var la;y>1||1==y&&e.showSingleLegend?(la={dispLegend:!0,xLegendBorderPos:B,yLegendBorderPos:R,legendBorderWidth:K,legendBorderHeight:Z,nbLegendCols:b,xFirstLegendTextPos:O,yFirstLegendTextPos:I,drawLegendOnData:h,reverseLegend:s,legendBox:d,widestLegend:L},(0==e.legendPosY||4==e.legendPosY||0==e.legendPosX||4==e.legendPosX)&&(drawLegend(la,a,e,t,p),la={dispLegend:!1})):la={dispLegend:!1},""!=e.footNote.trim()&&(t.save(),t.font=e.footNoteFontStyle+" "+Math.ceil(t.chartTextScale*e.footNoteFontSize).toString()+"px "+e.footNoteFontFamily,t.fillStyle=e.footNoteFontColor,t.textAlign="center",t.textBaseline="bottom",setTextBordersAndBackground(t,e.footNote,Math.ceil(t.chartTextScale*e.footNoteFontSize),U+availableWidth/2,T,e.footNoteBorders,e.footNoteBordersColor,Math.ceil(t.chartLineScale*e.footNoteBordersWidth),Math.ceil(t.chartSpaceScale*e.footNoteBordersXSpace),Math.ceil(t.chartSpaceScale*e.footNoteBordersYSpace),e.footNoteBordersStyle,e.footNoteBackgroundColor,"FOOTNOTE"),t.translate(U+availableWidth/2,T),t.fillTextMultiLine(e.footNote,0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.footNoteFontSize),!0,e.detectMouseOnText,t,"FOOTNOTE_TEXTMOUSE",0,U+availableWidth/2,T,-1,-1),t.stroke(),t.restore())}return clrx=U,clrwidth=availableWidth,clry=topNotUsableSize,clrheight=availableHeight,{leftNotUsableSize:U,rightNotUsableSize:_,availableWidth:availableWidth,topNotUsableSize:topNotUsableSize,bottomNotUsableHeightWithoutXLabels:bottomNotUsableHeightWithoutXLabels,bottomNotUsableHeightWithXLabels:bottomNotUsableHeightWithXLabels,availableHeight:availableHeight,widestXLabel:k,highestXLabel:E,widestYLabel:z,widestYLabel2:Y,highestYLabel:W,rotateLabels:j,xLabelPos:J,clrx:clrx,clry:clry,clrwidth:clrwidth,clrheight:clrheight,legendMsr:la}}function drawLinesDataset(a,e,t,i,l,n){function o(a,n,o,s){0==setOptionValue(!0,1,"LINKTYPE",i,e,l,e.datasets[s].linkType,t.linkType,"linkType",s,D,{nullvalue:null})&&setOptionValue(!0,1,"BEZIERCURVE",i,e,l,void 0,t.bezierCurve,"bezierCurve",s,-1,{nullValue:!0})&&(a.length=0,a.push(n),a.push(o)),m=o}function s(a,e,t,i){return yposOrigin="undefined","undefined"!=typeof i[a][e].yPosOffsetOrigin&&(yposOrigin=i[a][e].yAxisPos-A.mainVal*i[a][e].yPosOffsetOrigin),yposOrigin}function r(a,e,t,i,l,n,o,s,r){0==setOptionValue(!0,1,"LINKTYPE",e,n,o,n.datasets[s].linkType,l.linkType,"linkType",s,D,{nullvalue:null})&&setOptionValue(!0,1,"BEZIERCURVE",e,n,o,void 0,l.bezierCurve,"bezierCurve",s,-1,{nullValue:!0})?(a.push(t),a.push(i)):0==setOptionValue(!0,1,"LINKTYPE",e,n,o,n.datasets[s].linkType,l.linkType,"linkType",s,D,{nullvalue:null})?e.lineTo(t,i):1==setOptionValue(!0,1,"LINKTYPE",e,n,o,n.datasets[s].linkType,l.linkType,"linkType",s,D,{nullvalue:null})?("undefined"!=r?e.moveTo(t,r):e.moveTo(t,o[s][0].xAxisPosY-o[s][0].zeroY),e.lineTo(t,i)):2==setOptionValue(!0,1,"LINKTYPE",e,n,o,n.datasets[s].linkType,l.linkType,"linkType",s,D,{nullvalue:null})&&"undefined"!=typeof m&&(e.lineTo(t,m),e.lineTo(t,i),m=i)}function c(a,t,i,n){0==setOptionValue(!0,1,"LINKTYPE",t,e,l,e.datasets[n].linkType,i.linkType,"linkType",n,D,{nullvalue:null})&&setOptionValue(!0,1,"BEZIERCURVE",t,e,l,void 0,i.bezierCurve,"bezierCurve",n,-1,{nullValue:!0})&&(minimumpos=l[n][0].xAxisPosY,maximumpos=l[n][0].xAxisPosY-l[n][0].calculatedScale.steps*l[n][0].scaleHop,d(t,a,setOptionValue(!0,1,"BEZIERCURVETENSION",t,e,l,void 0,i.bezierCurveTension,"bezierCurveTension",n,-1,{nullValue:!0}),minimumpos,maximumpos),a.length=0),m=void 0}function h(a,e,t,i,l,n,o){var s=Math.sqrt(Math.pow(t-a,2)+Math.pow(i-e,2)),r=Math.sqrt(Math.pow(l-t,2)+Math.pow(n-i,2)),c=o*s/(s+r),h=o-c,d=t+c*(a-l),p=i+c*(e-n),u=t-h*(a-l),S=i-h*(e-n);return[d,p,u,S]}function d(a,i,n,o,s){var r=[],c=i.length;if(i.push(2*i[c-2]-i[c-4]),i.push(2*i[c-1]-i[c-3]),4==c)return a.moveTo(i[0],i[1]),void a.lineTo(i[2],i[3]);for(var d=0;c-2>d;d+=2)r=r.concat(h(i[d],i[d+1],i[d+2],i[d+3],i[d+4],i[d+5],n));for(a.beginPath(),a.strokeStyle=setOptionValue(!0,1,"STROKECOLOR",a,e,l,e.datasets[P].strokeColor,t.defaultStrokeColor,"strokeColor",P,D,{nullvalue:null}),a.lineWidth=Math.ceil(a.chartLineScale*setOptionValue(!0,1,"LINEWIDTH",a,e,l,e.datasets[P].datasetStrokeWidth,t.datasetStrokeWidth,"datasetStrokeWidth",P,D,{nullvalue:null})),a.moveTo(i[0],i[1]),a.quadraticCurveTo(r[0],Math.max(Math.min(r[1],o),s),i[2],i[3]),a.setLineDash(lineStyleFn(setOptionValue(!0,1,"LINEDASH",a,e,l,e.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,D,{nullvalue:null}))),d=2;d<i.length-4;d+=2)p=Math.max(Math.min(r[2*d-1],o),s),u=Math.max(Math.min(r[2*d+1],o),s),a.bezierCurveTo(r[2*d-2],p,r[2*d],u,i[d+2],i[d+3]);a.stroke()}for(var p,u,S,g,f,x,A,m,M=[],P=0;P<e.datasets.length;P++)if(1==setOptionValue(!0,1,"ANIMATION",i,e,l,e.datasets[P].animation,t.animation,"animation",P,-1,{nullvalue:null})||a>=1){if(m="undefined","Line"!=l[P][0].tpchart)continue;if(0==l[P].length)continue;if(-1==l[P][0].firstNotMissing)continue;i.save(),i.beginPath(),prevAnimPc={mainVal:0,subVal:0,animVal:0};for(var T=-1,v=-1,D=l[P][0].firstNotMissing;D<=l[P][0].lastNotMissing;D++)if(!(0==prevAnimPc.animVal&&D>l[P][0].firstNotMissing))if(A=animationCorrection(a,e,t,P,D,!0),0==A.mainVal&&prevAnimPc.mainVal>0&&-1!=T)i.setLineDash(lineStyleFn(setOptionValue(!0,1,"LINEDASH",i,e,l,e.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,D,{nullvalue:null}))),i.stroke(),i.setLineDash([]),t.extrapolateMissingData?(p=l[P][l[P][D].prevNotMissing].yAxisPos-prevAnimPc.mainVal*l[P][l[P][D].prevNotMissing].yPosOffset,u=l[P][D].yAxisPos-prevAnimPc.mainVal*l[P][l[P][D-1].nextNotMissing].yPosOffset,g=l[P][D-1].nextNotMissing-l[P][D].prevNotMissing,f=D-1-l[P][D].prevNotMissing,x=(f+prevAnimPc.subVal)/g,S=p+x*(u-p),r(M,i,l[P][l[P][D].prevNotMissing].xPos+x*(l[P][l[P][D-1].nextNotMissing].xPos-l[P][l[P][D].prevNotMissing].xPos),S,t,e,l,P,s(P,D,e,l)),c(M,i,t,P),i.setLineDash(lineStyleFn(setOptionValue(!0,1,"LINEDASH",i,e,l,e.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,D,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle="rgba(0,0,0,0)",t.datasetFill&&1!=setOptionValue(!0,1,"LINKTYPE",i,e,l,e.datasets[P].linkType,t.linkType,"linkType",P,D,{nullvalue:null})&&(i.lineTo(l[P][l[P][D].prevNotMissing].xPos+x*(l[P][l[P][D-1].nextNotMissing].xPos-l[P][l[P][D].prevNotMissing].xPos),l[P][D].yAxisPos),i.lineTo(l[P][T].xPos,l[P][T].xAxisPosY-l[P][0].zeroY),i.closePath(),i.fillStyle=setOptionValue(!0,1,"COLOR",i,e,l,e.datasets[P].fillColor,t.defaultFillColor,"fillColor",P,D,{animationValue:A.mainVal,xPosLeft:l[P][0].xPos,yPosBottom:Math.max(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*A.mainVal)*l[P][0].lminvalue_offset),xPosRight:l[P][e.datasets[P].data.length-1].xPos,yPosTop:Math.min(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*A.mainVal)*l[P][0].lmaxvalue_offset)}),i.fill(),T=-1)):"undefined"!=typeof l[P][D].value&&(r(M,i,l[P][D-1].xPos+prevAnimPc.subVal*(l[P][D].xPos-l[P][D-1].xPos),l[P][D].yAxisPos-prevAnimPc.mainVal*l[P][l[P][D-1].nextNotMissing].yPosOffset,t,e,l,P,s(P,D,e,l)),c(M,i,t,P),i.setLineDash(lineStyleFn(setOptionValue(!0,1,"LINEDASH",i,e,l,e.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,D,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle="rgba(0,0,0,0)",t.datasetFill&&1!=setOptionValue(!0,1,"LINKTYPE",i,e,l,e.datasets[P].linkType,t.linkType,"linkType",P,D,{nullvalue:null})&&(i.lineTo(l[P][D-1].xPos+prevAnimPc.subVal*(l[P][D].xPos-l[P][D-1].xPos),l[P][D].yAxisPos),i.lineTo(l[P][T].xPos,l[P][T].xAxisPosY-l[P][0].zeroY),i.closePath(),i.fillStyle=setOptionValue(!0,1,"COLOR",i,e,l,e.datasets[P].fillColor,t.defaultFillColor,"fillColor",P,D,{animationValue:A.mainVal,xPosLeft:l[P][0].xPos,yPosBottom:Math.max(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*A.mainVal)*l[P][0].lminvalue_offset),xPosRight:l[P][e.datasets[P].data.length-1].xPos,yPosTop:Math.min(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*A.mainVal)*l[P][0].lmaxvalue_offset)}),i.fill())),prevAnimPc=A;else switch(0==A.totVal?(i.setLineDash(lineStyleFn(setOptionValue(!0,1,"LINEDASH",i,e,l,e.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,D,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle="rgba(0,0,0,0)"):(i.setLineDash(lineStyleFn(setOptionValue(!0,1,"LINEDASH",i,e,l,e.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,D,{nullvalue:null}))),i.stroke(),i.setLineDash([]),i.strokeStyle=setOptionValue(!0,1,"STROKECOLOR",i,e,l,e.datasets[P].strokeColor,t.defaultStrokeColor,"strokeColor",P,D,{nullvalue:null})),prevAnimPc=A,typeof e.datasets[P].data[D]){case"undefined":if(t.extrapolateMissingData)A.subVal>0&&(v=l[P][D].xPos+A.subVal*(l[P][D+1].xPos-l[P][D].xPos),p=l[P][l[P][D+1].prevNotMissing].yAxisPos-l[P][l[P][D+1].prevNotMissing].yPosOffset,u=l[P][l[P][D].nextNotMissing].yAxisPos-l[P][l[P][D].nextNotMissing].yPosOffset,g=l[P][D].nextNotMissing-l[P][D+1].prevNotMissing,f=D-l[P][D+1].prevNotMissing,x=(f+prevAnimPc.subVal)/g,S=p+x*(u-p),r(M,i,l[P][l[P][D].prevNotMissing].xPos+x*(l[P][l[P][D-1].nextNotMissing].xPos-l[P][l[P][D].prevNotMissing].xPos),S,t,e,l,P,s(P,D,e,l)));else{if(-1==T)continue;c(M,i,t,P),i.setLineDash(lineStyleFn(setOptionValue(!0,1,"LINEDASH",i,e,l,e.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,D,{nullvalue:null}))),i.stroke(),i.setLineDash([]),t.datasetFill&&-1!=T&&1!=setOptionValue(!0,1,"LINKTYPE",i,e,l,e.datasets[P].linkType,t.linkType,"linkType",P,D,{nullvalue:null})&&(v=-1,i.strokeStyle="rgba(0,0,0,0)",i.lineTo(l[P][D-1].xPos,l[P][D-1].yAxisPos),i.lineTo(l[P][T].xPos,l[P][T].yAxisPos),i.closePath(),i.fillStyle=setOptionValue(!0,1,"COLOR",i,e,l,e.datasets[P].fillColor,t.defaultFillColor,"fillColor",P,D,{animationValue:A.mainVal,xPosLeft:l[P][0].xPos,yPosBottom:Math.max(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*A.mainVal)*l[P][0].lminvalue_offset),xPosRight:l[P][e.datasets[P].data.length-1].xPos,yPosTop:Math.min(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*A.mainVal)*l[P][0].lmaxvalue_offset)}),i.fill()),i.beginPath(),prevAnimPc={mainVal:0,subVal:0},T=-1}break;default:i.lineWidth=Math.ceil(i.chartLineScale*setOptionValue(!0,1,"LINEWIDTH",i,e,l,e.datasets[P].datasetStrokeWidth,t.datasetStrokeWidth,"datasetStrokeWidth",P,D,{nullvalue:null})),-1==T?(T=D,i.beginPath(),1==setOptionValue(!0,1,"LINKTYPE",i,e,l,e.datasets[P].linkType,t.linkType,"linkType",P,D,{nullvalue:null})?("undefined"!=typeof l[P][D].yPosOffsetOrigin?i.moveTo(l[P][D].xPos,l[P][D].yAxisPos-A.mainVal*l[P][D].yPosOffsetOrigin):i.moveTo(l[P][T].xPos,l[P][T].xAxisPosY-l[P][0].zeroY),i.lineTo(l[P][D].xPos,l[P][D].yAxisPos-A.mainVal*l[P][D].yPosOffset)):i.moveTo(l[P][D].xPos,l[P][D].yAxisPos-A.mainVal*l[P][D].yPosOffset),o(M,l[P][D].xPos,l[P][D].yAxisPos-A.mainVal*l[P][D].yPosOffset,P),v=l[P][D].xPos):(v=l[P][D].xPos,r(M,i,l[P][D].xPos,l[P][D].yAxisPos-A.mainVal*l[P][D].yPosOffset,t,e,l,P,s(P,D,e,l))),A.subVal>0&&-1!=l[P][D].nextNotMissing&&(t.extrapolateMissing||l[P][D].nextNotMissing==D+1)&&(v=l[P][D].xPos+A.subVal*(l[P][D+1].xPos-l[P][D].xPos),p=l[P][l[P][D+1].prevNotMissing].yAxisPos-l[P][l[P][D+1].prevNotMissing].yPosOffset,u=l[P][l[P][D].nextNotMissing].yAxisPos-l[P][l[P][D].nextNotMissing].yPosOffset,S=p+A.subVal*(u-p),r(M,i,l[P][D].xPos+A.subVal*(l[P][l[P][D].nextNotMissing].xPos-l[P][D].xPos),S,t,e,l,P,s(P,D,e,l)))}if(c(M,i,t,P),i.setLineDash(lineStyleFn(setOptionValue(!0,1,"LINEDASH",i,e,l,e.datasets[P].datasetStrokeStyle,t.datasetStrokeStyle,"datasetStrokeStyle",P,D,{nullvalue:null}))),i.stroke(),i.setLineDash([]),t.datasetFill&&1!=setOptionValue(!0,1,"LINKTYPE",i,e,l,e.datasets[P].linkType,t.linkType,"linkType",P,D,{nullvalue:null})&&T>=0&&(i.strokeStyle="rgba(0,0,0,0)",i.lineTo(v,l[P][0].xAxisPosY-l[P][0].zeroY),i.lineTo(l[P][T].xPos,l[P][T].xAxisPosY-l[P][0].zeroY),i.closePath(),i.fillStyle=setOptionValue(!0,1,"COLOR",i,e,l,e.datasets[P].fillColor,t.defaultFillColor,"fillColor",P,-1,{animationValue:A.mainVal,xPosLeft:l[P][0].xPos,yPosBottom:Math.max(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*A.mainVal)*l[P][0].lminvalue_offset),xPosRight:l[P][e.datasets[P].data.length-1].xPos,yPosTop:Math.min(l[P][0].yAxisPos,l[P][0].yAxisPos-(t.animationLeftToRight?1:1*A.mainVal)*l[P][0].lmaxvalue_offset)}),i.fill()),i.restore(),a>=1)for(D=0;D<e.datasets[P].data.length;D++)if("undefined"!=typeof e.datasets[P].data[D]&&(A=animationCorrection(a,e,t,P,D,!0),(A.mainVal>0||!t.animationLeftToRight)&&setOptionValue(!0,1,"POINTDOT",i,e,l,void 0,t.pointDot,"pointDot",P,D,{nullvalue:null}))){i.beginPath(),i.fillStyle=setOptionValue(!0,1,"MARKERFILLCOLOR",i,e,l,e.datasets[P].pointColor,t.defaultStrokeColor,"pointColor",P,D,{nullvalue:!0}),i.strokeStyle=setOptionValue(!0,1,"MARKERSTROKESTYLE",i,e,l,e.datasets[P].pointStrokeColor,t.defaultStrokeColor,"pointStrokeColor",P,D,{nullvalue:!0}),i.lineWidth=setOptionValue(!0,i.chartLineScale,"MARKERLINEWIDTH",i,e,l,e.datasets[P].pointDotStrokeWidth,t.pointDotStrokeWidth,"pointDotStrokeWidth",P,D,{nullvalue:!0});var L=setOptionValue(!0,1,"MARKERSHAPE",i,e,l,e.datasets[P].markerShape,t.markerShape,"markerShape",P,D,{nullvalue:!0}),y=setOptionValue(!0,i.chartSpaceScale,"MARKERRADIUS",i,e,l,e.datasets[P].pointDotRadius,t.pointDotRadius,"pointDotRadius",P,D,{nullvalue:!0}),V=setOptionValue(!0,1,"MARKERSTROKESTYLE",i,e,l,e.datasets[P].pointDotStrokeStyle,t.pointDotStrokeStyle,"pointDotStrokeStyle",P,D,{nullvalue:!0});drawMarker(i,l[P][D].xPos,l[P][D].yAxisPos-A.mainVal*l[P][D].yPosOffset,L,y,V)}if(a>=t.animationStopValue)for(D=0;D<e.datasets[P].data.length;D++)if("undefined"!=typeof e.datasets[P].data[D]&&(0!=e.datasets[P].mouseDetection&&(jsGraphAnnotate[i.ChartNewId][jsGraphAnnotate[i.ChartNewId].length]=["POINT",P,D,l,setOptionValue(!0,1,"ANNOTATEDISPLAY",i,e,l,e.datasets[P].annotateDisplay,t.annotateDisplay,"annotateDisplay",P,D,{nullValue:!0})]),setOptionValue(!0,1,"INGRAPHDATASHOW",i,e,l,e.datasets[P].inGraphDataShow,t.inGraphDataShow,"inGraphDataShow",P,D,{nullValue:!0}))){i.save(),i.textAlign=setOptionValue(!0,1,"INGRAPHDATAALIGN",i,e,l,void 0,t.inGraphDataAlign,"inGraphDataAlign",P,D,{nullValue:!0}),i.textBaseline=setOptionValue(!0,1,"INGRAPHDATAVALIGN",i,e,l,void 0,t.inGraphDataVAlign,"inGraphDataVAlign",P,D,{nullValue:!0}),i.font=setOptionValue(!0,1,"INGRAPHDATAFONTSTYLE",i,e,l,void 0,t.inGraphDataFontStyle,"inGraphDataFontStyle",P,D,{nullValue:!0})+" "+setOptionValue(!0,i.chartTextScale,"INGRAPHDATAFONTSIZE",i,e,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",P,D,{nullValue:!0})+"px "+setOptionValue(!0,1,"INGRAPHDATAFONTFAMILY",i,e,l,void 0,t.inGraphDataFontFamily,"inGraphDataFontFamily",P,D,{nullValue:!0}),i.fillStyle=setOptionValue(!0,1,"INGRAPHDATAFONTCOLOR",i,e,l,void 0,t.inGraphDataFontColor,"inGraphDataFontColor",P,D,{nullValue:!0});var b=setOptionValue(!0,i.chartSpaceScale,"INGRAPHDATAPADDINGX",i,e,l,void 0,t.inGraphDataPaddingX,"inGraphDataPaddingX",P,D,{nullValue:!0}),G=setOptionValue(!0,i.chartSpaceScale,"INGRAPHDATAPADDINGY",i,e,l,void 0,t.inGraphDataPaddingY,"inGraphDataPaddingY",P,D,{nullValue:!0}),O=tmplbis(setOptionValue(!0,1,"INGRAPHDATATMPL",i,e,l,void 0,t.inGraphDataTmpl,"inGraphDataTmpl",P,D,{nullValue:!0}),l[P][D],t);i.translate(l[P][D].xPos+b,l[P][D].yAxisPos-A.mainVal*l[P][D].yPosOffset-G);var I=setOptionValue(!0,1,"INGRAPHDATAROTATE",i,e,l,void 0,t.inGraphDataRotate,"inGraphDataRotate",P,D,{nullValue:!0})*(Math.PI/180);i.rotate(I),setTextBordersAndBackground(i,O,setOptionValue(!0,i.chartTextScale,"INGRAPHDATAFONTSIZE",i,e,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",P,D,{nullValue:!0}),0,0,setOptionValue(!0,1,"INGRAPHDATABORDERS",i,e,l,void 0,t.inGraphDataBorders,"inGraphDataBorders",P,D,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSCOLOR",i,e,l,void 0,t.inGraphDataBordersColor,"inGraphDataBordersColor",P,D,{nullValue:!0}),setOptionValue(!0,i.chartLineScale,"INGRAPHDATABORDERSWIDTH",i,e,l,void 0,t.inGraphDataBordersWidth,"inGraphDataBordersWidth",P,D,{nullValue:!0}),setOptionValue(!0,i.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",i,e,l,void 0,t.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",P,D,{nullValue:!0}),setOptionValue(!0,i.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",i,e,l,void 0,t.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",P,D,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSSTYLE",i,e,l,void 0,t.inGraphDataBordersStyle,"inGraphDataBordersStyle",P,D,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABACKGROUNDCOLOR",i,e,l,void 0,t.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",P,D,{nullValue:!0}),"INGRAPHDATA"),i.fillTextMultiLine(O,0,0,i.textBaseline,setOptionValue(!0,i.chartTextScale,"INGRAPHDATAFONTSIZE",i,e,l,void 0,t.inGraphDataFontSize,"inGraphDataFontSize",P,D,{nullValue:!0}),!0,t.detectMouseOnText,i,"INGRAPHDATA_TEXTMOUSE",I,l[P][D].xPos+b,l[P][D].yAxisPos-A.mainVal*l[P][D].yPosOffset-G,P,D),i.restore()}}i.setLineDash([])}function log10(a){return Math.log(a)/Math.LN10}function setRect(a,e){e.clearRect?e.multiGraph||(clear(a),a.clearRect(0,0,width,height)):(clear(a),a.clearRect(0,0,width,height),a.fillStyle=e.savePngBackgroundColor,a.strokeStyle=e.savePngBackgroundColor,a.beginPath(),a.moveTo(0,0),a.lineTo(0,a.canvas.height),a.lineTo(a.canvas.width,a.canvas.height),a.lineTo(a.canvas.width,0),a.lineTo(0,0),a.stroke(),a.fill())}function chartJsMouseDown(a,e,t,i,l){1==a.which&&"function"==typeof t.mouseDownLeft?t.mouseDownLeft(a,e,t,i,l):2==a.which&&"function"==typeof t.mouseDownMiddle?t.mouseDownMiddle(a,e,t,i,l):3==a.which&&"function"==typeof t.mouseDownRight&&t.mouseDownRight(a,e,t,i,l)}function defMouse(a,e,t){function i(i,l,n){function o(i){(null==n||n(i))&&doMouseAction(t,a,i,e,"mouseaction",l)}if("function"==typeof l){var s=i+" "+l.name;s in a._eventListeners&&(a.canvas.removeEventListener?a.canvas.removeEventListener(i,a._eventListeners[s]):a.canvas.detachEvent&&a.canvas.detachEvent(i,a._eventListeners[s])),a._eventListeners[s]=o,a.canvas.addEventListener?("mousewheel"==i&&(i="DOMMouseScroll"),a.canvas.addEventListener(i,o,!1)):a.canvas.attachEvent&&a.canvas.attachEvent("on"+i,o)}}isBooleanOptionTrue(void 0,t.annotateDisplay)&&(0==cursorDivCreated&&(oCursor=new makeCursorObj("divCursor")),isIE()<9&&0!=isIE()?a.canvas.attachEvent("on"+t.annotateFunction.split(" ")[0],function(i){("left"==t.annotateFunction.split(" ")[1]&&1==i.which||"middle"==t.annotateFunction.split(" ")[1]&&2==i.which||"right"==t.annotateFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.annotateFunction.split(" ")[1])&&doMouseAction(t,a,i,e,"annotate",t.mouseDownRight)}):a.canvas.addEventListener(t.annotateFunction.split(" ")[0],function(i){("left"==t.annotateFunction.split(" ")[1]&&1==i.which||"middle"==t.annotateFunction.split(" ")[1]&&2==i.which||"right"==t.annotateFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.annotateFunction.split(" ")[1])&&doMouseAction(t,a,i,e,"annotate",t.mouseDownRight)},!1)),t.savePng&&(isIE()<9&&0!=isIE()?a.canvas.attachEvent("on"+t.savePngFunction.split(" ")[0],function(i){("left"==t.savePngFunction.split(" ")[1]&&1==i.which||"middle"==t.savePngFunction.split(" ")[1]&&2==i.which||"right"==t.savePngFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.savePngFunction.split(" ")[1])&&saveCanvas(a,e,t)}):a.canvas.addEventListener(t.savePngFunction.split(" ")[0],function(i){("left"==t.savePngFunction.split(" ")[1]&&1==i.which||"middle"==t.savePngFunction.split(" ")[1]&&2==i.which||"right"==t.savePngFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.savePngFunction.split(" ")[1])&&saveCanvas(a,e,t)},!1)),isIE()<9&&0!=isIE()?a.canvas.attachEvent("onmousewheel",function(a){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")}):a.canvas.addEventListener("DOMMouseScroll",function(a){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")},!1),"function"==typeof t.mouseDownRight?i("mousedown",chartJsMouseDown,function(a){return 1==a.which||2==a.which||3==a.which}):"function"==typeof t.mouseDownLeft?i("mousedown",chartJsMouseDown,function(a){return 1==a.which||2==a.which||3==a.which}):"function"==typeof t.mouseDownMiddle&&i("mousedown",chartJsMouseDown,function(a){return 1==a.which||2==a.which||3==a.which}),i("mousemove",t.mouseMove),i("mouseout",t.mouseOut),i("mousewheel",t.mouseWheel),t.highLight&&(isIE()<9&&0!=isIE()?a.canvas.attachEvent("on"+t.highLightMouseFunction.split(" ")[0],function(i){("left"==t.highLightMouseFunction.split(" ")[1]&&1==i.which||"middle"==t.highLightMouseFunction.split(" ")[1]&&2==i.which||"right"==t.highLightMouseFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.highLightMouseFunction.split(" ")[1])&&doMouseAction(t,a,i,e,"highLight",t.mouseDownRight)}):a.canvas.addEventListener(t.highLightMouseFunction.split(" ")[0],function(i){("left"==t.highLightMouseFunction.split(" ")[1]&&1==i.which||"middle"==t.highLightMouseFunction.split(" ")[1]&&2==i.which||"right"==t.highLightMouseFunction.split(" ")[1]&&3==i.which||"string"!=typeof t.highLightMouseFunction.split(" ")[1])&&doMouseAction(t,a,i,e,"highLight",t.mouseDownRight)},!1))}var chart=this,animationOptions={
linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-0.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0==a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1==a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0==a?0:1==a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-0.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var e=1.70158,t=0,i=1;return 0==a?0:1==(a/=1)?1:(t||(t=.3),i<Math.abs(1)?(i=1,e=t/4):e=t/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(a-=1))*Math.sin((1*a-e)*(2*Math.PI)/t)))},easeOutElastic:function(a){var e=1.70158,t=0,i=1;return 0==a?0:1==(a/=1)?1:(t||(t=.3),i<Math.abs(1)?(i=1,e=t/4):e=t/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*a)*Math.sin((1*a-e)*(2*Math.PI)/t)+1)},easeInOutElastic:function(a){var e=1.70158,t=0,i=1;return 0==a?0:2==(a/=.5)?1:(t||(t=1*(.3*1.5)),i<Math.abs(1)?(i=1,e=t/4):e=t/(2*Math.PI)*Math.asin(1/i),1>a?-.5*(i*Math.pow(2,10*(a-=1))*Math.sin((1*a-e)*(2*Math.PI)/t)):i*Math.pow(2,-10*(a-=1))*Math.sin((1*a-e)*(2*Math.PI)/t)*.5+1)},easeInBack:function(a){var e=1.70158;return 1*(a/=1)*a*((e+1)*a-e)},easeOutBack:function(a){var e=1.70158;return 1*((a=a/1-1)*a*((e+1)*a+e)+1)},easeInOutBack:function(a){var e=1.70158;return(a/=.5)<1?.5*(a*a*(((e*=1.525)+1)*a-e)):.5*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)},easeInBounce:function(a){return 1-animationOptions.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?1*(7.5625*a*a):2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*animationOptions.easeInBounce(2*a):.5*animationOptions.easeOutBounce(2*a-1)+.5}},width=context.canvas.width,height=context.canvas.height;window.devicePixelRatio&&(context.canvas.style.width=width+"px",context.canvas.style.height=height+"px",context.canvas.height=height*window.devicePixelRatio,context.canvas.width=width*window.devicePixelRatio,context.scale(window.devicePixelRatio,window.devicePixelRatio)),this.PolarArea=function(a,e){chart.PolarArea.defaults={highLightSet:{color:"red"},inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:!0,scaleOverride:!1,scaleOverride2:!1,scaleGridLinesStep:1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleLineStyle:"solid",scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,animation:!0,animationByData:"ByArc",animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,totalAmplitude:360,radiusScale:1},isIE()<9&&0!=isIE()&&(chart.PolarArea.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.PolarArea.defaults)),chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var t=e?mergeChartConfig(chart.PolarArea.defaults,e):chart.PolarArea.defaults;return new PolarArea(a,t,context)},this.Radar=function(a,e){chart.Radar.defaults={highLightSet:{pointDotRadius:15,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,yAxisMinimumInterval:"none",scaleGridLinesStep:1,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!1,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineStyle:"solid",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointDotStrokeStyle:"solid",datasetFill:!0,datasetStrokeWidth:2,datasetStrokeStyle:"solid",animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10,startAngle:90},isIE()<9&&0!=isIE()&&(chart.Radar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Radar.defaults)),chart.Radar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Radar.defaults),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptions),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptionsRadar);var t=e?mergeChartConfig(chart.Radar.defaults,e):chart.Radar.defaults;return new Radar(a,t,context)},this.Pie=function(a,e){chart.Pie.defaults=chart.defaults.PieAndDoughnut,isIE()<9&&0!=isIE()&&(chart.Pie.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Pie.defaults)),chart.Pie.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Pie.defaults),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptions),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptionsPie);var t=e?mergeChartConfig(chart.Pie.defaults,e):chart.Pie.defaults;return new Pie(a,t,context)},this.Doughnut=function(a,e){chart.Doughnut.defaults=chart.defaults.PieAndDoughnut,isIE()<9&&0!=isIE()&&(chart.Doughnut.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Doughnut.defaults)),chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var t=e?mergeChartConfig(chart.Doughnut.defaults,e):chart.Doughnut.defaults;return new Doughnut(a,t,context)},this.Line=function(a,e){chart.Line.defaults={inGraphDataShow:!1,highLightSet:{pointDotRadius:15,pointDot:!0},inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",drawXScaleLine:[{position:"bottom"}],scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLabel2:"<%=value%>",scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:!0,linkType:0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,datasetStrokeStyle:"solid",datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",extrapolateMissingData:!0,onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.Line.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Line.defaults)),chart.Line.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptions),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptionsLine);var t=e?mergeChartConfig(chart.Line.defaults,e):chart.Line.defaults;return new Line(a,t,context)},this.StackedBar=function(a,e){chart.StackedBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,bezierCurve:!0,linkType:0,bezierCurveTension:.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.StackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.StackedBar.defaults)),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptions),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptionsStackedBar);var t=e?mergeChartConfig(chart.StackedBar.defaults,e):chart.StackedBar.defaults;return new StackedBar(a,t,context)},this.HorizontalStackedBar=function(a,e){chart.HorizontalStackedBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},isIE()<9&&0!=isIE()&&(chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalStackedBar.defaults)),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptionsHorizontalStackedBar);var t=e?mergeChartConfig(chart.HorizontalStackedBar.defaults,e):chart.HorizontalStackedBar.defaults;return new HorizontalStackedBar(a,t,context)},this.Bar=function(a,e){chart.Bar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleLabel2:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleGridLineStyle:"solid",showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,extrapolateMissingData:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,bezierCurve:!0,linkType:0,bezierCurveTension:.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.Bar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Bar.defaults)),chart.Bar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptions),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptionsBar);var t=e?mergeChartConfig(chart.Bar.defaults,e):chart.Bar.defaults;return new Bar(a,t,context)},this.HorizontalBar=function(a,e){chart.HorizontalBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},isIE()<9&&0!=isIE()&&(chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalBar.defaults)),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptionsHorizontalBar);var t=e?mergeChartConfig(chart.HorizontalBar.defaults,e):chart.HorizontalBar.defaults;return new HorizontalBar(a,t,context)},chart.defaults={},chart.defaults.IExplorer8={annotateBackgroundColor:"black",annotateFontColor:"white"},chart.defaults.commonOptions={chartTextScale:1,chartLineScale:1,chartSpaceScale:1,multiGraph:!1,clearRect:!0,dynamicDisplay:!1,dynamicDisplayXPartOfChart:.5,dynamicDisplayYPartOfChart:.5,animationForceSetTimeOut:!1,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:!1,canvasBackgroundColor:"none",canvasBordersWidth:3,canvasBordersStyle:"solid",canvasBordersColor:"black",zeroValue:1e-10,graphTitle:"",graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphTitleBorders:!1,graphTitleBordersColor:"black",graphTitleBordersXSpace:3,graphTitleBordersYSpace:3,graphTitleBordersWidth:1,graphTitleBordersStyle:"solid",graphTitleBackgroundColor:"none",graphSubTitle:"",graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,graphSubTitleBorders:!1,graphSubTitleBordersColor:"black",graphSubTitleBordersXSpace:3,graphSubTitleBordersYSpace:3,graphSubTitleBordersWidth:1,graphSubTitleBordersStyle:"solid",graphSubTitleBackgroundColor:"none",footNote:"",footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,footNoteBorders:!1,footNoteBordersColor:"black",footNoteBordersXSpace:3,footNoteBordersYSpace:3,footNoteBordersWidth:1,footNoteBordersStyle:"solid",footNoteBackgroundColor:"none",legend:!1,showSingleLegend:!1,maxLegendCols:999,legendPosY:4,legendPosX:-2,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBorders:!0,legendBordersStyle:"solid",legendBordersWidth:1,legendBordersColors:"#666",legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,legendFillColor:"rgba(0,0,0,0)",legendXPadding:0,legendYPadding:0,inGraphDataBorders:!1,inGraphDataBordersColor:"black",inGraphDataBordersXSpace:3,inGraphDataBordersYSpace:3,inGraphDataBordersWidth:1,inGraphDataBordersStyle:"solid",inGraphDataBackgroundColor:"none",annotateDisplay:!1,annotateRelocate:!1,savePng:!1,savePngOutput:"NewWindow",savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:12,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",annotateClassName:"",annotateFunctionIn:null,annotateFunctionOut:null,detectMouseOnText:!1,crossText:[""],crossTextIter:["all"],crossTextOverlay:[!0],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,crossTextBorders:[!1],crossTextBordersColor:["black"],crossTextBordersXSpace:[3],crossTextBordersYSpace:[3],crossTextBordersWidth:[1],crossTextBordersStyle:["solid"],crossTextBackgroundColor:["none"],crossImage:[void 0],crossImageIter:["all"],crossImageOverlay:[!0],crossImageRelativePosX:[2],crossImageRelativePosY:[2],crossImageBaseline:["middle"],crossImageAlign:["center"],crossImagePosX:[0],crossImagePosY:[0],crossImageAngle:[0],spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",roundNumber:"none",roundPct:-1,templatesOpenTag:"<%=",templatesCloseTag:"%>",fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV6T:"none",fmtV7:"none",fmtV8:"none",fmtV8T:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtXLabel:"none",fmtYLabel:"none",fmtYLabel2:"none",fmtLegend:"none",animationStartValue:0,animationStopValue:1,animationCount:1,animationPauseTime:5,animationBackward:!1,animationStartWithDataset:1,animationStartWithData:1,animationLeftToRight:!1,animationByDataset:!1,defaultStrokeColor:"rgba(220,220,220,1)",defaultFillColor:"rgba(220,220,220,0.5)",defaultLineWidth:2,graphMaximized:!1,contextMenu:!0,mouseDownRight:null,mouseDownLeft:null,mouseDownMiddle:null,mouseMove:null,mouseOut:null,mouseWheel:null,highLight:!1,highLightMouseFunction:"mousemove",highLightFullLine:!1,highLightRerunEndFunction:!1,savePngName:"canvas",responsive:!1,responsiveMinWidth:0,responsiveMinHeight:0,responsiveMaxWidth:9999999,responsiveMaxHeight:9999999,maintainAspectRatio:!0,responsiveScaleContent:!1,responsiveWindowInitialWidth:!1,pointMarker:"circle",initFunction:null,beforeDrawFunction:null,endDrawDataFunction:null,endDrawScaleFunction:null},chart.defaults.PieAndDoughnut={highLightSet:{expandOutRadius:.1,expandInRadius:-.1},inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationByData:!1,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,totalAmplitude:360,radiusScale:1},chart.defaults.xyAxisCommonOptions={maxBarWidth:-1,yAxisMinimumInterval:"none",yAxisMinimumInterval2:"none",yScaleLabelsMinimumWidth:0,xScaleLabelsMinimumWidth:0,yAxisLeft:!0,yAxisRight:!1,xAxisBottom:!0,xAxisTop:!1,xAxisSpaceBetweenLabels:5,fullWidthGraph:!1,yAxisLabel:"",yAxisLabel2:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,yAxisLabelBorders:!1,yAxisLabelBordersColor:"black",yAxisLabelBordersXSpace:3,yAxisLabelBordersYSpace:3,yAxisLabelBordersWidth:1,yAxisLabelBordersStyle:"solid",yAxisLabelBackgroundColor:"none",xAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,xAxisLabelBorders:!1,xAxisLabelBordersColor:"black",xAxisLabelBordersXSpace:3,xAxisLabelBordersYSpace:3,xAxisLabelBordersWidth:1,xAxisLabelBordersStyle:"solid",xAxisLabelBackgroundColor:"none",showXLabels:1,firstLabelToShow:1,showYLabels:1,firstYLabelToShow:1,yAxisUnit:"",yAxisUnit2:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5,yAxisUnitBorders:!1,yAxisUnitBordersColor:"black",yAxisUnitBordersXSpace:3,yAxisUnitBordersYSpace:3,yAxisUnitBordersWidth:1,yAxisUnitBordersStyle:"solid",yAxisUnitBackgroundColor:"none"};var clear=function(a){a.clearRect(0,0,width,height)},PolarArea=function(a,e,t){function i(i){var l=m[0].firstAngle,n=0,r=m[0].firstAngle;1*e.animationStartWithData>1&&1*e.animationStartWithData-1<a.length&&(n=m[e.animationStartWithData-1].startAngle-m[0].firstAngle,r=m[e.animationStartWithData-1].startAngle);for(var c=0;c<a.length;c++){var h=1,d=1;if(e.animation&&(e.animateScale&&(h=i),e.animateRotate&&(d=i)),correctedRotateAnimation=animationCorrection(d,a,e,c,-1,!1).mainVal,"undefined"!=typeof a[c].value){if(t.beginPath(),"ByArc"==e.animationByData)endAngle=m[c].startAngle+correctedRotateAnimation*m[c].segmentAngle,t.arc(u,S,h*m[c].radiusOffset,m[c].startAngle,endAngle,!1);else if(e.animationByData)if(c<1*e.animationStartWithData-1)t.arc(midPieX,midPieY,h*m[c].radiusOffset,m[c].startAngle,m[c].endAngle,!1);else{if(!(m[c].startAngle<=r+correctedRotateAnimation*(2*Math.PI-n)))continue;endAngle=m[c].endAngle,m[c].endAngle>r+correctedRotateAnimation*(2*Math.PI-n)&&(endAngle=r+correctedRotateAnimation*(2*Math.PI-n)),t.arc(midPieX,midPieY,h*m[c].radiusOffset,m[c].startAngle,endAngle,!1)}else t.arc(midPieX,midPieY,h*m[c].radiusOffset,l,l+correctedRotateAnimation*(m[c].endAngle-m[c].startAngle),!1),l+=correctedRotateAnimation*(m[c].endAngle-m[c].startAngle);t.lineTo(u,S),t.closePath(),t.fillStyle=setOptionValue(!0,1,"COLOR",t,a,m,a[c].color,e.defaultFillColor,"color",c,-1,{animationDecimal:i,scaleAnimation:h}),t.fill(),"merge"==e.segmentShowStroke?(t.lineWidth=0,t.strokeStyle=setOptionValue(!0,1,"COLOR",t,a,m,a[c].color,e.defaultFillColor,"color",c,-1,{animationDecimal:i,scaleAnimation:h}),t.setLineDash([]),t.stroke()):e.segmentShowStroke&&(t.strokeStyle=e.segmentStrokeColor,t.lineWidth=Math.ceil(t.chartLineScale*e.segmentStrokeWidth),t.setLineDash(lineStyleFn(setOptionValue(!0,1,"SEGMENTSTROKESTYLE",t,a,m,a[c].segmentStrokeStyle,e.segmentStrokeStyle,"segmentStrokeStyle",c,-1,{animationDecimal:i,scaleAnimation:h}))),t.stroke(),t.setLineDash([]))}}if(i>=e.animationStopValue)for(c=0;c<a.length;c++)if("undefined"!=typeof a[c].value&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["ARC",c,-1,m,setOptionValue(!0,1,"ANNOTATEDISPLAY",t,a,m,a[c].annotateDisplay,e.annotateDisplay,"annotateDisplay",c,-1,{nullValue:!0})],setOptionValue(!0,1,"INGRAPHDATASHOW",t,a,m,a[c].inGraphDataShow,e.inGraphDataShow,"inGraphDataShow",c,-1,{nullValue:!0}))){1==setOptionValue(!0,1,"INGRAPHDATAANGLEPOSITION",t,a,m,void 0,e.inGraphDataAnglePosition,"inGraphDataAnglePosition",c,-1,{nullValue:!0})?posAngle=m[c].realStartAngle+setOptionValue(!0,1,"INGRAPHDATAPADDINANGLE",t,a,m,void 0,e.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",c,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue(!0,1,"INGRAPHDATAANGLEPOSITION",t,a,m,void 0,e.inGraphDataAnglePosition,"inGraphDataAnglePosition",c,-1,{nullValue:!0})?posAngle=(2*m[c].realStartAngle-m[c].segmentAngle)/2+setOptionValue(!0,1,"INGRAPHDATAPADDINANGLE",t,a,m,void 0,e.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",c,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue(!0,1,"INGRAPHDATAANGLEPOSITION",t,a,m,void 0,e.inGraphDataAnglePosition,"inGraphDataAnglePosition",c,-1,{nullValue:!0})&&(posAngle=m[c].realStartAngle-m[c].segmentAngle+setOptionValue(!0,1,"INGRAPHDATAPADDINANGLE",t,a,m,void 0,e.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",c,-1,{nullValue:!0})*(Math.PI/180)),1==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,m,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",c,-1,{nullValue:!0})?labelRadius=0+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,m,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",c,-1,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,m,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",c,-1,{nullValue:!0})?labelRadius=m[c].radiusOffset/2+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,m,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",c,-1,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,m,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",c,-1,{nullValue:!0})?labelRadius=m[c].radiusOffset+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,m,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",c,-1,{nullValue:!0}):4==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,m,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",c,-1,{nullValue:!0})&&(labelRadius=o*s.steps+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,m,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",c,-1,{nullValue:!0})),t.save(),"off-center"==setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,m,void 0,e.inGraphDataAlign,"inGraphDataAlign",c,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,m,void 0,e.inGraphDataRotate,"inGraphDataRotate",c,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="left":t.textAlign="right":"to-center"==setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,m,void 0,e.inGraphDataAlign,"inGraphDataAlign",c,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,m,void 0,e.inGraphDataRotate,"inGraphDataRotate",c,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="right":t.textAlign="left":t.textAlign=setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,m,void 0,e.inGraphDataAlign,"inGraphDataAlign",c,-1,{nullValue:!0}),"off-center"==setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,m,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",c,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="top":t.textBaseline="bottom":"to-center"==setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,m,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",c,-1,{
nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="bottom":t.textBaseline="top":t.textBaseline=setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,m,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",c,-1,{nullValue:!0}),t.font=setOptionValue(!0,1,"INGRAPHDATAFONTSTYLE",t,a,m,void 0,e.inGraphDataFontStyle,"inGraphDataFontStyle",c,-1,{nullValue:!0})+" "+setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,m,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",c,-1,{nullValue:!0})+"px "+setOptionValue(!0,1,"INGRAPHDATAFONTFAMILY",t,a,m,void 0,e.inGraphDataFontFamily,"inGraphDataFontFamily",c,-1,{nullValue:!0}),t.fillStyle=setOptionValue(!0,1,"INGRAPHDATAFONTCOLOR",t,a,m,void 0,e.inGraphDataFontColor,"inGraphDataFontColor",c,-1,{nullValue:!0});var g=tmplbis(setOptionValue(!0,1,"INGRAPHDATATMPL",t,a,m,void 0,e.inGraphDataTmpl,"inGraphDataTmpl",c,-1,{nullValue:!0}),m[c],e);t.translate(u+labelRadius*Math.cos(posAngle),S-labelRadius*Math.sin(posAngle));var f=0;f="inRadiusAxis"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,m,void 0,e.inGraphDataRotate,"inGraphDataRotate",c,-1,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,m,void 0,e.inGraphDataRotate,"inGraphDataRotate",c,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,m,void 0,e.inGraphDataRotate,"inGraphDataRotate",c,-1,{nullValue:!0})*(Math.PI/180),t.rotate(f),setTextBordersAndBackground(t,g,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,m,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",c,-1,{nullValue:!0}),0,0,setOptionValue(!0,1,"INGRAPHDATABORDERS",t,a,m,void 0,e.inGraphDataBorders,"inGraphDataBorders",c,-1,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSCOLOR",t,a,m,void 0,e.inGraphDataBordersColor,"inGraphDataBordersColor",c,-1,{nullValue:!0}),setOptionValue(!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,a,m,void 0,e.inGraphDataBordersWidth,"inGraphDataBordersWidth",c,-1,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,a,m,void 0,e.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",c,-1,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,a,m,void 0,e.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",c,-1,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSSTYLE",t,a,m,void 0,e.inGraphDataBordersStyle,"inGraphDataBordersStyle",c,-1,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,a,m,void 0,e.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",c,-1,{nullValue:!0}),"INGRAPHDATA"),t.fillTextMultiLine(g,0,0,t.textBaseline,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,m,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",c,-1,{nullValue:!0}),!0,e.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",f,u+labelRadius*Math.cos(posAngle),S-labelRadius*Math.sin(posAngle),c,-1),t.restore()}p.legendMsr.dispLegend&&drawLegend(p.legendMsr,a,e,t,"PolarArea")}function l(){for(var a=0;a<s.steps;a++)if(e.scaleShowLine&&(a+1)%e.scaleGridLinesStep==0&&(t.beginPath(),t.arc(u,S,o*(a+1),4*Math.PI-x,4*Math.PI-A,!0),t.strokeStyle=e.scaleLineColor,t.lineWidth=Math.ceil(t.chartLineScale*e.scaleLineWidth),t.setLineDash(lineStyleFn(e.scaleLineStyle)),t.stroke(),t.setLineDash([])),e.scaleShowLabels){Math.abs(e.totalAmplitude-360)<e.zeroValue?scaleAngle=Math.PI/2:scaleAngle=(x+A)/2,t.textAlign="center",t.font=e.scaleFontStyle+" "+Math.ceil(t.chartTextScale*e.scaleFontSize).toString()+"px "+e.scaleFontFamily;var i=s.labels[a+1];if(e.scaleShowLabelBackdrop){var l=t.measureTextMultiLine(i,Math.ceil(t.chartTextScale*e.scaleFontSize));t.fillStyle=e.scaleBackdropColor,t.beginPath(),t.rect(Math.round(u+Math.cos(scaleAngle)*(o*(a+1))-l/2-Math.ceil(t.chartSpaceScale*e.scaleBackdropPaddingX)),Math.round(S-Math.sin(scaleAngle)*(o*(a+1))-.5*Math.ceil(t.chartTextScale*e.scaleFontSize)-Math.ceil(t.chartSpaceScale*e.scaleBackdropPaddingY)),Math.round(l+2*Math.ceil(t.chartSpaceScale*e.scaleBackdropPaddingX)),Math.round(Math.ceil(t.chartTextScale*e.scaleFontSize)+2*Math.ceil(t.chartSpaceScale*e.scaleBackdropPaddingY))),t.fill()}t.textBaseline="middle",t.fillStyle=e.scaleFontColor,t.fillTextMultiLine(i,u+Math.cos(scaleAngle)*(o*(a+1)),S-Math.sin(scaleAngle)*(o*(a+1)),t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"SCALE_TEXTMOUSE",0,0,0,a,-1)}}function n(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=0;n<a.length;n++)"undefined"!=typeof a[n].value&&(1*a[n].value>i&&(i=1*a[n].value),1*a[n].value<l&&(l=1*a[n].value));l>i&&(i=0,l=0),Math.abs(i-l)<e.zeroValue&&(Math.abs(i)<e.zeroValue&&(i=.9),i>0?(i=1.1*i,l=.9*l):(i=.9*i,l=1.1*l)),"function"==typeof e.graphMin?l=setOptionValue(!0,1,"GRAPHMIN",t,a,m,void 0,e.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(e.graphMin)||(l=e.graphMin),"function"==typeof e.graphMax?i=setOptionValue(!0,1,"GRAPHMAX",t,a,m,void 0,e.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(e.graphMax)||(i=e.graphMax);var o=Math.floor(c/(.66*r)),s=Math.floor(c/r*.5);return l>i&&(l=i-1),{maxValue:i,minValue:l,maxSteps:o,minSteps:s}}var o,s,r,c,h,d,p,u,S;if(t.tpchart="PolarArea",t.tpdata=1,init_and_start(t,a,e)){var g=((e.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),f=((e.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);f<=e.zeroValue&&(f=2*Math.PI);var x=(g-f+4*Math.PI)%(2*Math.PI),A=x+f,m=initPassVariableData_part1(a,e,t);if(h=n(),e.logarithmic=!1,e.logarithmic2=!1,d=e.scaleShowLabels?e.scaleLabel:"",e.scaleOverride){var M=setOptionValue(!0,1,"SCALESTARTVALUE",t,a,m,void 0,e.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),P=setOptionValue(!0,1,"SCALESTEPS",t,a,m,void 0,e.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),T=setOptionValue(!0,1,"SCALESTEPWIDTH",t,a,m,void 0,e.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});s={steps:P,stepValue:T,graphMin:M,graphMax:M+P*T,labels:[]},populateLabels(1,e,d,s.labels,s.steps,M,s.graphMax,T),p=setMeasures(a,e,t,t.canvas.height,t.canvas.width,s.labels,null,!0,!1,!1,!1,!0,"PolarArea")}else s=calculateScale(1,e,h.maxSteps,h.minSteps,h.maxValue,h.minValue,d),p=setMeasures(a,e,t,t.canvas.height,t.canvas.width,s.labels,null,!0,!1,!1,!1,!0,"PolarArea");var v=s.graphMin+s.steps*s.stepValue,D=calculatePieDrawingSize(t,p,e,a,m);return u=D.midPieX,S=D.midPieY,o=Math.floor(D.radius/s.steps),o>0?(initPassVariableData_part2(m,a,e,t,{midPosX:u,midPosY:S,int_radius:0,ext_radius:o*s.steps,calculatedScale:s,scaleHop:o,outerVal:v}),animationLoop(e,l,i,t,p.clrx,p.clry,p.clrwidth,p.clrheight,u,S,u-(Min([p.availableHeight,p.availableWidth])/2-5),S+(Min([p.availableHeight,p.availableWidth])/2-5),a,m)):(testRedraw(t,a,e),t.firstPass=9),{data:a,config:e,ctx:t}}},Radar=function(a,e,t){function i(i){var l=2*Math.PI/a.datasets[0].data.length;t.save();for(var n=0;n<a.datasets.length;n++){for(var o=-1,s=0;s<a.datasets[n].data.length;s++){var r=animationCorrection(i,a,e,n,s,!1).animVal;r>1&&(r-=1),"undefined"!=typeof a.datasets[n].data[s]&&(-1==o?(t.beginPath(),t.moveTo(g+r*x[n][s].offsetX,f-r*x[n][s].offsetY),o=s):t.lineTo(g+r*x[n][s].offsetX,f-r*x[n][s].offsetY))}if(t.closePath(),e.datasetFill?t.fillStyle=setOptionValue(!0,1,"COLOR",t,a,x,a.datasets[n].fillColor,e.defaultFillColor,"fillColor",n,-1,{animationValue:r,midPosX:x[n][0].midPosX,midPosY:x[n][0].midPosY,ext_radius:(e.animationLeftToRight?1:r)*x[n][0].calculated_offset_max}):t.fillStyle="rgba(0,0,0,0)",t.strokeStyle=setOptionValue(!0,1,"STROKECOLOR",t,a,x,a.datasets[n].strokeColor,e.defaultStrokeColor,"strokeColor",n,-1,{nullvalue:null}),t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,1,"LINEWIDTH",t,a,x,a.datasets[n].datasetStrokeWidth,e.datasetStrokeWidth,"datasetStrokeWidth",n,-1,{nullvalue:null})),t.fill(),t.setLineDash(lineStyleFn(setOptionValue(!0,1,"LINEDASH",t,a,x,a.datasets[n].datasetStrokeStyle,e.datasetStrokeStyle,"datasetStrokeStyle",n,s,{nullvalue:null}))),t.stroke(),t.setLineDash([]),i>=e.animationStopValue){t.beginPath();for(var c=0;c<a.datasets[n].data.length;c++)if("undefined"!=typeof a.datasets[n].data[c]&&setOptionValue(!0,1,"POINTDOT",t,a,x,void 0,e.pointDot,"pointDot",n,c,{nullvalue:null})){t.beginPath(),t.fillStyle=setOptionValue(!0,1,"MARKERFILLCOLOR",t,a,x,a.datasets[n].pointColor,e.defaultStrokeColor,"pointColor",n,c,{nullvalue:!0}),t.strokeStyle=setOptionValue(!0,1,"MARKERSTROKESTYLE",t,a,x,a.datasets[n].pointStrokeColor,e.defaultStrokeColor,"pointStrokeColor",n,c,{nullvalue:!0}),t.lineWidth=setOptionValue(!0,t.chartLineScale,"MARKERLINEWIDTH",t,a,x,a.datasets[n].pointDotStrokeWidth,e.pointDotStrokeWidth,"pointDotStrokeWidth",n,c,{nullvalue:!0});var h=setOptionValue(!0,1,"MARKERSHAPE",t,a,x,a.datasets[n].markerShape,e.markerShape,"markerShape",n,c,{nullvalue:!0}),d=setOptionValue(!0,t.chartSpaceScale,"MARKERRADIUS",t,a,x,a.datasets[n].pointDotRadius,e.pointDotRadius,"pointDotRadius",n,c,{nullvalue:!0}),p=setOptionValue(!0,1,"MARKERSTROKESTYLE",t,a,x,a.datasets[n].pointDotStrokeStyle,e.pointDotStrokeStyle,"pointDotStrokeStyle",n,c,{nullvalue:!0});drawMarker(t,g+r*x[n][c].offsetX,f-r*x[n][c].offsetY,h,d,p)}}}if(t.restore(),i>=e.animationStopValue)for(n=0;n<a.datasets.length;n++)for(s=0;s<a.datasets[n].data.length;s++)if("undefined"!=typeof a.datasets[n].data[s]&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["POINT",n,s,x,setOptionValue(!0,1,"ANNOTATEDISPLAY",t,a,x,a.datasets[n].annotateDisplay,e.annotateDisplay,"annotateDisplay",n,s,{nullValue:!0})],setOptionValue(!0,1,"INGRAPHDATASHOW",t,a,x,a.datasets[n].inGraphDataShow,e.inGraphDataShow,"inGraphDataShow",n,s,{nullValue:!0}))){t.save(),t.beginPath(),t.textAlign=setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,x,void 0,e.inGraphDataAlign,"inGraphDataAlign",n,s,{nullValue:!0}),t.textBaseline=setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,x,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",n,s,{nullValue:!0}),"off-center"==setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,x,void 0,e.inGraphDataAlign,"inGraphDataAlign",n,s,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,x,void 0,e.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})||(e.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(e.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="left":t.textAlign="right":"to-center"==setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,x,void 0,e.inGraphDataAlign,"inGraphDataAlign",n,s,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,x,void 0,e.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})||(e.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(e.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)<Math.PI/2?t.textAlign="right":t.textAlign="left":t.textAlign=setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,x,void 0,e.inGraphDataAlign,"inGraphDataAlign",n,s,{nullValue:!0}),"off-center"==setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,x,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",n,s,{nullValue:!0})?(e.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="bottom":t.textBaseline="top":"to-center"==setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,x,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",n,s,{nullValue:!0})?(e.startAngle*Math.PI/180-s*l+4*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="top":t.textBaseline="bottom":t.textBaseline=setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,x,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",n,s,{nullValue:!0}),t.font=setOptionValue(!0,1,"INGRAPHDATAFONTSTYLE",t,a,x,void 0,e.inGraphDataFontStyle,"inGraphDataFontStyle",n,s,{nullValue:!0})+" "+setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,x,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",n,s,{nullValue:!0})+"px "+setOptionValue(!0,1,"INGRAPHDATAFONTFAMILY",t,a,x,void 0,e.inGraphDataFontFamily,"inGraphDataFontFamily",n,s,{nullValue:!0}),t.fillStyle=setOptionValue(!0,1,"INGRAPHDATAFONTCOLOR",t,a,x,void 0,e.inGraphDataFontColor,"inGraphDataFontColor",n,s,{nullValue:!0});var u;1==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,x,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",n,s,{nullValue:!0})?u=0+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,x,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",n,s,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,x,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",n,s,{nullValue:!0})?u=x[n][s].calculated_offset/2+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,x,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",n,s,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,x,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",n,s,{nullValue:!0})&&(u=x[n][s].calculated_offset+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,x,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",n,s,{nullValue:!0}));var A,m;x[n][s].calculated_offset>0?(A=g+x[n][s].offsetX*(u/x[n][s].calculated_offset),m=f-x[n][s].offsetY*(u/x[n][s].calculated_offset)):(A=g,m=f),t.translate(A,m);var M=0;M="inRadiusAxis"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,x,void 0,e.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})?s*l:"inRadiusAxisRotateLabels"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,x,void 0,e.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})?(s*l+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(s*l+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI+s*l:2*Math.PI+s*l:setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,x,void 0,e.inGraphDataRotate,"inGraphDataRotate",n,s,{nullValue:!0})*(Math.PI/180),t.rotate(M);var P=tmplbis(setOptionValue(!0,1,"INGRAPHDATATMPL",t,a,x,void 0,e.inGraphDataTmpl,"inGraphDataTmpl",n,s,{nullValue:!0}),x[n][s],e);setTextBordersAndBackground(t,P,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,x,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",n,s,{nullValue:!0}),0,0,setOptionValue(!0,1,"INGRAPHDATABORDERS",t,a,x,void 0,e.inGraphDataBorders,"inGraphDataBorders",n,s,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSCOLOR",t,a,x,void 0,e.inGraphDataBordersColor,"inGraphDataBordersColor",n,s,{nullValue:!0}),setOptionValue(!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,a,x,void 0,e.inGraphDataBordersWidth,"inGraphDataBordersWidth",n,s,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,a,x,void 0,e.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",n,s,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,a,x,void 0,e.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",n,s,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSSTYLE",t,a,x,void 0,e.inGraphDataBordersStyle,"inGraphDataBordersStyle",n,s,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,a,x,void 0,e.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",n,s,{nullValue:!0}),"INGRAPHDATA"),t.fillTextMultiLine(P,0,0,t.textBaseline,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,x,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",n,s,{nullValue:!0}),!0,e.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",M,A,m,n,s),t.restore()}S.legendMsr.dispLegend&&drawLegend(S.legendMsr,a,e,t,"Radar")}function l(){var i=2*Math.PI/a.datasets[0].data.length;if(t.save(),t.translate(g,f),t.rotate((90-e.startAngle)*Math.PI/180),e.angleShowLineOut){t.strokeStyle=e.angleLineColor,t.lineWidth=Math.ceil(t.chartLineScale*e.angleLineWidth);for(var l=0;l<a.datasets[0].data.length;l++)t.rotate(i),t.beginPath(),t.moveTo(0,0),t.lineTo(0,-s),t.setLineDash(lineStyleFn(setOptionValue(!0,1,"ANGLELINESTYLE",t,a,x,void 0,e.angleLineStyle,"angleLineStyle",l,-1,{nullValue:!0}))),t.stroke(),t.setLineDash([])}for(var n=0;n<c.steps;n++)if(t.beginPath(),e.scaleShowLine&&(n+1)%e.scaleGridLinesStep==0){t.strokeStyle=e.scaleLineColor,t.lineWidth=Math.ceil(t.chartLineScale*e.scaleLineWidth),t.moveTo(0,-r*(n+1));for(var o=0;o<a.datasets[0].data.length;o++)t.rotate(i),t.lineTo(0,-r*(n+1));t.closePath(),t.setLineDash(lineStyleFn(e.scaleLineStyle)),t.stroke(),t.setLineDash([])}if(t.rotate(-(90-e.startAngle)*Math.PI/180),e.scaleShowLabels)for(n=0;n<c.steps;n++){if(t.textAlign="center",t.font=e.scaleFontStyle+" "+Math.ceil(t.chartTextScale*e.scaleFontSize).toString()+"px "+e.scaleFontFamily,t.textBaseline="middle",e.scaleShowLabelBackdrop){var h=t.measureTextMultiLine(c.labels[n+1],Math.ceil(t.chartTextScale*e.scaleFontSize)).textWidth;t.fillStyle=e.scaleBackdropColor,t.beginPath(),t.rect(Math.round(Math.cos(e.startAngle*Math.PI/180)*(r*(n+1))-h/2-Math.ceil(t.chartSpaceScale*e.scaleBackdropPaddingX)),Math.round(-Math.sin(e.startAngle*Math.PI/180)*r*(n+1)-.5*Math.ceil(t.chartTextScale*e.scaleFontSize)-Math.ceil(t.chartSpaceScale*e.scaleBackdropPaddingY)),Math.round(h+2*Math.ceil(t.chartSpaceScale*e.scaleBackdropPaddingX)),Math.round(Math.ceil(t.chartTextScale*e.scaleFontSize)+2*Math.ceil(t.chartSpaceScale*e.scaleBackdropPaddingY))),t.fill()}t.fillStyle=e.scaleFontColor,t.fillTextMultiLine(c.labels[n+1],Math.cos(e.startAngle*Math.PI/180)*(r*(n+1)),-Math.sin(e.startAngle*Math.PI/180)*r*(n+1),t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"SCALE_TEXTMOUSE",0,g,f,n,-1)}for(var d=0;d<a.labels.length;d++){t.font=e.pointLabelFontStyle+" "+Math.ceil(t.chartTextScale*e.pointLabelFontSize).toString()+"px "+e.pointLabelFontFamily,t.fillStyle=e.pointLabelFontColor;for(var p=Math.sin((90-e.startAngle)*Math.PI/180+i*d)*(s+Math.ceil(t.chartTextScale*e.pointLabelFontSize)),u=Math.cos((90-e.startAngle)*Math.PI/180+i*d)*(s+Math.ceil(t.chartTextScale*e.pointLabelFontSize)),S=(90-e.startAngle)*Math.PI/180+i*d;0>S;)S+=2*Math.PI;for(;S>2*Math.PI;)S-=2*Math.PI;S==Math.PI||0==S?t.textAlign="center":S>Math.PI?t.textAlign="right":t.textAlign="left",t.textBaseline="middle",t.fillTextMultiLine(a.labels[d],p,-u,t.textBaseline,Math.ceil(t.chartTextScale*e.pointLabelFontSize),!0,e.detectMouseOnText,t,"LABEL_TEXTMOUSE",0,g,f,d,-1)}t.restore()}function n(){var i,l,n,o,r,c,d,p,u,f,x=2*Math.PI/a.datasets[0].data.length,A=e.startAngle*Math.PI/180;if(t.font=e.pointLabelFontStyle+" "+Math.ceil(t.chartTextScale*e.pointLabelFontSize).toString()+"px "+e.pointLabelFontFamily,e.graphMaximized)for(o=S.availableWidth/2,n=S.availableWidth/2,c=40,u=0;u<a.labels.length;u++)f=t.measureTextMultiLine(a.labels[u],Math.ceil(t.chartTextScale*e.scaleFontSize)).textWidth+t.measureTextMultiLine(a.labels[u],Math.ceil(t.chartTextScale*e.scaleFontSize)).textHeight,l=(S.availableWidth-f)/(1+Math.abs(Math.cos(A))),A<Math.PI/2&&A>-Math.PI/2||A>3*Math.PI/2?o>l&&(o=l):0!=Math.cos(A)&&n>l&&(n=l),A-=x;else o=S.availableWidth/2,n=S.availableWidth/2,c=1;for(d=0,p=0,g=o+S.leftNotUsableSize,i=o,r=0;c>r;++r,i+=(S.availableWidth-n-o)/c){for(s=Max([i,S.availableWidth-i]),A=e.startAngle*Math.PI/180,l=S.available,u=0;u<a.labels.length;u++)f=t.measureTextMultiLine(a.labels[u],Math.ceil(t.chartTextScale*e.scaleFontSize)).textWidth+t.measureTextMultiLine(a.labels[u],Math.ceil(t.chartTextScale*e.scaleFontSize)).textHeight,A<Math.PI/2&&A>-Math.PI/2||A>3*Math.PI/2?l=(S.availableWidth-i-f)/Math.abs(Math.cos(A)):Math.cos(0!=A)&&(l=(i-f)/Math.abs(Math.cos(A))),s>l&&(s=l),Math.sin(A)*S.availableHeight/2>S.availableHeight/2-2*Math.ceil(t.chartTextScale*e.scaleFontSize)&&(l=Math.sin(A)*S.availableHeight/2-1.5*Math.ceil(t.chartTextScale*e.scaleFontSize),s>l&&(s=l)),A-=x;s>d&&(d=s,g=i+S.leftNotUsableSize)}s=d-Math.ceil(t.chartTextScale*e.scaleFontSize)/2,h=Default(h,5)}function o(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=0;n<a.datasets.length;n++)for(var o=0;o<a.datasets[n].data.length;o++)"undefined"!=typeof a.datasets[n].data[o]&&(1*a.datasets[n].data[o]>i&&(i=1*a.datasets[n].data[o]),1*a.datasets[n].data[o]<l&&(l=1*a.datasets[n].data[o]));l>i&&(i=0,l=0),Math.abs(i-l)<e.zeroValue&&(Math.abs(i)<e.zeroValue&&(i=.9,l=-.9),i>0?(i=1.1*i,l=.9*l):(i=.9*i,l=1.1*l)),"function"==typeof e.graphMin?l=setOptionValue(!0,1,"GRAPHMIN",t,a,x,void 0,e.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(e.graphMin)||(l=e.graphMin),"function"==typeof e.graphMax?i=setOptionValue(!0,1,"GRAPHMAX",t,a,x,void 0,e.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(e.graphMax)||(i=e.graphMax);var s=Math.floor(d/(.66*h)),r=Math.floor(d/h*.5);return l>i&&(l=i-1),{maxValue:i,minValue:l,maxSteps:s,minSteps:r}}var s,r,c,h,d,p,u,S,g,f;if(t.tpchart="Radar",t.tpdata=0,init_and_start(t,a,e)){var x=initPassVariableData_part1(a,e,t);if(p=o(),e.logarithmic=!1,e.logarithmic2=!1,a.labels||(a.labels=[]),u=e.scaleShowLabels?e.scaleLabel:"",e.scaleOverride){var A=setOptionValue(!0,1,"SCALESTARTVALUE",t,a,x,void 0,e.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),m=setOptionValue(!0,1,"SCALESTEPS",t,a,x,void 0,e.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),M=setOptionValue(!0,1,"SCALESTEPWIDTH",t,a,x,void 0,e.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});c={steps:m,stepValue:M,graphMin:A,graphMax:A+m*M,labels:[]},populateLabels(1,e,u,c.labels,c.steps,A,c.graphMax,M),S=setMeasures(a,e,t,t.canvas.height,t.canvas.width,c.labels,null,!0,!1,!1,!0,e.datasetFill,"Radar")}else c=calculateScale(1,e,p.maxSteps,p.minSteps,p.maxValue,p.minValue,u),S=setMeasures(a,e,t,t.canvas.height,t.canvas.width,c.labels,null,!0,!1,!1,!0,e.datasetFill,"Radar");return n(),f=S.topNotUsableSize+S.availableHeight/2,r=s/c.steps,initPassVariableData_part2(x,a,e,t,{midPosX:g,midPosY:f,calculatedScale:c,scaleHop:r,maxSize:s,outerVal:-1}),animationLoop(e,l,i,t,S.clrx,S.clry,S.clrwidth,S.clrheight,g,f,g-s,f+s,a,x),{data:a,config:e,ctx:t}}},Pie=function(a,e,t){return t.tpchart="Pie",Doughnut(a,e,t)},Doughnut=function(a,e,t){function i(i){var c,d,p=(((-e.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),r[0].firstAngle),u=0,S=r[0].firstAngle;1*e.animationStartWithData>1&&1*e.animationStartWithData-1<a.length&&(u=r[e.animationStartWithData-1].startAngle-r[0].firstAngle,S=r[e.animationStartWithData-1].startAngle);for(var g=0;g<a.length;g++){var f=1,x=1;if(c="Pie"==t.tpchart?h:h-(s-h)*setOptionValue(!0,1,"EXPANDINRADIUS",t,a,r,a[g].expandInRadius,0,"expandInRadius",g,-1,{animationDecimal:i,scaleAnimation:f}),d=s+(s-h)*setOptionValue(!0,1,"EXPANDOUTRADIUS",t,a,r,a[g].expandOutRadius,0,"expandOutRadius",g,-1,{animationDecimal:i,scaleAnimation:f}),e.animation&&(e.animateScale&&(f=i),e.animateRotate&&(x=i)),correctedRotateAnimation=animationCorrection(x,a,e,g,-1,!1).mainVal,"undefined"!=typeof a[g].value&&1*a[g].value>=0){if(t.beginPath(),t.lineWidth=Math.ceil(t.chartLineScale*e.segmentStrokeWidth),t.strokeStyle="rgba(0,0,0,0)","ByArc"==e.animationByData)endAngle=r[g].startAngle+correctedRotateAnimation*r[g].segmentAngle,t.arc(n,o,f*d,r[g].startAngle,endAngle,!1),t.arc(n,o,f*c,endAngle,r[g].startAngle,!0);else if(e.animationByData)if(g<1*e.animationStartWithData-1)t.arc(n,o,f*d,r[g].startAngle,r[g].endAngle,!1),t.arc(n,o,f*c,r[g].endAngle,r[g].startAngle,!0);else{if(!(r[g].startAngle<=S+correctedRotateAnimation*(2*Math.PI-u)))continue;endAngle=r[g].endAngle,r[g].endAngle>S+correctedRotateAnimation*(2*Math.PI-u)&&(endAngle=S+correctedRotateAnimation*(2*Math.PI-u)),t.arc(n,o,f*d,r[g].startAngle,endAngle,!1),t.arc(n,o,f*c,endAngle,r[g].startAngle,!0)}else t.arc(n,o,f*d,p,p+correctedRotateAnimation*(r[g].endAngle-r[g].startAngle),!1),t.arc(n,o,f*c,p+correctedRotateAnimation*(r[g].endAngle-r[g].startAngle),p,!0),p+=correctedRotateAnimation*(r[g].endAngle-r[g].startAngle);t.closePath(),t.fillStyle=setOptionValue(!0,1,"COLOR",t,a,r,a[g].color,e.defaultFillColor,"color",g,-1,{animationDecimal:i,scaleAnimation:f}),t.fill(),"merge"==e.segmentShowStroke?(t.lineWidth=1.5,t.strokeStyle=setOptionValue(!0,1,"COLOR",t,a,r,a[g].color,e.defaultFillColor,"color",g,-1,{animationDecimal:i,scaleAnimation:f}),t.setLineDash([]),t.stroke()):e.segmentShowStroke&&(t.lineWidth=Math.ceil(t.chartLineScale*e.segmentStrokeWidth),t.strokeStyle=e.segmentStrokeColor,t.setLineDash(lineStyleFn(setOptionValue(!0,1,"SEGMENTSTROKESTYLE",t,a,r,a[g].segmentStrokeStyle,e.segmentStrokeStyle,"segmentStrokeStyle",g,-1,{animationDecimal:i,scaleAnimation:f}))),t.stroke(),t.setLineDash([]))}}if(i>=e.animationStopValue)for(g=0;g<a.length;g++)if("Pie"==t.tpchart?dataCutOutRadius=h:c=h-(s-h)*setOptionValue(!0,1,"EXPANDINRADIUS",t,a,r,a[g].expandInRadius,0,"expandInRadius",g,-1,{animationDecimal:i,scaleAnimation:f}),d=s+(s-h)*setOptionValue(!0,1,"EXPANDOUTRADIUS",t,a,r,a[g].expandOutRadius,0,"expandOutRadius",g,-1,{animationDecimal:i,scaleAnimation:f}),!("undefined"==typeof a[g].value||1*a[g].value<0)&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["ARC",g,-1,r,setOptionValue(!0,1,"ANNOTATEDISPLAY",t,a,r,a[g].annotateDisplay,e.annotateDisplay,"annotateDisplay",g,-1,{nullValue:!0})],setOptionValue(!0,1,"INGRAPHDATASHOW",t,a,r,a[g].inGraphDataShow,e.inGraphDataShow,"inGraphDataShow",g,-1,{nullValue:!0})&&r[g].segmentAngle>=Math.PI/180*setOptionValue(!0,1,"INGRAPHDATAMINIMUMANGLE",t,a,r,void 0,e.inGraphDataMinimumAngle,"inGraphDataMinimumAngle",g,-1,{nullValue:!0}))){1==setOptionValue(!0,1,"INGRAPHDATAANGLEPOSITION",t,a,r,void 0,e.inGraphDataAnglePosition,"inGraphDataAnglePosition",g,-1,{nullValue:!0})?posAngle=r[g].realStartAngle+setOptionValue(!0,1,"INGRAPHDATAPADDINANGLE",t,a,r,void 0,e.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",g,-1,{nullValue:!0})*(Math.PI/180):2==setOptionValue(!0,1,"INGRAPHDATAANGLEPOSITION",t,a,r,void 0,e.inGraphDataAnglePosition,"inGraphDataAnglePosition",g,-1,{nullValue:!0})?posAngle=r[g].realStartAngle-r[g].segmentAngle/2+setOptionValue(!0,1,"INGRAPHDATAPADDINANGLE",t,a,r,void 0,e.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",g,-1,{nullValue:!0})*(Math.PI/180):3==setOptionValue(!0,1,"INGRAPHDATAANGLEPOSITION",t,a,r,void 0,e.inGraphDataAnglePosition,"inGraphDataAnglePosition",g,-1,{nullValue:!0})&&(posAngle=r[g].realStartAngle-r[g].segmentAngle+setOptionValue(!0,1,"INGRAPHDATAPADDINANGLE",t,a,r,void 0,e.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",g,-1,{nullValue:!0})*(Math.PI/180)),1==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,r,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",g,-1,{nullValue:!0})?labelRadius=c+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,r,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",g,-1,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,r,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",g,-1,{nullValue:!0})?labelRadius=c+(d-c)/2+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,r,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",g,-1,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATARADIUSPOSITION",t,a,r,void 0,e.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",g,-1,{nullValue:!0})&&(labelRadius=d+setOptionValue(!0,1,"INGRAPHDATAPADDINGRADIUS",t,a,r,void 0,e.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",g,-1,{nullValue:!0})),t.save(),"off-center"==setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,r,void 0,e.inGraphDataAlign,"inGraphDataAlign",g,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,r,void 0,e.inGraphDataRotate,"inGraphDataRotate",g,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="left":t.textAlign="right":"to-center"==setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,r,void 0,e.inGraphDataAlign,"inGraphDataAlign",g,-1,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,r,void 0,e.inGraphDataRotate,"inGraphDataRotate",g,-1,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?t.textAlign="right":t.textAlign="left":t.textAlign=setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,r,void 0,e.inGraphDataAlign,"inGraphDataAlign",g,-1,{nullValue:!0}),"off-center"==setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,r,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",g,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="top":t.textBaseline="bottom":"to-center"==setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,r,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",g,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?t.textBaseline="bottom":t.textBaseline="top":t.textBaseline=setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,r,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",g,-1,{nullValue:!0}),t.font=setOptionValue(!0,1,"INGRAPHDATAFONTSTYLE",t,a,r,void 0,e.inGraphDataFontStyle,"inGraphDataFontStyle",g,-1,{nullValue:!0})+" "+setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,r,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",g,-1,{nullValue:!0})+"px "+setOptionValue(!0,1,"INGRAPHDATAFONTFAMILY",t,a,r,void 0,e.inGraphDataFontFamily,"inGraphDataFontFamily",g,-1,{nullValue:!0}),t.fillStyle=setOptionValue(!0,1,"INGRAPHDATAFONTCOLOR",t,a,r,void 0,e.inGraphDataFontColor,"inGraphDataFontColor",g,-1,{nullValue:!0});var A=tmplbis(setOptionValue(!0,1,"INGRAPHDATATMPL",t,a,r,void 0,e.inGraphDataTmpl,"inGraphDataTmpl",g,-1,{nullValue:!0}),r[g],e);t.translate(n+labelRadius*Math.cos(posAngle),o-labelRadius*Math.sin(posAngle));var m=0;m="inRadiusAxis"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,r,void 0,e.inGraphDataRotate,"inGraphDataRotate",g,-1,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,r,void 0,e.inGraphDataRotate,"inGraphDataRotate",g,-1,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,r,void 0,e.inGraphDataRotate,"inGraphDataRotate",g,-1,{nullValue:!0})*(Math.PI/180),t.rotate(m),setTextBordersAndBackground(t,A,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,r,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",g,-1,{nullValue:!0}),0,0,setOptionValue(!0,1,"INGRAPHDATABORDERS",t,a,r,void 0,e.inGraphDataBorders,"inGraphDataBorders",g,-1,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSCOLOR",t,a,r,void 0,e.inGraphDataBordersColor,"inGraphDataBordersColor",g,-1,{nullValue:!0}),setOptionValue(!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,a,r,void 0,e.inGraphDataBordersWidth,"inGraphDataBordersWidth",g,-1,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,a,r,void 0,e.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",g,-1,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,a,r,void 0,e.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",g,-1,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSSTYLE",t,a,r,void 0,e.inGraphDataBordersStyle,"inGraphDataBordersStyle",g,-1,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,a,r,void 0,e.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",g,-1,{nullValue:!0}),"INGRAPHDATA"),t.fillTextMultiLine(A,0,0,t.textBaseline,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,r,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",g,-1,{nullValue:!0}),!0,e.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",m,n+labelRadius*Math.cos(posAngle),o-labelRadius*Math.sin(posAngle),g,-1),t.restore()}l.legendMsr.dispLegend&&drawLegend(l.legendMsr,a,e,t,"Doughnut")}var l,n,o,s;if("undefined"==typeof t.tpchart&&(t.tpchart="Doughnut"),t.tpdata=1,init_and_start(t,a,e)){var r=initPassVariableData_part1(a,e,t);((e.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);e.logarithmic=!1,e.logarithmic2=!1,l=setMeasures(a,e,t,t.canvas.height,t.canvas.width,"none",null,!0,!1,!1,!1,!0,"Doughnut");var c=calculatePieDrawingSize(t,l,e,a,r);n=c.midPieX,o=c.midPieY,s=c.radius;var h;return h="Pie"==t.tpchart?0:s*(e.percentageInnerCutout/100),s>0?(initPassVariableData_part2(r,a,e,t,{midPosX:n,midPosY:o,int_radius:h,ext_radius:s,outerVal:-1}),animationLoop(e,null,i,t,l.clrx,l.clry,l.clrwidth,l.clrheight,n,o,n-s,o+s,a,r)):(testRedraw(t,a,e),t.firstPass=9),{data:a,config:e,ctx:t}}},Line=function(data,config,ctx){function drawLines(a){
drawLinesDataset(a,data,config,ctx,statData,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1}),a>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,statData:statData}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Line")}function drawScale(){if(config.drawXScaleLine!==!1)for(var a=0;a<config.drawXScaleLine.length;a++){ctx.lineWidth=config.drawXScaleLine[a].lineWidth?config.drawXScaleLine[a].lineWidth:Math.ceil(ctx.chartLineScale*config.scaleLineWidth),ctx.strokeStyle=config.drawXScaleLine[a].lineColor?config.drawXScaleLine[a].lineColor:config.scaleLineColor,ctx.beginPath();var e;switch(config.drawXScaleLine[a].position){case"bottom":e=xAxisPosY;break;case"top":e=xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);break;case"0":case 0:0!=zeroY&&(e=xAxisPosY-zeroY)}ctx.moveTo(yAxisPosX-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),e),ctx.lineTo(yAxisPosX+msr.availableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),e),ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.stroke(),ctx.setLineDash([])}for(var t=0;t<data.labels.length;t++)ctx.beginPath(),ctx.moveTo(yAxisPosX+t*valueHop,xAxisPosY+Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth),ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&t>0&&t%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+t*valueHop,xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)):ctx.lineTo(yAxisPosX+t*valueHop,xAxisPosY),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle)),ctx.stroke(),ctx.setLineDash([]);ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleLineWidth),ctx.strokeStyle=config.scaleLineColor,ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)),ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.stroke(),ctx.setLineDash([]);for(var i=0;i<calculatedScale.steps;i++)ctx.beginPath(),ctx.moveTo(yAxisPosX-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY-(i+1)*scaleHop),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth),ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&(i+1)%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),xAxisPosY-(i+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(i+1)*scaleHop),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle)),ctx.stroke(),ctx.setLineDash([])}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+Math.ceil(ctx.chartTextScale*config.scaleFontSize).toString()+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var a=0;a<data.labels.length;a++)showLabels(ctx,data,config,a)&&(ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+a*valueHop-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-(msr.rotateLabels*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+a*valueHop-msr.highestXLabel/2,msr.xLabelPos,a,-1)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),yAxisPosX+a*valueHop,msr.xLabelPos,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",0,0,0,a,-1),ctx.restore());ctx.textAlign="right",ctx.textBaseline="middle";for(var e=config.showYAxisMin?-1:0;e<calculatedScale.steps;e++)config.scaleShowLabels&&showYLabels(ctx,data,config,e+1,calculatedScale.labels[e+1])&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[e+1],yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(e+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,e)),config.yAxisRight&&!valueBounds.dbAxis&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[e+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(e+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,e)));if(config.yAxisRight&&valueBounds.dbAxis)for(e=config.showYAxisMin?-1:0;e<calculatedScale2.steps;e++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[e+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(e+1)*scaleHop2,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,e))}function getValueBounds(){for(var upperValue=-Number.MAX_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=-Number.MAX_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,mathValueHeight,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeightVal=window[mathFctName](parameter)}else mathValueHeightVal=0;for(var j=0;j<data.datasets[i].data.length;j++)mathValueHeight="object"==typeof mathValueHeightVal?mathValueHeightVal[Math.min(mathValueHeightVal.length,j)]:mathValueHeightVal,"undefined"!=typeof data.datasets[i].data[j]&&(2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)))}lowerValue>upperValue&&(upperValue=0,lowerValue=0),Math.abs(upperValue-lowerValue)<config.zeroValue&&(Math.abs(upperValue)<config.zeroValue&&(upperValue=.9),upperValue>0?(upperValue=1.1*upperValue,lowerValue=.9*lowerValue):(upperValue=.9*upperValue,lowerValue=1.1*lowerValue)),"function"==typeof config.graphMin?lowerValue=setOptionValue(!0,1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(config.graphMin)||(lowerValue=config.graphMin),"function"==typeof config.graphMax?upperValue=setOptionValue(!0,1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(lowerValue2>upperValue2&&(upperValue2=0,lowerValue2=0),Math.abs(upperValue2-lowerValue2)<config.zeroValue&&(Math.abs(upperValue2)<config.zeroValue&&(upperValue2=.9),upperValue2>0?(upperValue2=1.1*upperValue2,lowerValue2=.9*lowerValue2):(upperValue2=.9*upperValue2,lowerValue2=1.1*lowerValue2)),"function"==typeof config.graphMin2?lowerValue2=setOptionValue(!0,1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin2,"graphMin2",-1,-1,{nullValue:!0}):isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),"function"==typeof config.graphMax2?upperValue2=setOptionValue(!0,1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax2,"graphMax2",-1,-1,{nullValue:!0}):isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=Math.ceil(ctx.chartTextScale*config.scaleFontSize),scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return lowerValue>upperValue&&(lowerValue=upperValue-1),lowerValue2>upperValue2&&(lowerValue2=upperValue2-1),{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0,msr,zeroY=0,zeroY2=0;if(ctx.tpchart="Line",ctx.tpdata=0,init_and_start(ctx,data,config)){for(var mxlgt=0,i=0;i<data.datasets.length;i++)mxlgt=Max([mxlgt,data.datasets[i].data.length]);if(1==mxlgt){for("string"==typeof data.labels[0]&&(data.labels=["",data.labels[0],""]),i=0;i<data.datasets.length;i++)data.datasets[i].data=[void 0,data.datasets[i].data[0],void 0];mxlgt=3}var statData=initPassVariableData_part1(data,config,ctx);for(i=0;i<data.datasets.length;i++)statData[i][0].tpchart="Line";msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"nihil",[""],!1,!1,!0,!0,config.datasetFill,"Line"),valueBounds=getValueBounds(),config.logarithmic!==!1&&valueBounds.minValue<=0&&(config.logarithmic=!1),config.logarithmic2!==!1&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&4>OrderOfMagnitude||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&4>OrderOfMagnitude2||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride){var scaleStartValue=setOptionValue(!0,1,"SCALESTARTVALUE",ctx,data,statData,void 0,config.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),scaleSteps=setOptionValue(!0,1,"SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue(!0,1,"SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});calculatedScale={steps:scaleSteps,stepValue:scaleStepWidth,graphMin:scaleStartValue,graphMax:scaleStartValue+scaleSteps*scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,scaleStartValue,calculatedScale.graphMax,scaleStepWidth)}else valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString));if(valueBounds.dbAxis)if(config.scaleOverride2){var scaleStartValue2=setOptionValue(!0,1,"SCALESTARTVALUE2",ctx,data,statData,void 0,config.scaleStartValue2,"scaleStartValue2",-1,-1,{nullValue:!0}),scaleSteps2=setOptionValue(!0,1,"SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:!0}),scaleStepWidth2=setOptionValue(!0,1,"SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,"scaleStepWidth2",-1,-1,{nullValue:!0});calculatedScale2={steps:scaleSteps2,stepValue:scaleStepWidth2,graphMin:scaleStartValue2,graphMax:scaleStartValue2+scaleSteps2*scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,scaleStartValue2,calculatedScale2.graphMax,scaleStepWidth2)}else valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString2));else calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null};if(valueBounds.maxSteps>0&&valueBounds.minSteps>0){msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,calculatedScale.labels,calculatedScale2.labels,!1,!1,!0,!0,config.datasetFill,"Line");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/(data.labels.length-1)),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/(data.labels.length-1)),msr.clrwidth=msr.clrwidth-(msr.availableWidth-(data.labels.length-1)*valueHop),msr.availableWidth=(data.labels.length-1)*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)-(prevHeight-msr.availableHeight),msr.clrheight+=Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY=msr.topNotUsableSize+msr.availableHeight+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),drawLabels(),zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop),"object"==typeof calculatedScale2&&(zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2)),initPassVariableData_part2(statData,data,config,ctx,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,logarithmic:config.logarithmic,scaleHop2:scaleHop2,zeroY2:zeroY2,msr:msr,calculatedScale2:calculatedScale2,logarithmic2:config.logarithmic2}),animationLoop(config,drawScale,drawLines,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData)}else testRedraw(ctx,data,config),ctx.firstPass=9;return{data:data,config:config,ctx:ctx}}},StackedBar=function(a,e,t){function i(i){for(var l=new Array,n=new Array,o=0;o<a.datasets.length;o++)if("Line"!=a.datasets[o].type)for(var s=0;s<a.datasets[o].data.length;s++){t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,1,"BARSTROKEWIDTH",t,a,A,a.datasets[o].barStrokeWidth,e.barStrokeWidth,"barStrokeWidth",o,s,{animationValue:r,xPosLeft:A[o][s].xPosLeft,yPosBottom:c,xPosRight:A[o][s].xPosRight,yPosTop:h}));var r=animationCorrection(i,a,e,o,s,!1).animVal;if(r>1&&(r-=1),"undefined"!=typeof a.datasets[o].data[s]&&1*a.datasets[o].data[s]!=0){"undefined"==typeof l[s]&&(l[s]=A[A[o][s].firstNotMissing][s].yPosBottom,n[s]=A[A[o][s].firstNotMissing][s].yPosBottom);var c,h;c=1*a.datasets[o].data[s]>0?l[s]:n[s],h=c+r*(A[o][s].yPosTop-A[o][s].yPosBottom),1*a.datasets[o].data[s]>0?l[s]=h:n[s]=h,t.fillStyle=setOptionValue(!0,1,"COLOR",t,a,A,a.datasets[o].fillColor,e.defaultFillColor,"fillColor",o,s,{animationValue:r,xPosLeft:A[o][s].xPosLeft,yPosBottom:c,xPosRight:A[o][s].xPosRight,yPosTop:h}),t.strokeStyle=setOptionValue(!0,1,"STROKECOLOR",t,a,A,a.datasets[o].strokeColor,e.defaultStrokeColor,"strokeColor",o,s,{nullvalue:null}),0!=r&&c!=h&&(t.beginPath(),t.moveTo(A[o][s].xPosLeft,c+(h-c)/2),t.lineTo(A[o][s].xPosLeft,h),t.lineTo(A[o][s].xPosRight,h),t.lineTo(A[o][s].xPosRight,c),t.lineTo(A[o][s].xPosLeft,c),t.lineTo(A[o][s].xPosLeft,c+(h-c)/2),e.barShowStroke&&(t.setLineDash(lineStyleFn(setOptionValue(!0,1,"STROKESTYLE",t,a,A,a.datasets[o].datasetStrokeStyle,e.datasetStrokeStyle,"datasetStrokeStyle",o,s,{nullvalue:null}))),t.stroke(),t.setLineDash([])),t.closePath(),t.fill())}}if(drawLinesDataset(i,a,e,t,A,{xAxisPosY:g,yAxisPosX:S,valueHop:u,nbValueHop:a.labels.length}),i>=e.animationStopValue){var d=0,p=0;for(o=0;o<a.datasets.length;o++)for(s=0;s<a.datasets[o].data.length;s++)if("undefined"!=typeof a.datasets[o].data[s]&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",o,s,A,setOptionValue(!0,1,"ANNOTATEDISPLAY",t,a,A,a.datasets[o].annotateDisplay,e.annotateDisplay,"annotateDisplay",o,s,{nullValue:!0})],setOptionValue(!0,1,"INGRAPHDATASHOW",t,a,A,a.datasets[o].inGraphDataShow,e.inGraphDataShow,"inGraphDataShow",o,s,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,A,void 0,e.inGraphDataAlign,"inGraphDataAlign",o,s,{nullValue:!0}),t.textBaseline=setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,A,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",o,s,{nullValue:!0}),t.font=setOptionValue(!0,1,"INGRAPHDATAFONTSTYLE",t,a,A,void 0,e.inGraphDataFontStyle,"inGraphDataFontStyle",o,s,{nullValue:!0})+" "+setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,A,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0})+"px "+setOptionValue(!0,1,"INGRAPHDATAFONTFAMILY",t,a,A,void 0,e.inGraphDataFontFamily,"inGraphDataFontFamily",o,s,{nullValue:!0}),t.fillStyle=setOptionValue(!0,1,"INGRAPHDATAFONTCOLOR",t,a,A,void 0,e.inGraphDataFontColor,"inGraphDataFontColor",o,s,{nullValue:!0});var m=tmplbis(setOptionValue(!0,1,"INGRAPHDATATMPL",t,a,A,void 0,e.inGraphDataTmpl,"inGraphDataTmpl",o,s,{nullValue:!0}),A[o][s],e);if(t.beginPath(),t.beginPath(),d=0,p=0,1==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",t,a,A,void 0,e.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})?p=A[o][s].xPosLeft+setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,a,A,void 0,e.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",t,a,A,void 0,e.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})?p=A[o][s].xPosLeft+f/2+setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,a,A,void 0,e.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",t,a,A,void 0,e.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})&&(p=A[o][s].xPosLeft+f+setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,a,A,void 0,e.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0})),1==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",t,a,A,void 0,e.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})?d=A[o][s].yPosBottom-setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,a,A,void 0,e.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",t,a,A,void 0,e.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})?d=(A[o][s].yPosTop+A[o][s].yPosBottom)/2-setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,a,A,void 0,e.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",t,a,A,void 0,e.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})&&(d=A[o][s].yPosTop-setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,a,A,void 0,e.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0})),d>x.topNotUsableSize){t.translate(p,d);var M=setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,A,void 0,e.inGraphDataRotate,"inGraphDataRotate",o,s,{nullValue:!0})*(Math.PI/180);t.rotate(M),setTextBordersAndBackground(t,m,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,A,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0}),0,0,setOptionValue(!0,1,"INGRAPHDATABORDERS",t,a,A,void 0,e.inGraphDataBorders,"inGraphDataBorders",o,s,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSCOLOR",t,a,A,void 0,e.inGraphDataBordersColor,"inGraphDataBordersColor",o,s,{nullValue:!0}),setOptionValue(!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,a,A,void 0,e.inGraphDataBordersWidth,"inGraphDataBordersWidth",o,s,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,a,A,void 0,e.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",o,s,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,a,A,void 0,e.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",o,s,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSSTYLE",t,a,A,void 0,e.inGraphDataBordersStyle,"inGraphDataBordersStyle",o,s,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,a,A,void 0,e.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",o,s,{nullValue:!0}),"INGRAPHDATA"),t.fillTextMultiLine(m,0,0,t.textBaseline,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,A,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0}),!0,e.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",M,p,d,o,s)}t.restore()}}x.legendMsr.dispLegend&&drawLegend(x.legendMsr,a,e,t,"StackedBar")}function l(){t.lineWidth=Math.ceil(t.chartLineScale*e.scaleLineWidth),t.strokeStyle=e.scaleLineColor,t.setLineDash(lineStyleFn(e.scaleLineStyle)),t.beginPath(),t.moveTo(S-Math.ceil(t.chartLineScale*e.scaleTickSizeLeft),g),t.lineTo(S+x.availableWidth+Math.ceil(t.chartLineScale*e.scaleTickSizeRight),g),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(e.scaleGridLineStyle));for(var i=0;i<a.labels.length;i++)t.beginPath(),t.moveTo(S+i*u,g+Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)),t.lineWidth=Math.ceil(t.chartLineScale*e.scaleGridLineWidth),t.strokeStyle=e.scaleGridLineColor,e.scaleShowGridLines&&i>0&&i%e.scaleXGridLinesStep==0?t.lineTo(S+i*u,g-x.availableHeight-Math.ceil(t.chartLineScale*e.scaleTickSizeTop)):t.lineTo(S+i*u,g),t.stroke();t.setLineDash([]),t.lineWidth=Math.ceil(t.chartLineScale*e.scaleLineWidth),t.strokeStyle=e.scaleLineColor,t.setLineDash(lineStyleFn(e.scaleLineStyle)),t.beginPath(),t.moveTo(S,g+Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)),t.lineTo(S,g-x.availableHeight-Math.ceil(t.chartLineScale*e.scaleTickSizeTop)),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(e.scaleGridLineStyle));for(var l=e.showYAxisMin?-1:0;l<r.steps;l++)t.beginPath(),t.moveTo(S-Math.ceil(t.chartLineScale*e.scaleTickSizeLeft),g-(l+1)*s),t.lineWidth=Math.ceil(t.chartLineScale*e.scaleGridLineWidth),t.strokeStyle=e.scaleGridLineColor,e.scaleShowGridLines&&(l+1)%e.scaleYGridLinesStep==0?t.lineTo(S+x.availableWidth+Math.ceil(t.chartLineScale*e.scaleTickSizeRight),g-(l+1)*s):t.lineTo(S,g-(l+1)*s),t.stroke();t.setLineDash([])}function n(){if(t.font=e.scaleFontStyle+" "+Math.ceil(t.chartTextScale*e.scaleFontSize).toString()+"px "+e.scaleFontFamily,(e.xAxisTop||e.xAxisBottom)&&(t.textBaseline="top",x.rotateLabels>90?(t.save(),t.textAlign="left"):x.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",t.fillStyle=e.scaleFontColor,e.xAxisBottom))for(var i=0;i<a.labels.length;i++)showLabels(t,a,e,i)&&(t.save(),x.rotateLabels>0?(t.translate(S+Math.ceil(t.chartSpaceScale*e.barValueSpacing)+i*u+L+f/2-x.highestXLabel/2,x.xLabelPos),t.rotate(-(x.rotateLabels*(Math.PI/180))),t.fillTextMultiLine(fmtChartJS(e,a.labels[i],e.fmtXLabel),0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(x.rotateLabels*(Math.PI/180)),S+Math.ceil(t.chartSpaceScale*e.barValueSpacing)+i*u+L+f/2-x.highestXLabel/2,x.xLabelPos,i,-1)):t.fillTextMultiLine(fmtChartJS(e,a.labels[i],e.fmtXLabel),S+Math.ceil(t.chartSpaceScale*e.barValueSpacing)+i*u+L+f/2,x.xLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,i,-1),t.restore());t.textAlign="right",t.textBaseline="middle";for(var l=e.showYAxisMin?-1:0;l<r.steps;l++)e.scaleShowLabels&&showYLabels(t,a,e,l+1,r.labels[l+1])&&(e.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(r.labels[l+1],S-(Math.ceil(t.chartLineScale*e.scaleTickSizeLeft)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight)),g-(l+1)*s,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,l)),e.yAxisRight&&(t.textAlign="left",t.fillTextMultiLine(r.labels[l+1],S+x.availableWidth+(Math.ceil(t.chartLineScale*e.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight)),g-(l+1)*s,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,l)))}function o(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=Number.MAX_VALUE,s=[],r=[],d=0,p=0,u=0;u<a.datasets.length;u++)for(var S=0;S<a.datasets[u].data.length;S++)1*a.datasets[u].data[S]>0?("Bar"==A[u][0].tpchart?("undefined"==typeof s[S]&&(s[S]=0),s[S]+=1*a.datasets[u].data[S],i=Math.max(i,s[S])):i=Math.max(i,1*a.datasets[u].data[S]),l=Math.min(l,1*a.datasets[u].data[S]),d=1):"number"==typeof(1*a.datasets[u].data[S])&&"undefined"!=typeof a.datasets[u].data[S]&&("Bar"==A[u][0].tpchart?("undefined"==typeof r[S]&&(r[S]=0),r[S]+=1*a.datasets[u].data[S],o=Math.min(o,r[S])):o=Math.min(o,1*a.datasets[u].data[S]),n=Math.max(n,1*a.datasets[u].data[S]),p=1);var g,f;0==d?(g=n,f=o):0==p?(g=i,f=l):(g=i,f=o),"function"==typeof e.graphMin?f=setOptionValue(!0,1,"GRAPHMIN",t,a,A,void 0,e.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(e.graphMin)||(f=e.graphMin),"function"==typeof e.graphMax?g=setOptionValue(!0,1,"GRAPHMAX",t,a,A,void 0,e.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(e.graphMax)||(g=e.graphMax),f>g&&(g=0,f=0),Math.abs(g-f)<e.zeroValue&&(Math.abs(g)<e.zeroValue&&(g=.9),g>0?(g=1.1*g,f=.9*f):(g=.9*g,f=1.1*f)),c=Math.ceil(t.chartTextScale*e.scaleFontSize),h=x.availableHeight;var m=Math.floor(h/(.66*c)),M=Math.floor(h/c*.5);return f>g&&(f=g-1),{maxValue:g,minValue:f,maxSteps:m,minSteps:M}}var s,r,c,h,d,p,u,S,g,f,x;if(t.tpchart="StackedBar",t.tpdata=0,init_and_start(t,a,e)){for(var A=initPassVariableData_part1(a,e,t),m=a.datasets.length,M=0;M<a.datasets.length;M++)"Line"==a.datasets[M].type?(A[M][0].tpchart="Line",m--):A[M][0].tpchart="Bar";if(e.logarithmic=!1,x=setMeasures(a,e,t,t.canvas.height,t.canvas.width,"nihil",[""],!0,!1,!0,!0,!0,"StackedBar"),d=o(),d.maxSteps>0&&d.minSteps>0){if(p=e.scaleShowLabels?e.scaleLabel:"",e.scaleOverride){var P=setOptionValue(!0,1,"SCALESTARTVALUE",t,a,A,void 0,e.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),T=setOptionValue(!0,1,"SCALESTEPS",t,a,A,void 0,e.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),v=setOptionValue(!0,1,"SCALESTEPWIDTH",t,a,A,void 0,e.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});r={steps:T,stepValue:v,graphMin:P,labels:[]};for(var M=0;M<=r.steps;M++)p&&r.labels.push(tmpl(p,{value:fmtChartJS(e,1*(P+v*M).toFixed(getDecimalPlaces(v)),e.fmtYLabel)},e));x=setMeasures(a,e,t,t.canvas.height,t.canvas.width,r.labels,null,!0,!1,!0,!0,!0,"StackedBar")}else r=calculateScale(1,e,d.maxSteps,d.minSteps,d.maxValue,d.minValue,p),x=setMeasures(a,e,t,t.canvas.height,t.canvas.width,r.labels,null,!0,!1,!0,!0,!0,"StackedBar");var D=x.availableHeight;x.availableHeight=x.availableHeight-Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)-Math.ceil(t.chartLineScale*e.scaleTickSizeTop),x.availableWidth=x.availableWidth-Math.ceil(t.chartLineScale*e.scaleTickSizeLeft)-Math.ceil(t.chartLineScale*e.scaleTickSizeRight),s=Math.floor(x.availableHeight/r.steps),u=Math.floor(x.availableWidth/a.labels.length),(0==u||e.fullWidthGraph)&&(u=x.availableWidth/a.labels.length),x.clrwidth=x.clrwidth-(x.availableWidth-a.labels.length*u),x.availableWidth=a.labels.length*u,x.availableHeight=r.steps*s,x.xLabelPos+=Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)+Math.ceil(t.chartLineScale*e.scaleTickSizeTop)-(D-x.availableHeight),x.clrheight+=Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)+Math.ceil(t.chartLineScale*e.scaleTickSizeTop)-(D-x.availableHeight),S=x.leftNotUsableSize+Math.ceil(t.chartLineScale*e.scaleTickSizeLeft),g=x.topNotUsableSize+x.availableHeight+Math.ceil(t.chartLineScale*e.scaleTickSizeTop),f=u-2*Math.ceil(t.chartLineScale*e.scaleGridLineWidth)-2*Math.ceil(t.chartSpaceScale*e.barValueSpacing)-(1*Math.ceil(t.chartSpaceScale*e.barDatasetSpacing)-1)-Math.ceil(t.chartLineScale*e.barStrokeWidth)/2-1,f>=0&&1>=f&&(f=1),0>f&&f>=-1&&(f=-1);var L;1*e.maxBarWidth>0&&f>1*e.maxBarWidth?(L=(f-1*e.maxBarWidth)/2,f=1*e.maxBarWidth):L=0;var y=0,V=0;y=calculateOffset(!1,0,r,s),"object"==typeof calculatedScale2&&(V=calculateOffset(e.logarithmic2,0,calculatedScale2,scaleHop2)),n(),initPassVariableData_part2(A,a,e,t,{msr:x,zeroY:y,zeroY2:V,logarithmic:!1,logarithmic2:!1,calculatedScale:r,additionalSpaceBetweenBars:L,scaleHop:s,valueHop:u,yAxisPosX:S,xAxisPosY:g,barWidth:f}),animationLoop(e,l,i,t,x.clrx,x.clry,x.clrwidth,x.clrheight,S+x.availableWidth/2,g-x.availableHeight/2,S,g,a,A)}else testRedraw(t,a,e),t.firstPass=9;return{data:a,config:e,ctx:t}}},HorizontalStackedBar=function(a,e,t){function i(a,e,t){var i=e.steps*e.stepValue,l=a-e.graphMin,n=CapValue(l/i,1,0);return t*e.steps*n}function l(i){for(var l=new Array,n=new Array,o=0;o<a.datasets.length;o++)for(var s=0;s<a.datasets[o].data.length;s++){t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,1,"BARSTROKEWIDTH",t,a,m,a.datasets[o].barStrokeWidth,e.barStrokeWidth,"barStrokeWidth",o,s,{animationValue:r,xPosLeft:c,yPosBottom:m[o][s].yPosBottom,xPosRight:h,yPosTop:m[o][s].yPosBottom}));var r=animationCorrection(i,a,e,o,s,!1).animVal;if(r>1&&(r-=1),"undefined"!=typeof a.datasets[o].data[s]&&1*a.datasets[o].data[s]!=0){"undefined"==typeof l[s]&&(l[s]=m[m[o][s].firstNotMissing][s].xPosLeft,n[s]=m[m[o][s].firstNotMissing][s].xPosLeft);var c,h;c=1*a.datasets[o].data[s]>0?l[s]:n[s],h=c+r*(m[o][s].xPosRight-m[o][s].xPosLeft),1*a.datasets[o].data[s]>0?l[s]=h:n[s]=h,t.fillStyle=setOptionValue(!0,1,"COLOR",t,a,m,a.datasets[o].fillColor,e.defaultFillColor,"fillColor",o,s,{animationValue:r,xPosLeft:c,yPosBottom:m[o][s].yPosBottom,xPosRight:h,yPosTop:m[o][s].yPosBottom}),t.strokeStyle=setOptionValue(!0,1,"STROKECOLOR",t,a,m,a.datasets[o].strokeColor,e.defaultStrokeColor,"strokeColor",o,s,{nullvalue:null}),0!=r&&m[o][s].xPosLeft!=m[o][s].xPosRight&&(t.beginPath(),t.moveTo(c+(h-c)/2,m[o][s].yPosTop),t.lineTo(h,m[o][s].yPosTop),t.lineTo(h,m[o][s].yPosBottom),t.lineTo(c,m[o][s].yPosBottom),t.lineTo(c,m[o][s].yPosTop),t.lineTo(c+(h-c)/2,m[o][s].yPosTop),e.barShowStroke&&(t.setLineDash(lineStyleFn(setOptionValue(!0,1,"STROKESTYLE",t,a,m,a.datasets[o].datasetStrokeStyle,e.datasetStrokeStyle,"datasetStrokeStyle",o,s,{nullvalue:null}))),t.stroke(),t.setLineDash([])),t.closePath(),t.fill())}}if(i>=e.animationStopValue){var d=0,p=0;for(o=0;o<a.datasets.length;o++)for(s=0;s<a.datasets[o].data.length;s++)if("undefined"!=typeof a.datasets[o].data[s]&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",o,s,m,setOptionValue(!0,1,"ANNOTATEDISPLAY",t,a,m,a.datasets[o].annotateDisplay,e.annotateDisplay,"annotateDisplay",o,s,{nullValue:!0})],setOptionValue(!0,1,"INGRAPHDATASHOW",t,a,m,a.datasets[o].inGraphDataShow,e.inGraphDataShow,"inGraphDataShow",o,s,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,m,void 0,e.inGraphDataAlign,"inGraphDataAlign",o,s,{nullValue:!0}),t.textBaseline=setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,m,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",o,s,{nullValue:!0}),t.font=setOptionValue(!0,1,"INGRAPHDATAFONTSTYLE",t,a,m,void 0,e.inGraphDataFontStyle,"inGraphDataFontStyle",o,s,{nullValue:!0})+" "+setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,m,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0})+"px "+setOptionValue(!0,1,"INGRAPHDATAFONTFAMILY",t,a,m,void 0,e.inGraphDataFontFamily,"inGraphDataFontFamily",o,s,{nullValue:!0}),t.fillStyle=setOptionValue(!0,1,"INGRAPHDATAFONTCOLOR",t,a,m,void 0,e.inGraphDataFontColor,"inGraphDataFontColor",o,s,{nullValue:!0});var u=tmplbis(setOptionValue(!0,1,"INGRAPHDATATMPL",t,a,m,void 0,e.inGraphDataTmpl,"inGraphDataTmpl",o,s,{
nullValue:!0}),m[o][s],e);t.beginPath(),d=0,p=0,1==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",t,a,m,void 0,e.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})?p=m[o][s].xPosLeft+setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,a,m,void 0,e.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",t,a,m,void 0,e.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})?p=m[o][s].xPosLeft+(m[o][s].xPosRight-m[o][s].xPosLeft)/2+setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,a,m,void 0,e.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",t,a,m,void 0,e.inGraphDataXPosition,"inGraphDataXPosition",o,s,{nullValue:!0})&&(p=m[o][s].xPosRight+setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,a,m,void 0,e.inGraphDataPaddingX,"inGraphDataPaddingX",o,s,{nullValue:!0})),1==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",t,a,m,void 0,e.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})?d=m[o][s].yPosBottom-setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,a,m,void 0,e.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",t,a,m,void 0,e.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})?d=m[o][s].yPosBottom-x/2-setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,a,m,void 0,e.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",t,a,m,void 0,e.inGraphDataYPosition,"inGraphDataYPosition",o,s,{nullValue:!0})&&(d=m[o][s].yPosTop-setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,a,m,void 0,e.inGraphDataPaddingY,"inGraphDataPaddingY",o,s,{nullValue:!0})),t.translate(p,d),rotateVal=setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,m,void 0,e.inGraphDataRotate,"inGraphDataRotate",o,s,{nullValue:!0})*(Math.PI/180),t.rotate(rotateVal),setTextBordersAndBackground(t,u,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,m,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0}),0,0,setOptionValue(!0,1,"INGRAPHDATABORDERS",t,a,m,void 0,e.inGraphDataBorders,"inGraphDataBorders",o,s,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSCOLOR",t,a,m,void 0,e.inGraphDataBordersColor,"inGraphDataBordersColor",o,s,{nullValue:!0}),setOptionValue(!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,a,m,void 0,e.inGraphDataBordersWidth,"inGraphDataBordersWidth",o,s,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,a,m,void 0,e.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",o,s,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,a,m,void 0,e.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",o,s,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSSTYLE",t,a,m,void 0,e.inGraphDataBordersStyle,"inGraphDataBordersStyle",o,s,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,a,m,void 0,e.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",o,s,{nullValue:!0}),"INGRAPHDATA"),t.fillTextMultiLine(u,0,0,t.textBaseline,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,m,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",o,s,{nullValue:!0}),!0,e.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",rotateVal,p,d,o,s),t.restore()}}A.legendMsr.dispLegend&&drawLegend(A.legendMsr,a,e,t,"HorizontalStackedBar")}function n(){t.lineWidth=Math.ceil(t.chartLineScale*e.scaleLineWidth),t.strokeStyle=e.scaleLineColor,t.setLineDash(lineStyleFn(e.scaleLineStyle)),t.beginPath(),t.moveTo(g-Math.ceil(t.chartLineScale*e.scaleTickSizeLeft),f),t.lineTo(g+A.availableWidth,f),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(e.scaleGridLineStyle));for(var i=e.showYAxisMin?-1:0;i<c.steps;i++)i>=0&&(t.beginPath(),t.moveTo(g+i*S,f+Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)),t.lineWidth=Math.ceil(t.chartLineScale*e.scaleGridLineWidth),t.strokeStyle=e.scaleGridLineColor,e.scaleShowGridLines&&i>0&&i%e.scaleXGridLinesStep==0?t.lineTo(g+i*S,f-A.availableHeight-Math.ceil(t.chartLineScale*e.scaleTickSizeTop)):t.lineTo(g+i*S,f),t.stroke()),t.setLineDash([]);t.lineWidth=Math.ceil(t.chartLineScale*e.scaleLineWidth),t.strokeStyle=e.scaleLineColor,t.setLineDash(lineStyleFn(e.scaleLineStyle)),t.beginPath(),t.moveTo(g,f+Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)),t.lineTo(g,f-A.availableHeight-Math.ceil(t.chartLineScale*e.scaleTickSizeTop)),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(e.scaleGridLineStyle));for(var l=0;l<a.labels.length;l++)t.beginPath(),t.moveTo(g-Math.ceil(t.chartLineScale*e.scaleTickSizeLeft),f-(l+1)*r),t.lineWidth=Math.ceil(t.chartLineScale*e.scaleGridLineWidth),t.strokeStyle=e.scaleGridLineColor,e.scaleShowGridLines&&(l+1)%e.scaleYGridLinesStep==0?t.lineTo(g+A.availableWidth,f-(l+1)*r):t.lineTo(g,f-(l+1)*r),t.stroke();t.setLineDash([])}function o(){if(t.font=e.scaleFontStyle+" "+Math.ceil(t.chartTextScale*e.scaleFontSize).toString()+"px "+e.scaleFontFamily,e.scaleShowLabels&&(e.xAxisTop||e.xAxisBottom)&&(t.textBaseline="top",A.rotateLabels>90?(t.save(),t.textAlign="left"):A.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",t.fillStyle=e.scaleFontColor,e.xAxisBottom))for(var i=e.showYAxisMin?-1:0;i<c.steps;i++)showYLabels(t,a,e,i+1,c.labels[i+1])&&(t.save(),A.rotateLabels>0?(t.translate(g+(i+1)*S-A.highestXLabel/2,A.xLabelPos),t.rotate(-(A.rotateLabels*(Math.PI/180))),t.fillTextMultiLine(c.labels[i+1],0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(A.rotateLabels*(Math.PI/180)),g+(i+1)*S-A.highestXLabel/2,A.xLabelPos,i,-1)):t.fillTextMultiLine(c.labels[i+1],g+(i+1)*S,A.xLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,i,-1),t.restore());t.textAlign="right",t.textBaseline="middle";for(var l=0;l<a.labels.length;l++)showLabels(t,a,e,l)&&(e.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(fmtChartJS(e,a.labels[l],e.fmtXLabel),g-(Math.ceil(t.chartLineScale*e.scaleTickSizeLeft)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight)),f-(l+1)*r+Math.ceil(t.chartSpaceScale*e.barValueSpacing)+D+x/2,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,l)),e.yAxisRight&&(t.textAlign="left",t.fillTextMultiLine(fmtChartJS(e,a.labels[l],e.fmtXLabel),g+A.availableWidth+(Math.ceil(t.chartLineScale*e.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight)),f-(l+1)*r+D+x/2,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,l)))}function s(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=(new Array(a.datasets.length),new Array(a.datasets.length),0);n<a.datasets.length;n++)for(var o=0;o<a.datasets[n].data.length;o++){var s=n,r=0,c=0;for("undefined"!=typeof a.datasets[0].data[o]&&(1*a.datasets[0].data[o]>0?(r+=1*a.datasets[0].data[o],r>i&&(i=r),l>r&&(l=r)):(c+=1*a.datasets[0].data[o],c>i&&(i=c),l>c&&(l=c)));s>0;)"undefined"!=typeof a.datasets[s].data[o]&&(1*a.datasets[s].data[o]>0?(r+=1*a.datasets[s].data[o],r>i&&(i=r),l>r&&(l=r)):(c+=1*a.datasets[s].data[o],c>i&&(i=c),l>c&&(l=c))),s--}"function"==typeof e.graphMin?l=setOptionValue(!0,1,"GRAPHMIN",t,a,m,void 0,e.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(e.graphMin)||(l=e.graphMin),"function"==typeof e.graphMax?i=setOptionValue(!0,1,"GRAPHMAX",t,a,m,void 0,e.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(e.graphMax)||(i=e.graphMax),l>i&&(i=0,l=0),Math.abs(i-l)<e.zeroValue&&(Math.abs(i)<e.zeroValue&&(i=.9),i>0?(i=1.1*i,l=.9*l):(i=.9*i,l=1.1*l)),h=Math.ceil(t.chartTextScale*e.scaleFontSize),d=A.availableHeight;var p=Math.floor(d/(.66*h)),u=Math.floor(d/h*.5);return l>i&&(l=i-1),{maxValue:i,minValue:l,maxSteps:p,minSteps:u}}var r,c,h,d,p,u,S,g,f,x,A;if(e.reverseOrder&&"undefined"==typeof t.reversed&&(t.reversed=!0,a=reverseData(a)),t.tpchart="HorizontalStackedBar",t.tpdata=0,init_and_start(t,a,e)){var m=initPassVariableData_part1(a,e,t);if(e.logarithmic=!1,A=setMeasures(a,e,t,t.canvas.height,t.canvas.width,"nihil",[""],!0,!0,!0,!0,!0,"HorizontalStackedBar"),p=s(),p.maxSteps>0&&p.minSteps>0){if(u=e.scaleShowLabels?e.scaleLabel:"",e.scaleOverride){var M=setOptionValue(!0,1,"SCALESTARTVALUE",t,a,m,void 0,e.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),P=setOptionValue(!0,1,"SCALESTEPS",t,a,m,void 0,e.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),T=setOptionValue(!0,1,"SCALESTEPWIDTH",t,a,m,void 0,e.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});c={steps:P,stepValue:T,graphMin:M,labels:[]};for(var v=0;v<=c.steps;v++)u&&c.labels.push(tmpl(u,{value:fmtChartJS(e,1*(M+T*v).toFixed(getDecimalPlaces(T)),e.fmtYLabel)},e));A=setMeasures(a,e,t,t.canvas.height,t.canvas.width,c.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar")}else c=calculateScale(1,e,p.maxSteps,p.minSteps,p.maxValue,p.minValue,u),A=setMeasures(a,e,t,t.canvas.height,t.canvas.width,c.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar");A.availableHeight=A.availableHeight-Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)-Math.ceil(t.chartLineScale*e.scaleTickSizeTop),A.availableWidth=A.availableWidth-Math.ceil(t.chartLineScale*e.scaleTickSizeLeft)-Math.ceil(t.chartLineScale*e.scaleTickSizeRight),r=Math.floor(A.availableHeight/a.labels.length),S=Math.floor(A.availableWidth/c.steps),(0==S||e.fullWidthGraph)&&(S=A.availableWidth/c.steps),A.clrwidth=A.clrwidth-(A.availableWidth-c.steps*S),A.availableWidth=c.steps*S,A.availableHeight=a.labels.length*r,g=A.leftNotUsableSize+Math.ceil(t.chartLineScale*e.scaleTickSizeLeft),f=A.topNotUsableSize+A.availableHeight+Math.ceil(t.chartLineScale*e.scaleTickSizeTop),x=r-2*Math.ceil(t.chartLineScale*e.scaleGridLineWidth)-2*Math.ceil(t.chartSpaceScale*e.barValueSpacing)-(1*Math.ceil(t.chartSpaceScale*e.barDatasetSpacing)-1)-Math.ceil(t.chartLineScale*e.barStrokeWidth)/2-1,x>=0&&1>=x&&(x=1),0>x&&x>=-1&&(x=-1);var D;1*e.maxBarWidth>0&&x>1*e.maxBarWidth?(D=(x-1*e.maxBarWidth)/2,x=1*e.maxBarWidth):D=0,o();var L=i(0,c,r);initPassVariableData_part2(m,a,e,t,{yAxisPosX:g,additionalSpaceBetweenBars:D,xAxisPosY:f,barWidth:x,zeroY:L,scaleHop:r,valueHop:S,calculatedScale:c}),animationLoop(e,n,l,t,A.clrx,A.clry,A.clrwidth,A.clrheight,g+A.availableWidth/2,f-A.availableHeight/2,g,f,a,m)}else testRedraw(t,a,e),t.firstPass=9;return{data:a,config:e,ctx:t}}},Bar=function(data,config,ctx){function drawBars(a){for(var e,t,i=0;i<data.datasets.length;i++)if("Line"!=data.datasets[i].type)for(var l=0;l<data.datasets[i].data.length;l++)if(ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(!0,1,"BARSTROKEWIDTH",ctx,data,statData,data.datasets[i].barStrokeWidth,config.barStrokeWidth,"barStrokeWidth",i,l,{animationValue:n,xPosLeft:statData[i][l].xPosLeft,yPosBottom:statData[i][l].yPosBottom,xPosRight:statData[i][l].xPosLeft+barWidth,yPosTop:statData[i][l].yPosBottom-o})),"undefined"!=typeof data.datasets[i].data[l]){var n=animationCorrection(a,data,config,i,l,!1).animVal;n>1&&(n-=1);var o=n*statData[i][l].barHeight+Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2;ctx.fillStyle=setOptionValue(!0,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,l,{animationValue:n,xPosLeft:statData[i][l].xPosLeft,yPosBottom:statData[i][l].yPosBottom,xPosRight:statData[i][l].xPosLeft+barWidth,yPosTop:statData[i][l].yPosBottom-o}),ctx.strokeStyle=setOptionValue(!0,1,"STROKECOLOR",ctx,data,statData,data.datasets[i].strokeColor,config.defaultStrokeColor,"strokeColor",i,l,{nullvalue:null}),roundRect(ctx,statData[i][l].xPosLeft,statData[i][l].yPosBottom,barWidth,o,config.barShowStroke,config.barBorderRadius,i,l,data.datasets[i].data[l]<0?-1:1)}if(drawLinesDataset(a,data,config,ctx,statData,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length}),a>=config.animationStopValue)for(i=0;i<data.datasets.length;i++)for(l=0;l<data.datasets[i].data.length;l++)if("undefined"!=typeof data.datasets[i].data[l]&&"Line"!=data.datasets[i].type&&(jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",i,l,statData,setOptionValue(!0,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,l,{nullValue:!0})],setOptionValue(!0,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,l,{nullValue:!0}))){ctx.save(),ctx.textAlign=setOptionValue(!0,1,"INGRAPHDATAALIGN",ctx,data,statData,void 0,config.inGraphDataAlign,"inGraphDataAlign",i,l,{nullValue:!0}),ctx.textBaseline=setOptionValue(!0,1,"INGRAPHDATAVALIGN",ctx,data,statData,void 0,config.inGraphDataVAlign,"inGraphDataVAlign",i,l,{nullValue:!0}),ctx.font=setOptionValue(!0,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,void 0,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,l,{nullValue:!0})+" "+setOptionValue(!0,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,"inGraphDataFontSize",i,l,{nullValue:!0})+"px "+setOptionValue(!0,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,void 0,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,l,{nullValue:!0}),ctx.fillStyle=setOptionValue(!0,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,void 0,config.inGraphDataFontColor,"inGraphDataFontColor",i,l,{nullValue:!0}),e=statData[i][l].yPosBottom,t=statData[i][l].yPosTop,ctx.beginPath();var s=0,r=0;1==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,"inGraphDataXPosition",i,l,{nullValue:!0})?r=statData[i][l].xPosLeft+setOptionValue(!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,l,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,"inGraphDataXPosition",i,l,{nullValue:!0})?r=statData[i][l].xPosLeft+barWidth/2+setOptionValue(!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,l,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,"inGraphDataXPosition",i,l,{nullValue:!0})&&(r=statData[i][l].xPosLeft+barWidth+setOptionValue(!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,l,{nullValue:!0})),1==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,"inGraphDataYPosition",i,l,{nullValue:!0})?s=statData[i][l].yPosBottom-setOptionValue(!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,l,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,"inGraphDataYPosition",i,l,{nullValue:!0})?s=(statData[i][l].yPosBottom+statData[i][l].yPosTop)/2-setOptionValue(!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,l,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,"inGraphDataYPosition",i,l,{nullValue:!0})&&(s=statData[i][l].yPosTop-setOptionValue(!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,l,{nullValue:!0})),ctx.translate(r,s);var c=tmplbis(setOptionValue(!0,1,"INGRAPHDATATMPL",ctx,data,statData,void 0,config.inGraphDataTmpl,"inGraphDataTmpl",i,l,{nullValue:!0}),statData[i][l],config);rotateVal=setOptionValue(!0,1,"INGRAPHDATAROTATE",ctx,data,statData,void 0,config.inGraphDataRotate,"inGraphDataRotate",i,l,{nullValue:!0})*(Math.PI/180),ctx.rotate(rotateVal),setTextBordersAndBackground(ctx,c,setOptionValue(!0,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,"inGraphDataFontSize",i,l,{nullValue:!0}),0,0,setOptionValue(!0,1,"INGRAPHDATABORDERS",ctx,data,statData,void 0,config.inGraphDataBorders,"inGraphDataBorders",i,l,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,void 0,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,l,{nullValue:!0}),setOptionValue(!0,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,void 0,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,l,{nullValue:!0}),setOptionValue(!0,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,void 0,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,l,{nullValue:!0}),setOptionValue(!0,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,void 0,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,l,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,void 0,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,l,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,void 0,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,l,{nullValue:!0}),"INGRAPHDATA"),ctx.fillTextMultiLine(c,0,0,ctx.textBaseline,setOptionValue(!0,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,"inGraphDataFontSize",i,l,{nullValue:!0}),!0,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,r,s,i,l),ctx.restore()}a>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,additionalSpaceBetweenBars:additionalSpaceBetweenBars,barWidth:barWidth}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Bar")}function roundRect(a,e,t,i,l,n,o,s,r,c){a.beginPath(),a.setLineDash(lineStyleFn(setOptionValue(!0,1,"STROKESTYLE",a,data,statData,data.datasets[s].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",s,r,{nullvalue:null}))),a.moveTo(e+i/2,t),a.lineTo(e+i,t),a.lineTo(e+i,t-l+c*o),a.quadraticCurveTo(e+i,t-l,e+i-o,t-l),a.lineTo(e+o,t-l),a.quadraticCurveTo(e,t-l,e,t-l+c*o),a.lineTo(e,t),a.lineTo(e+i/2,t),n&&a.stroke(),a.closePath(),a.fill(),a.setLineDash([])}function drawScale(){ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleLineWidth),ctx.strokeStyle=config.scaleLineColor,ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.beginPath(),ctx.moveTo(yAxisPosX-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY),ctx.lineTo(yAxisPosX+msr.availableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),xAxisPosY),ctx.stroke(),ctx.setLineDash([]),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle));for(var a=0;a<data.labels.length;a++)ctx.beginPath(),ctx.moveTo(yAxisPosX+a*valueHop,xAxisPosY+Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth),ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&a>0&&a%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+a*valueHop,xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)):ctx.lineTo(yAxisPosX+a*valueHop,xAxisPosY),ctx.stroke();ctx.setLineDash([]),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleLineWidth),ctx.strokeStyle=config.scaleLineColor,ctx.setLineDash(lineStyleFn(config.scaleLineStyle)),ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)),ctx.stroke(),ctx.setLineDash([]),ctx.setLineDash(lineStyleFn(config.scaleGridLineStyle));for(var e=0;e<calculatedScale.steps;e++)ctx.beginPath(),ctx.moveTo(yAxisPosX-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY-(e+1)*scaleHop),ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth),ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&(e+1)%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),xAxisPosY-(e+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(e+1)*scaleHop),ctx.stroke();ctx.setLineDash([])}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+Math.ceil(ctx.chartTextScale*config.scaleFontSize).toString()+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var a=0;a<data.labels.length;a++)showLabels(ctx,data,config,a)&&(ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+a*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-(msr.rotateLabels*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+a*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos,a,-1)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),yAxisPosX+a*valueHop+valueHop/2,msr.xLabelPos,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,a,-1),ctx.restore());ctx.textAlign="right",ctx.textBaseline="middle";for(var e=config.showYAxisMin?-1:0;e<calculatedScale.steps;e++)config.scaleShowLabels&&showYLabels(ctx,data,config,e+1,calculatedScale.labels[e+1])&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[e+1],yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(e+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,e)),config.yAxisRight&&!valueBounds.dbAxis&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[e+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(e+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,e)));if(config.yAxisRight&&valueBounds.dbAxis)for(e=config.showYAxisMin?-1:0;e<calculatedScale2.steps;e++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[e+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(e+1)*scaleHop2,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,e))}function getValueBounds(){for(var upperValue=-Number.MAX_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=-Number.MAX_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,mathValueHeight,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeightVal=window[mathFctName](parameter)}else mathValueHeightVal=0;for(var j=0;j<data.datasets[i].data.length;j++)mathValueHeight="object"==typeof mathValueHeightVal?mathValueHeightVal[Math.min(mathValueHeightVal.length,j)]:mathValueHeightVal,"undefined"!=typeof data.datasets[i].data[j]&&(2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)))}lowerValue>upperValue&&(upperValue=0,lowerValue=0),Math.abs(upperValue-lowerValue)<config.zeroValue&&(Math.abs(upperValue)<config.zeroValue&&(upperValue=.9),upperValue>0?(upperValue=1.1*upperValue,lowerValue=.9*lowerValue):(upperValue=.9*upperValue,lowerValue=1.1*lowerValue)),"function"==typeof config.graphMin?lowerValue=setOptionValue(!0,1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(config.graphMin)||(lowerValue=config.graphMin),"function"==typeof config.graphMax?upperValue=setOptionValue(!0,1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(lowerValue2>upperValue2&&(upperValue2=0,lowerValue2=0),Math.abs(upperValue2-lowerValue2)<config.zeroValue&&(Math.abs(upperValue2)<config.zeroValue&&(upperValue2=.9),upperValue2>0?(upperValue2=1.1*upperValue2,lowerValue2=.9*lowerValue2):(upperValue2=.9*upperValue2,lowerValue2=1.1*lowerValue2)),"function"==typeof config.graphMin2?lowerValue2=setOptionValue(!0,1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin2,"graphMin2",-1,-1,{nullValue:!0}):isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),"function"==typeof config.graphMax2?upperValue2=setOptionValue(!0,1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax2,"graphMax2",-1,-1,{nullValue:!0}):isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=Math.ceil(ctx.chartTextScale*config.scaleFontSize),scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return lowerValue>upperValue&&(lowerValue=upperValue-1),lowerValue2>upperValue2&&(lowerValue2=upperValue2-1),{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr;if(ctx.tpchart="Bar",ctx.tpdata=0,init_and_start(ctx,data,config)){for(var statData=initPassVariableData_part1(data,config,ctx),nrOfBars=data.datasets.length,i=0;i<data.datasets.length;i++)"Line"==data.datasets[i].type?(statData[i][0].tpchart="Line",nrOfBars--):statData[i][0].tpchart="Bar";var bufferDataset,l=0;if(msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"nihil",[""],!0,!1,!0,!0,!0,"Bar"),valueBounds=getValueBounds(),valueBounds.minValue<=0&&(config.logarithmic=!1),valueBounds.maxSteps>0&&valueBounds.minSteps>0){config.logarithmic!==!1&&valueBounds.minValue<=0&&(config.logarithmic=!1),config.logarithmic2!==!1&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&4>OrderOfMagnitude||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&4>OrderOfMagnitude2||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride){var scaleStartValue=setOptionValue(!0,1,"SCALESTARTVALUE",ctx,data,statData,void 0,config.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),scaleSteps=setOptionValue(!0,1,"SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue(!0,1,"SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});calculatedScale={steps:scaleSteps,stepValue:scaleStepWidth,graphMin:scaleStartValue,graphMax:scaleStartValue+scaleSteps*scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,scaleStartValue,calculatedScale.graphMax,scaleStepWidth)}else calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);if(valueBounds.dbAxis)if(config.scaleOverride2){var scaleStartValue2=setOptionValue(!0,1,"SCALESTARTVALUE2",ctx,data,statData,void 0,config.scaleStartValue2,"scaleStartValue2",-1,-1,{nullValue:!0}),scaleSteps2=setOptionValue(!0,1,"SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:!0}),scaleStepWidth2=setOptionValue(!0,1,"SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,"scaleStepWidth2",-1,-1,{nullValue:!0});calculatedScale2={steps:scaleSteps2,stepValue:scaleStepWidth2,graphMin:scaleStartValue2,graphMax:scaleStartValue2+scaleSteps2*scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,scaleStartValue2,calculatedScale2.graphMax,scaleStepWidth2)}else calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString2);else calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null};msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,calculatedScale.labels,calculatedScale2.labels,!0,!1,!0,!0,!0,"Bar");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/data.labels.length),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/data.labels.length),msr.clrwidth=msr.clrwidth-(msr.availableWidth-data.labels.length*valueHop),msr.availableWidth=data.labels.length*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)-(prevHeight-msr.availableHeight),msr.clrheight+=Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop)-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY=msr.topNotUsableSize+msr.availableHeight+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),barWidth=(valueHop-2*Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth)-2*Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)-(Math.ceil(ctx.chartSpaceScale*config.barDatasetSpacing)*nrOfBars-1)-(Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2*nrOfBars-1))/nrOfBars,barWidth>=0&&1>=barWidth&&(barWidth=1),0>barWidth&&barWidth>=-1&&(barWidth=-1);var additionalSpaceBetweenBars;1*config.maxBarWidth>0&&barWidth>1*config.maxBarWidth?(additionalSpaceBetweenBars=nrOfBars*(barWidth-1*config.maxBarWidth)/2,barWidth=1*config.maxBarWidth):additionalSpaceBetweenBars=0;var zeroY2=0,zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop);"object"==typeof calculatedScale2&&(zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2)),initPassVariableData_part2(statData,data,config,ctx,{msr:msr,yAxisPosX:yAxisPosX,xAxisPosY:xAxisPosY,valueHop:valueHop,nbValueHop:data.labels.length-1,barWidth:barWidth,additionalSpaceBetweenBars:additionalSpaceBetweenBars,zeroY:zeroY,zeroY2:zeroY2,calculatedScale:calculatedScale,calculatedScale2:calculatedScale2,
scaleHop:scaleHop,scaleHop2:scaleHop2}),drawLabels(),animationLoop(config,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData)}else testRedraw(ctx,data,config),ctx.firstPass=9;return{data:data,config:config,ctx:ctx}}},HorizontalBar=function(a,e,t){function i(i){for(var n=0;n<a.datasets.length;n++)for(var o=0;o<a.datasets[n].data.length;o++){t.lineWidth=Math.ceil(t.chartLineScale*setOptionValue(!0,1,"BARSTROKEWIDTH",t,a,m,a.datasets[n].barStrokeWidth,e.barStrokeWidth,"barStrokeWidth",n,o,{animationValue:s,xPosLeft:m[n][o].xPosLeft,yPosBottom:m[n][o].yPosBottom,xPosRight:m[n][o].xPosLeft+x,yPosTop:m[n][o].yPosBottom-r}));var s=animationCorrection(i,a,e,n,o,!1).animVal;s>1&&(s-=1);var r=s*m[n][o].barWidth+Math.ceil(t.chartLineScale*e.barStrokeWidth)/2;t.fillStyle=setOptionValue(!0,1,"COLOR",t,a,m,a.datasets[n].fillColor,e.defaultFillColor,"fillColor",n,o,{animationValue:s,xPosLeft:m[n][o].xPosLeft,yPosBottom:m[n][o].yPosBottom,xPosRight:m[n][o].xPosLeft+r,yPosTop:m[n][o].yPosBottom}),t.strokeStyle=setOptionValue(!0,1,"STROKECOLOR",t,a,m,a.datasets[n].strokeColor,e.defaultStrokeColor,"strokeColor",n,o,{nullvalue:null}),"undefined"!=typeof a.datasets[n].data[o]&&l(t,m[n][o].yPosTop,m[n][o].xPosLeft,x,r,e.barShowStroke,e.barBorderRadius,0,n,o,a.datasets[n].data[o]<0?-1:1)}if(i>=e.animationStopValue)for(n=0;n<a.datasets.length;n++)for(o=0;o<a.datasets[n].data.length;o++)if("undefined"!=typeof a.datasets[n].data[o]&&(jsGraphAnnotate[t.ChartNewId][jsGraphAnnotate[t.ChartNewId].length]=["RECT",n,o,m,setOptionValue(!0,1,"ANNOTATEDISPLAY",t,a,m,a.datasets[n].annotateDisplay,e.annotateDisplay,"annotateDisplay",n,o,{nullValue:!0})],setOptionValue(!0,1,"INGRAPHDATASHOW",t,a,m,a.datasets[n].inGraphDataShow,e.inGraphDataShow,"inGraphDataShow",n,o,{nullValue:!0}))){t.save(),t.textAlign=setOptionValue(!0,1,"INGRAPHDATAALIGN",t,a,m,void 0,e.inGraphDataAlign,"inGraphDataAlign",n,o,{nullValue:!0}),t.textBaseline=setOptionValue(!0,1,"INGRAPHDATAVALIGN",t,a,m,void 0,e.inGraphDataVAlign,"inGraphDataVAlign",n,o,{nullValue:!0}),t.font=setOptionValue(!0,1,"INGRAPHDATAFONTSTYLE",t,a,m,void 0,e.inGraphDataFontStyle,"inGraphDataFontStyle",n,o,{nullValue:!0})+" "+setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,m,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",n,o,{nullValue:!0})+"px "+setOptionValue(!0,1,"INGRAPHDATAFONTFAMILY",t,a,m,void 0,e.inGraphDataFontFamily,"inGraphDataFontFamily",n,o,{nullValue:!0}),t.fillStyle=setOptionValue(!0,1,"INGRAPHDATAFONTCOLOR",t,a,m,void 0,e.inGraphDataFontColor,"inGraphDataFontColor",n,o,{nullValue:!0}),t.beginPath();var c=0,h=0;1==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",t,a,m,void 0,e.inGraphDataYPosition,"inGraphDataYPosition",n,o,{nullValue:!0})?c=m[n][o].yPosTop-setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,a,m,void 0,e.inGraphDataPaddingY,"inGraphDataPaddingY",n,o,{nullValue:!0})+x:2==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",t,a,m,void 0,e.inGraphDataYPosition,"inGraphDataYPosition",n,o,{nullValue:!0})?c=m[n][o].yPosTop+x/2-setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,a,m,void 0,e.inGraphDataPaddingY,"inGraphDataPaddingY",n,o,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATAYPOSITION",t,a,m,void 0,e.inGraphDataYPosition,"inGraphDataYPosition",n,o,{nullValue:!0})&&(c=m[n][o].yPosTop-setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGY",t,a,m,void 0,e.inGraphDataPaddingY,"inGraphDataPaddingY",n,o,{nullValue:!0})),1==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",t,a,m,void 0,e.inGraphDataXPosition,"inGraphDataXPosition",n,o,{nullValue:!0})?h=m[n][o].xPosLeft+setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,a,m,void 0,e.inGraphDataPaddingX,"inGraphDataPaddingX",n,o,{nullValue:!0}):2==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",t,a,m,void 0,e.inGraphDataXPosition,"inGraphDataXPosition",n,o,{nullValue:!0})?h=(m[n][o].xPosLeft+m[n][o].xPosRight)/2+setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,a,m,void 0,e.inGraphDataPaddingX,"inGraphDataPaddingX",n,o,{nullValue:!0}):3==setOptionValue(!0,1,"INGRAPHDATAXPOSITION",t,a,m,void 0,e.inGraphDataXPosition,"inGraphDataXPosition",n,o,{nullValue:!0})&&(h=m[n][o].xPosRight+setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATAPADDINGX",t,a,m,void 0,e.inGraphDataPaddingX,"inGraphDataPaddingX",n,o,{nullValue:!0})),t.translate(h,c);var d=tmplbis(setOptionValue(!0,1,"INGRAPHDATATMPL",t,a,m,void 0,e.inGraphDataTmpl,"inGraphDataTmpl",n,o,{nullValue:!0}),m[n][o],e),p=setOptionValue(!0,1,"INGRAPHDATAROTATE",t,a,m,void 0,e.inGraphDataRotate,"inGraphDataRotate",n,o,{nullValue:!0})*(Math.PI/180);t.rotate(p),setTextBordersAndBackground(t,d,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,m,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",n,o,{nullValue:!0}),0,0,setOptionValue(!0,1,"INGRAPHDATABORDERS",t,a,m,void 0,e.inGraphDataBorders,"inGraphDataBorders",n,o,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSCOLOR",t,a,m,void 0,e.inGraphDataBordersColor,"inGraphDataBordersColor",n,o,{nullValue:!0}),setOptionValue(!0,t.chartLineScale,"INGRAPHDATABORDERSWIDTH",t,a,m,void 0,e.inGraphDataBordersWidth,"inGraphDataBordersWidth",n,o,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",t,a,m,void 0,e.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",n,o,{nullValue:!0}),setOptionValue(!0,t.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",t,a,m,void 0,e.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",n,o,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABORDERSSTYLE",t,a,m,void 0,e.inGraphDataBordersStyle,"inGraphDataBordersStyle",n,o,{nullValue:!0}),setOptionValue(!0,1,"INGRAPHDATABACKGROUNDCOLOR",t,a,m,void 0,e.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",n,o,{nullValue:!0}),"INGRAPHDATA"),t.fillTextMultiLine(d,0,0,t.textBaseline,setOptionValue(!0,t.chartTextScale,"INGRAPHDATAFONTSIZE",t,a,m,void 0,e.inGraphDataFontSize,"inGraphDataFontSize",n,o,{nullValue:!0}),!0,e.detectMouseOnText,t,"INGRAPHDATA_TEXTMOUSE",p,h,c,n,o),t.restore()}A.legendMsr.dispLegend&&drawLegend(A.legendMsr,a,e,t,"HorizontalBar")}function l(t,i,l,n,o,s,r,c,h,d,p){t.beginPath(),t.moveTo(l+c,i),t.lineTo(l+c,i+n),t.lineTo(l+o-p*r,i+n),t.quadraticCurveTo(l+o,i+n,l+o,i+n-r),t.lineTo(l+o,i+r),t.quadraticCurveTo(l+o,i,l+o-p*r,i),t.lineTo(l+c,i),t.quadraticCurveTo(l+c,i,l+c,i+n),s&&(t.setLineDash(lineStyleFn(setOptionValue(!0,1,"STROKESTYLE",t,a,m,a.datasets[h].datasetStrokeStyle,e.datasetStrokeStyle,"datasetStrokeStyle",h,d,{nullvalue:null}))),t.stroke(),t.setLineDash([])),t.closePath(),t.fill()}function n(){t.lineWidth=Math.ceil(t.chartLineScale*e.scaleLineWidth),t.strokeStyle=e.scaleLineColor,t.setLineDash(lineStyleFn(e.scaleLineStyle)),t.beginPath(),t.moveTo(g-Math.ceil(t.chartLineScale*e.scaleTickSizeLeft),f),t.lineTo(g+A.availableWidth+Math.ceil(t.chartLineScale*e.scaleTickSizeRight),f),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(e.scaleGridLineStyle));for(var i=e.showYAxisMin?-1:0;i<c.steps;i++)i>=0&&(t.beginPath(),t.moveTo(g+i*S,f+Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)),t.lineWidth=Math.ceil(t.chartLineScale*e.scaleGridLineWidth),t.strokeStyle=e.scaleGridLineColor,e.scaleShowGridLines&&i>0&&i%e.scaleXGridLinesStep==0?t.lineTo(g+i*S,f-A.availableHeight-Math.ceil(t.chartLineScale*e.scaleTickSizeTop)):t.lineTo(g+i*S,f),t.stroke());t.setLineDash([]),t.lineWidth=Math.ceil(t.chartLineScale*e.scaleLineWidth),t.strokeStyle=e.scaleLineColor,t.setLineDash(lineStyleFn(e.scaleLineStyle)),t.beginPath(),t.moveTo(g,f+Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)),t.lineTo(g,f-A.availableHeight-Math.ceil(t.chartLineScale*e.scaleTickSizeTop)),t.stroke(),t.setLineDash([]),t.setLineDash(lineStyleFn(e.scaleGridLineStyle));for(var l=0;l<a.labels.length;l++)t.beginPath(),t.moveTo(g-Math.ceil(t.chartLineScale*e.scaleTickSizeLeft),f-(l+1)*r),t.lineWidth=Math.ceil(t.chartLineScale*e.scaleGridLineWidth),t.strokeStyle=e.scaleGridLineColor,e.scaleShowGridLines&&(l+1)%e.scaleYGridLinesStep==0?t.lineTo(g+A.availableWidth+Math.ceil(t.chartLineScale*e.scaleTickSizeRight),f-(l+1)*r):t.lineTo(g,f-(l+1)*r),t.stroke();t.setLineDash([])}function o(){if(t.font=e.scaleFontStyle+" "+Math.ceil(t.chartTextScale*e.scaleFontSize).toString()+"px "+e.scaleFontFamily,e.scaleShowLabels&&(e.xAxisTop||e.xAxisBottom)&&(t.textBaseline="top",A.rotateLabels>90?(t.save(),t.textAlign="left"):A.rotateLabels>0?(t.save(),t.textAlign="right"):t.textAlign="center",t.fillStyle=e.scaleFontColor,e.xAxisBottom))for(var i=e.showYAxisMin?-1:0;i<c.steps;i++)showYLabels(t,a,e,i+1,c.labels[i+1])&&(t.save(),A.rotateLabels>0?(t.translate(g+(i+1)*S-A.highestXLabel/2,A.xLabelPos),t.rotate(-(A.rotateLabels*(Math.PI/180))),t.fillTextMultiLine(c.labels[i+1],0,0,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"XAXIS_TEXTMOUSE",-(A.rotateLabels*(Math.PI/180)),g+(i+1)*S-A.highestXLabel/2,A.xLabelPos,i,-1)):t.fillTextMultiLine(c.labels[i+1],g+(i+1)*S,A.xLabelPos,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"XAXIS_TEXTMOUSE",0,0,0,i,-1),t.restore());t.textAlign="right",t.textBaseline="middle";for(var l=0;l<a.labels.length;l++)showLabels(t,a,e,l)&&(e.yAxisLeft&&(t.textAlign="right",t.fillTextMultiLine(fmtChartJS(e,a.labels[l],e.fmtXLabel),g-(Math.ceil(t.chartLineScale*e.scaleTickSizeLeft)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight)),f-l*r-r/2,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,l)),e.yAxisRight&&(t.textAlign="left",t.fillTextMultiLine(fmtChartJS(e,a.labels[l],e.fmtXLabel),g+A.availableWidth+(Math.ceil(t.chartLineScale*e.scaleTickSizeRight)+Math.ceil(t.chartSpaceScale*e.yAxisSpaceRight)),f-l*r-r/2,t.textBaseline,Math.ceil(t.chartTextScale*e.scaleFontSize),!0,e.detectMouseOnText,t,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,l)))}function s(){for(var i=-Number.MAX_VALUE,l=Number.MAX_VALUE,n=0;n<a.datasets.length;n++)for(var o=0;o<a.datasets[n].data.length;o++)"undefined"!=typeof a.datasets[n].data[o]&&(1*a.datasets[n].data[o]>i&&(i=1*a.datasets[n].data[o]),1*a.datasets[n].data[o]<l&&(l=1*a.datasets[n].data[o]));l>i&&(i=0,l=0),Math.abs(i-l)<e.zeroValue&&(Math.abs(i)<e.zeroValue&&(i=.9),i>0?(i=1.1*i,l=.9*l):(i=.9*i,l=1.1*l)),"function"==typeof e.graphMin?l=setOptionValue(!0,1,"GRAPHMIN",t,a,m,void 0,e.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(e.graphMin)||(l=e.graphMin),"function"==typeof e.graphMax?i=setOptionValue(!0,1,"GRAPHMAX",t,a,m,void 0,e.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(e.graphMax)||(i=e.graphMax),h=Math.ceil(t.chartTextScale*e.scaleFontSize),d=A.availableHeight;var s=Math.floor(d/(.66*h)),r=Math.floor(d/h*.5);return l>i&&(l=i-1),{maxValue:i,minValue:l,maxSteps:s,minSteps:r}}var r,c,h,d,p,u,S,g,f,x,A;if(t.tpchart="HorizontalBar",t.tpdata=0,init_and_start(t,a,e)){e.reverseOrder&&"undefined"==typeof t.reversed&&(t.reversed=!0,a=reverseData(a));var m=initPassVariableData_part1(a,e,t);if(A=setMeasures(a,e,t,t.canvas.height,t.canvas.width,"nihil",[""],!0,!0,!0,!0,!0,"StackedBar"),p=s(),p.minValue<=0&&(e.logarithmic=!1),p.maxSteps>0&&p.minSteps>0){if(e.logarithmic!==!1&&p.minValue<=0&&(e.logarithmic=!1),u=e.scaleShowLabels?e.scaleLabel:"",e.scaleOverride){var M=setOptionValue(!0,1,"SCALESTARTVALUE",t,a,m,void 0,e.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),P=setOptionValue(!0,1,"SCALESTEPS",t,a,m,void 0,e.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),T=setOptionValue(!0,1,"SCALESTEPWIDTH",t,a,m,void 0,e.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});c={steps:P,stepValue:T,graphMin:M,graphMax:M+P*T,labels:[]},populateLabels(1,e,u,c.labels,c.steps,M,c.graphMax,T),A=setMeasures(a,e,t,t.canvas.height,t.canvas.width,c.labels,null,!0,!0,!0,!0,!0,"HorizontalBar")}else c=calculateScale(1,e,p.maxSteps,p.minSteps,p.maxValue,p.minValue,u),A=setMeasures(a,e,t,t.canvas.height,t.canvas.width,c.labels,null,!0,!0,!0,!0,!0,"HorizontalBar");A.availableHeight=A.availableHeight-Math.ceil(t.chartLineScale*e.scaleTickSizeBottom)-Math.ceil(t.chartLineScale*e.scaleTickSizeTop),A.availableWidth=A.availableWidth-Math.ceil(t.chartLineScale*e.scaleTickSizeLeft)-Math.ceil(t.chartLineScale*e.scaleTickSizeRight),r=Math.floor(A.availableHeight/a.labels.length),S=Math.floor(A.availableWidth/c.steps),(0==S||e.fullWidthGraph)&&(S=A.availableWidth/c.steps),A.clrwidth=A.clrwidth-(A.availableWidth-c.steps*S),A.availableWidth=c.steps*S,A.availableHeight=a.labels.length*r,g=A.leftNotUsableSize+Math.ceil(t.chartLineScale*e.scaleTickSizeLeft),f=A.topNotUsableSize+A.availableHeight+Math.ceil(t.chartLineScale*e.scaleTickSizeTop),x=(r-2*Math.ceil(t.chartLineScale*e.scaleGridLineWidth)-2*Math.ceil(t.chartSpaceScale*e.barValueSpacing)-(Math.ceil(t.chartSpaceScale*e.barDatasetSpacing)*a.datasets.length-1)-(Math.ceil(t.chartLineScale*e.barStrokeWidth)/2*a.datasets.length-1))/a.datasets.length,x>=0&&1>=x&&(x=1),0>x&&x>=-1&&(x=-1);var v;1*e.maxBarWidth>0&&x>1*e.maxBarWidth?(v=a.datasets.length*(x-1*e.maxBarWidth)/2,x=1*e.maxBarWidth):v=0;var D=0;D=calculateOffset(e.logarithmic,0,c,S),o(),initPassVariableData_part2(m,a,e,t,{yAxisPosX:g,xAxisPosY:f,barWidth:x,additionalSpaceBetweenBars:v,zeroY:D,scaleHop:r,valueHop:S,calculatedScale:c}),animationLoop(e,n,i,t,A.clrx,A.clry,A.clrwidth,A.clrheight,g+A.availableWidth/2,f-A.availableHeight/2,g,f,a,m)}else testRedraw(t,a,e),t.firstPass=9;return{data:a,config:e,ctx:t}}},requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),requestAnimFrameSetTimeOut=function(){return function(a){window.setTimeout(a,1e3/60)}}(),cache={}};